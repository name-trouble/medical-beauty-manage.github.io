webpackJsonp([194],{1120:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(37),a=o.n(r),n=o(100),s=o.n(n),l=o(99),i=o.n(l),c=o(65),d=(o.n(c),o(22)),u=o(64);t.default={data:function(){return{saveLoading:!1,header:!1,show:!1,gradeAttrList:[],formLabelWidth:"90px",dialogFormVisible:!1,form:{},tableData:[],tableAdd:[]}},watch:{tableAdd:{handler:function(){0==this.tableAdd.length&&(this.show=!1)},deep:!0}},computed:{createUserId:function(){return o.i(d.b)("userId")},createBy:function(){return o.i(d.b)("userName")}},mounted:function(){this.getBranchGradeAll()},methods:{getBaseDataAll:function(r){var a=this;return i()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.i(u._62)(r);case 3:t=e.sent,a.gradeAttrList=a.getAttr(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,a,[[0,7]])}))()},getBranchGradeAll:function(){var r=this;return i()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.i(u._319)();case 3:t=e.sent,r.tableData=r.numOrder(t),r.getBaseDataAll(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,r,[[0,8]])}))()},addBaranchGrade:function(t,r,a){var n=this;return i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.saveLoading=!0,e.next=4,o.i(u._341)(t);case 4:e.sent.success&&(n.$message({message:"添加成功",type:"success"}),n.getBranchGradeAll(),r.splice(a,1)),n.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),n.$message.error("添加失败");case 13:case"end":return e.stop()}},e,n,[[0,9]])}))()},updateBaranchGrade:function(t){var r=this;return i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.saveLoading=!0,e.next=4,o.i(u._342)(t);case 4:e.sent.success&&(r.$message({message:"编辑成功",type:"success"}),r.getBranchGradeAll(),r.dialogFormVisible=!1),r.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.$message.error("编辑失败");case 13:case"end":return e.stop()}},e,r,[[0,9]])}))()},deleteBaranchGrade:function(t){var r=this;return i()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.i(u._343)(t);case 3:e.sent.success&&(r.$message({message:"删除成功",type:"success"}),r.getBranchGradeAll()),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),r.$message.error("删除失败");case 11:case"end":return e.stop()}},e,r,[[0,7]])}))()},edit:function(e,t){this.dialogFormVisible=!0,this.form=JSON.parse(a()(t[e]))},editSure:function(){this.updateBaranchGrade({code:this.form.Code,id:this.form.Id,branchGradeName:this.form.BranchGradeName,groupAward:this.form.GroupAward,gradeProperty:this.form.GradeProperty,orderNum:this.form.OrderNum})},cancel:function(){this.dialogFormVisible=!1,this.form={}},deleteRow:function(e,t,r){var a=this;0==r?this.$confirm("此操作将删除该等级, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteBaranchGrade({id:t[e].Id})}).catch(function(){}):t.splice(e,1)},addGrade:function(){this.tableAdd.push({code:"保存后编号由后台生成",branchGradeName:"",orderNum:"6",gradeProperty:"",groupAward:"0"}),this.show=!0},save:function(e,t){this.addBaranchGrade({branchGradeName:t[e].branchGradeName,orderNum:t[e].orderNum,gradeProperty:t[e].gradeProperty,groupAward:t[e].groupAward,createUserId:this.createUserId,createBy:this.createBy},t,e)},getAttr:function(e){var t=[];return e.forEach(function(e){"0012"==e.BusinessCode&&t.push(e)}),t},numOrder:function(e){for(var t=e.length,r=0;r<t-1;r++)for(var a=r+1;a<t;a++)if(e[r].OrderNum>e[a].OrderNum){var n=e[r];e[r]=e[a],e[a]=n}return e}},components:{}}},1366:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,"",""])},1791:function(e,t,r){var a=r(1366);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("09143ea8",a,!0)},2263:function(e,t){e.exports={render:function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",{staticClass:"GradeSet selCommon"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:r.tableData,border:""}},[a("el-table-column",{attrs:{prop:"Code",label:"等级编号","min-width":"150"}}),r._v(" "),a("el-table-column",{attrs:{prop:"BranchGradeName",label:"等级名称","min-width":"150"}}),r._v(" "),a("el-table-column",{attrs:{prop:"OrderNum",label:"等级（数字越小等级越高）","min-width":"180"}}),r._v(" "),a("el-table-column",{attrs:{prop:"GroupAward",label:"团队奖","min-width":"120"}}),r._v(" "),a("el-table-column",{attrs:{prop:"Price",label:"会费","min-width":"120"}}),r._v(" "),a("el-table-column",{attrs:{prop:"GradeProperty",label:"等级属性","min-width":"120"}}),r._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.edit(t.$index,r.tableData)}}},[r._v("编辑")]),r._v(" "),a("el-button",{attrs:{type:"dasnger",size:"small"},on:{click:function(e){return r.deleteRow(t.$index,r.tableData,0)}}},[r._v("删除")])]}}])})],1),r._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:r.show,expression:"show"}],staticStyle:{width:"100%"},attrs:{data:r.tableAdd,border:"","show-header":r.header}},[a("el-table-column",{attrs:{prop:"num",label:"等级编号","min-width":"150"},scopedSlots:r._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#999"}},[r._v(r._s(e.row.code))])]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"name",label:"等级名称","min-width":"150"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.branchGradeName,callback:function(e){r.$set(t.row,"branchGradeName",e)},expression:"scope.row.branchGradeName"}})]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"等级","min-width":"180"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.orderNum,callback:function(e){r.$set(t.row,"orderNum",e)},expression:"scope.row.orderNum"}})]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"award",label:"团队奖","min-width":"120"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.groupAward,callback:function(e){r.$set(t.row,"groupAward",e)},expression:"scope.row.groupAward"}})]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"award",label:"会费","min-width":"120"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number"},model:{value:t.row.price,callback:function(e){r.$set(t.row,"price",e)},expression:"scope.row.price"}})]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"attr",label:"等级属性","min-width":"120"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.gradeProperty,callback:function(e){r.$set(t.row,"gradeProperty",e)},expression:"scope.row.gradeProperty"}},r._l(r.gradeAttrList,function(e){return a("el-option",{key:e.DataCode,attrs:{label:e.DataName,value:e.DataName}})}),1)]}}])}),r._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.save(t.$index,r.tableAdd)}}},[r._v("保存")]),r._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return r.deleteRow(t.$index,r.tableAdd,1)}}},[r._v("删除")])]}}])})],1),r._v(" "),a("el-button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary",icon:"plus"},on:{click:function(e){return r.addGrade()}}},[r._v("添加等级属性")]),r._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:r.dialogFormVisible,size:""},on:{"update:visible":function(e){r.dialogFormVisible=e}}},[a("el-form",{staticStyle:{width:"400px"},attrs:{model:r.form}},[a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"等级名称：","label-width":r.formLabelWidth}},[a("el-input",{staticStyle:{width:"260px"},attrs:{"auto-complete":"off"},model:{value:r.form.BranchGradeName,callback:function(e){r.$set(r.form,"BranchGradeName",e)},expression:"form.BranchGradeName"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"团队奖：","label-width":r.formLabelWidth}},[a("el-input",{staticStyle:{width:"260px"},attrs:{"auto-complete":"off"},model:{value:r.form.GroupAward,callback:function(e){r.$set(r.form,"GroupAward",e)},expression:"form.GroupAward"}},[a("template",{slot:"append"},[r._v("%")])],2)],1),r._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"等级属性：","label-width":r.formLabelWidth}},[a("el-select",{staticStyle:{width:"260px"},attrs:{"auto-complete":"off"},model:{value:r.form.GradeProperty,callback:function(e){r.$set(r.form,"GradeProperty",e)},expression:"form.GradeProperty"}},r._l(r.gradeAttrList,function(e){return a("el-option",{key:e.DataCode,attrs:{label:e.DataName,value:e.DataName}})}),1)],1)],1),r._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:r.saveLoading},on:{click:function(e){return r.editSure()}}},[r._v("确 定")]),r._v(" "),a("el-button",{on:{click:function(e){return r.cancel()}}},[r._v("取 消")])],1)],1)],1)},staticRenderFns:[]}},378:function(e,t,r){r(1791);var a=r(98)(r(1120),r(2263),"data-v-4bbf9e16",null);e.exports=a.exports}});