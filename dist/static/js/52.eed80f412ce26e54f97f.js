webpackJsonp([52],{1108:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(100),r=i.n(a),s=i(99),n=i.n(s),l=i(101),o=i(441),c=i(22),m=i(490),d=i.n(m),u=i(64);t.default={props:{selectProject:{type:Array},ProjectId:{type:Array},editMes:{}},data:function(){return{saveLoading:!1,acceptImage:"",action:"",imageUrl:"",goodsMes:[],date:"",radio:"1",radio1:"100",checkList:[],userList:[],goodsIds:[],projectList:[],form:{amount:"",name:"",startDate:"",endDate:"",CatalogType:"",limitAmount:"",type:"",ProjectId:[],limitCount:"",limitUser:"",IsAllGoods:"",isAllSupplyer:"",image:"",ReturnTimes:"",ReturnPoint:0,IsLimitTimes:""},rule:[]}},watch:{selectProject:{handler:function(e){this.goodsIds=this.getArray(e)},deep:!0},"form.isAllSupplyer":{handler:function(e){"true"==e&&(this.checkList=[])},deep:!0}},mounted:function(){this.action=l.b+"/api/Image/UploadImg?op=activity",this.acceptImage=o.b,this.getTopBranch()},methods:{getTopBranch:function(){var a=this;return n()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.i(u._194)();case 3:return t=e.sent,e.next=6,i.i(u._407)({id:a.editMes.id});case 6:a.goodsMes=e.sent,a.goodsIds=a.goodsMes.data.goodsIds,a.userList=t,a.getGoods(),a.copyWorth(a.editMes),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,a,[[0,13]])}))()},EditReturnPointRule:function(t){var a=this;return n()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.saveLoading=!0,e.next=4,i.i(u._408)(t);case 4:1==e.sent.status?(a.$message({type:"success",message:"添加成功!"}),a.$emit("closeAdd"),a.$refs.form.resetFields()):a.$message({type:"error",message:"添加失败!"}),a.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),a.$message({type:"error",message:"添加失败!"});case 13:case"end":return e.stop()}},e,a,[[0,9]])}))()},dateForm:function(e){e=e.formatDates(),this.form.startDate=e.substring(0,10)+" 00:00:00",this.form.endDate=e.substring(13)+" 00:00:00"},save:function(){0!=this.selectProject.length&&(this.goodsIds=this.getArray(this.selectProject)),this.EditReturnPointRule({id:this.editMes.id,number:this.editMes.number,name:this.form.name,startDate:this.form.startDate+" 00:00:00",endDate:this.form.endDate+" 00:00:00",returnType:this.form.type,CatalogType:this.form.CatalogType,agentId:this.checkList.join("|"),goodsIds:this.goodsIds,IsAllGoods:this.form.IsAllGoods,pcCreateUserId:i.i(c.b)("userId"),image:this.form.image,isAllSupplyer:this.form.isAllSupplyer,ReturnTimes:this.form.ReturnTimes,ReturnPoint:this.form.ReturnPoint,IsLimitTimes:this.form.IsLimitTimes})},cancel:function(){this.$emit("closeAdd","cancel")},add:function(){this.$emit("selectP",[this.form.CatalogType,this.goodsIds])},getArray:function(e){var t=[];return e.forEach(function(e){t.push(e.Code)}),t},copyWorth:function(e){var t=this;this.form.image=e.image,this.form.name=e.name,this.date=e.startDate.substring(0,10)+" - "+e.endDate.substring(0,10),this.form.CatalogType=e.catalogType+"",this.form.limitAmount=e.limitAmount,this.form.isAllSupplyer=e.isAllSupplyer+"",this.form.type=e.returnType+"",this.form.ReturnPoint=e.returnPoint+"",this.form.IsLimitTimes=e.isLimitTimes+"",this.form.ReturnTimes=e.returnTimes+"",setTimeout(function(){t.checkList=e.agentId.split("|")},100),this.form.IsAllGoods=e.isAllGoods+"",this.imageUrl=l.b+e.image},getDate:function(e,t){this.form.startDate=e,this.form.endDate=t},getGoods:function(){var s=this;return n()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1==s.editMes.catalogType)return e.next=4,i.i(u._187)();e.next=7;break;case 4:s.projectList=e.sent,e.next=10;break;case 7:return e.next=9,i.i(u._187)({IsMall:1});case 9:s.projectList=e.sent;case 10:0!=s.projectList.length&&(a=s.goodsIds,s.projectList.forEach(function(e){for(var t=0;t<a.length;t++)e.Code==a[t]&&s.selectProject.push(e)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}},e,s,[[0,13]])}))()},handleAvatarSuccess:function(e,t){""!=this.form.image&&this.DelImg(this.form.image),this.imageUrl=URL.createObjectURL(t.raw),this.form.image=e},DelImg:function(a){var s=this;return n()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.i(u._73)({filepath:a});case 2:(t=e.sent).status||s.$message({message:"原图片删除失败！"+t.errorMessage,type:"warning"});case 4:case"end":return e.stop()}},e,s)}))()},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t}},components:{dateLink:d.a}}},1109:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(100),r=i.n(a),s=i(99),n=i.n(s),l=i(703),o=(i.n(l),i(101)),c=i(441),m=i(22),d=i(64);t.default={props:{selectProject:{type:Array},ProjectId:{type:Array}},data:function(){return{saveLoading:!1,date:"",radio:"1",radio1:"100",checkList:[],userList:[],acceptImage:"",action:"",imageUrl:"",form:{amount:"",name:"",startDate:"",endDate:"",checked:!0,channel:"1",CatalogType:"1",limitAmount:"",totalCount:1,type:"1",ProjectId:[],limitCount:"",limitUser:"",IsAllGoods:"true",isAllSupplyer:"",image:"",ReturnTimes:"",ReturnPoint:0,IsLimitTimes:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],totalCount:[{required:!0,message:"请输入发行数量",trigger:"blur"}]}}},mounted:function(){this.action=o.b+"/api/Image/UploadImg?op=activity",this.acceptImage=c.b,this.getTopBranch()},methods:{getTopBranch:function(){var a=this;return n()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.i(d._194)();case 3:t=e.sent,a.userList=t,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,a,[[0,7]])}))()},AddReturnPointRule:function(t){var a=this;return n()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.saveLoading=!0,e.next=4,i.i(d._409)(t);case 4:1==e.sent.status?(a.$message({type:"success",message:"添加成功!"}),a.$emit("closeAdd"),a.$refs.form.resetFields()):a.$message({type:"error",message:"添加失败!"}),a.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),a.$message({type:"error",message:"添加失败!"});case 13:case"end":return e.stop()}},e,a,[[0,9]])}))()},dateForm:function(e){e=e.formatDates(),this.form.startDate=e.substring(0,10)+" 00:00:00",this.form.endDate=e.substring(13)+" 00:00:00"},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.AddReturnPointRule({name:t.form.name,startDate:t.form.startDate,endDate:t.form.endDate,returnType:t.form.type,status:1,CatalogType:t.form.CatalogType,goodsIds:t.getArray(t.selectProject),IsAllGoods:t.form.IsAllGoods,limitAmount:t.form.limitAmount,agentId:t.checkList.join("|"),channel:t.form.channel,isAllowShare:t.form.checked,pcCreateUserId:i.i(m.b)("userId"),image:t.form.image,isAllSupplyer:t.form.isAllSupplyer,ReturnTimes:t.form.ReturnTimes,ReturnPoint:t.form.ReturnPoint,IsLimitTimes:t.form.IsLimitTimes})})},cancel:function(){this.$emit("closeAdd","cancel")},add:function(){this.$emit("selectP",this.form.CatalogType)},getArray:function(e){var t=[];return e.forEach(function(e){t.push(e.Code)}),t},handleAvatarSuccess:function(e,t){""!=this.form.image&&this.DelImg(this.form.image),this.imageUrl=URL.createObjectURL(t.raw),this.form.image=e},DelImg:function(a){var s=this;return n()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.i(d._73)({filepath:a});case 2:(t=e.sent).status||s.$message({message:"原图片删除失败！"+t.errorMessage,type:"warning"});case 4:case"end":return e.stop()}},e,s)}))()},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t}},components:{}}},1111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),l=n.n(a),s=n(99),o=n.n(s),i=n(65),r=(n.n(i),n(2083)),c=n.n(r),m=n(2082),d=n.n(m),u=n(64);t.default={data:function(){return{total:0,size:10,currentPage:1,loading:!0,data1:[],data2:[],editMes:{},selectProject:[],defaultProps:{children:"children",label:"label"},editProject:[],ProjectId:[],projectList:[],classList:[],dialogFormVisibleT:!1,dialogFormVisible1:!1,dialogFormVisible:!1,currentIndex:0,nav:["全部","未开始","进行中","已结束"],tableData:[]}},mounted:function(){this.search(0)},methods:{GetReturnPointRuleList:function(a){var s=this;return o()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.i(u._404)(a);case 3:t=e.sent,s.total=t.count,s.tableData=t.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,s,[[0,8]])}))()},DeleteReturnPointRule:function(t){var a=this;return o()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.i(u._405)(t);case 3:e.sent.status?(a.$message({type:"success",message:"删除成功!"}),a.search(a.currentIndex)):a.$message({type:"error",message:"删除失败!"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a.$message({type:"error",message:"删除失败!"});case 11:case"end":return e.stop()}},e,a,[[0,7]])}))()},CloseReturnPoint:function(t){var a=this;return o()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.i(u._406)(t);case 3:e.sent.status?(a.$message({type:"success",message:"关闭成功!"}),a.search(a.currentIndex)):a.$message({type:"error",message:"关闭失败!"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a.$message({type:"error",message:"关闭失败!"});case 11:case"end":return e.stop()}},e,a,[[0,7]])}))()},close:function(e,t){this.CloseReturnPoint({id:t[e].id,status:4})},edit:function(e,t){this.dialogFormVisibleT=!0,this.editMes=t[e],this.selectProject=[]},deleteRow:function(e,t){this.DeleteReturnPointRule({id:t[e].id})},add:function(){this.dialogFormVisible=!0,this.selectProject=[]},select:function(e){this.currentIndex=e,this.search(e)},selectP:function(e){this.loading=!0,1<e.length?this.getData(e[0],e[1]):this.getData(e),this.dialogFormVisible1=!0},cancelProject:function(){this.dialogFormVisible1=!1},search:function(e){var t="";0!=e&&(t="status"+e),this.GetReturnPointRuleList({pageIndex:this.currentPage,pageSize:this.size,where:t})},getNode:function(){var t=[];this.$refs.tree.getCheckedNodes().forEach(function(e){e.CatalogPath&&t.push(e)}),this.selectProject=t,this.ProjectId=this.getParent(this.$refs.tree.getCheckedNodes()),this.dialogFormVisible1=!1},getParent:function(e){for(var t=e.length,a=[],s=0;s<t;s++)for(var i=0;i<t&&e[s].pid!=e[i].id;i++)i==t-1&&a.push(e[s]);return a},getData:function(s,i){var r=this;return o()(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1==s)return e.next=3,n.i(u._187)();e.next=10;break;case 3:return r.projectList=e.sent,e.next=6,n.i(u._207)({code:100});case 6:t=e.sent,r.classList=t.data,e.next=17;break;case 10:return e.next=12,n.i(u._187)({IsMall:1});case 12:return r.projectList=e.sent,e.next=15,n.i(u._207)({code:101});case 15:a=e.sent,r.classList=a.data;case 17:r.data1=r.dealData(r.projectList),r.data2=r.getDataTree(r.classList),i&&(r.selectProject=r.geteditMes(r.data1,i)),r.loading=!1,setTimeout(function(){r.setCheckedKeys(i)},500);case 22:case"end":return e.stop()}},e,r)}))()},getDataTree:function(e){var t=[];return e.forEach(function(e){t.push({id:e.code,label:e.name,pid:e.parentCode})}),this.getdata(this.data1.concat(t),"")},dealData:function(e){return e.forEach(function(e){var t=e.CatalogPath.split("|");e.pid=t[t.length-2],e.label=e.Name,e.id=e.Code}),e},getdata:function(e,t){for(var a,s=[],i=0;i<e.length;i++)if(e[i].pid==t){var r=e[i];0<(a=this.getdata(e,e[i].id)).length&&(r.children=a),s.push(r)}return s},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.size=e,this.search(this.currentIndex)},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.search(this.currentIndex)},closeAdd:function(e){"cancel"!=e&&this.search(this.currentIndex),this.dialogFormVisible=!1,this.dialogFormVisibleT=!1},geteditMes:function(e,t){for(var a=[],s=t.length,i=e.length,r=0;r<s;r++)for(var n=0;n<i;n++)if(t[r]==e[n].Code){a.push(e[n]);break}return a},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)}},components:{add:c.a,edit:d.a}}},1256:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1300:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".form_item_ipt_260[data-v-28e67d3b]{width:260px}.form_item_ipt_60[data-v-28e67d3b]{width:80px}.form_item_mt0[data-v-28e67d3b]{width:800px}.tag[data-v-28e67d3b]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:160px;margin:5px 5px 0 0;float:left;cursor:pointer}.avatar-uploader-icon[data-v-28e67d3b]{font-size:28px;color:#8c939d;width:108px;height:108px;line-height:108px;text-align:center}.avatar[data-v-28e67d3b]{width:108px;height:108px;display:block}",""])},1363:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".form_item_ipt_260[data-v-4aaa1bcc]{width:260px}.form_item_ipt_60[data-v-4aaa1bcc]{width:80px}.form_item_mt0[data-v-4aaa1bcc]{width:800px}.tag[data-v-4aaa1bcc]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:160px;margin:5px 5px 0 0;float:left;cursor:pointer}.avatar-uploader-icon[data-v-4aaa1bcc]{font-size:28px;color:#8c939d;width:108px;height:108px;line-height:108px;text-align:center}.avatar[data-v-4aaa1bcc]{width:108px;height:108px;display:block}",""])},1681:function(e,t,a){var s=a(1256);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(216)("0446f7c8",s,!0)},1725:function(e,t,a){var s=a(1300);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(216)("5f483c96",s,!0)},1788:function(e,t,a){var s=a(1363);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(216)("7dd9d91c",s,!0)},2082:function(e,t,a){a(1788);var s=a(98)(a(1108),a(2260),"data-v-4aaa1bcc",null);e.exports=s.exports},2083:function(e,t,a){a(1725);var s=a(98)(a(1109),a(2197),"data-v-28e67d3b",null);e.exports=s.exports},2153:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"selCommon rebates"},[s("ul",[a._l(a.nav,function(e,t){return s("li",{key:t,staticClass:"shelve",class:{active:a.currentIndex==t},on:{click:function(e){return a.select(t)}}},[a._v(a._s(e)+"\n        ")])}),a._v(" "),s("li",{staticStyle:{display:"inline-block"}},[s("el-button",{attrs:{type:"primary"},on:{click:a.add}},[a._v("添加返现活动")])],1)],2),a._v(" "),s("el-table",{staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px","min-height":"400px"},attrs:{data:a.tableData,border:"","max-height":"560"}},[s("el-table-column",{attrs:{prop:"number",label:"活动编号","min-width":"100"}}),a._v(" "),s("el-table-column",{attrs:{prop:"name",label:"活动名称","min-width":"100"}}),a._v(" "),s("el-table-column",{attrs:{prop:"SourcWayeCode",label:"有效时间","min-width":"150"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.startDate?s("span",[a._v("\n                    开始时间："+a._s(e.row.startDate.substring(0,10))),s("br"),a._v("\n                    结束时间："+a._s(e.row.endDate.substring(0,10))+"\n                ")]):a._e()]}}])}),a._v(" "),s("el-table-column",{attrs:{prop:"catalogType",label:"适用栏目","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[1==e.row.catalogType?s("span",[a._v("医美")]):a._e(),a._v(" "),2==e.row.catalogType?s("span",[a._v("商城")]):a._e()]}}])}),a._v(" "),s("el-table-column",{attrs:{prop:"IsAllGoods",label:"适用商品","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.IsAllGoods?s("span",[a._v("全部商品")]):a._e(),a._v(" "),e.row.IsAllGoods?a._e():s("span",[a._v("部分商品")])]}}])}),a._v(" "),s("el-table-column",{attrs:{prop:"status",label:"活动状态","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[1==e.row.status?s("span",[a._v("未开始")]):a._e(),a._v(" "),2==e.row.status?s("span",[a._v("进行中")]):a._e(),a._v(" "),3==e.row.status?s("span",[a._v("已结束")]):a._e(),a._v(" "),4==e.row.status?s("span",[a._v("已关闭")]):a._e()]}}])}),a._v(" "),3!=a.currentIndex?s("el-table-column",{attrs:{prop:"grade",label:"操作",width:"150"},scopedSlots:a._u([{key:"default",fn:function(t){return[3!=t.row.status?s("el-button",{attrs:{type:"text"},on:{click:function(e){return a.edit(t.$index,a.tableData)}}},[a._v("编辑\n                ")]):a._e(),a._v(" "),3!=t.row.status?s("el-button",{attrs:{type:"text"},on:{click:function(e){return a.close(t.$index,a.tableData)}}},[a._v("关闭\n                ")]):a._e(),a._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(e){return a.deleteRow(t.$index,a.tableData)}}},[a._v("删除")])]}}],null,!1,3105764743)}):a._e()],1),a._v(" "),s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),s("el-dialog",{attrs:{title:"添加",visible:a.dialogFormVisible,size:""},on:{"update:visible":function(e){a.dialogFormVisible=e}}},[a.dialogFormVisible?s("add",{staticStyle:{width:"800px"},attrs:{selectProject:a.selectProject,ProjectId:a.ProjectId},on:{selectP:a.selectP,closeAdd:a.closeAdd}}):a._e()],1),a._v(" "),s("el-dialog",{attrs:{modal:!0,title:"",visible:a.dialogFormVisible1,size:"","label-width":"80px"},on:{"update:visible":function(e){a.dialogFormVisible1=e}}},[s("div",{staticClass:"goodList",staticStyle:{width:"600px"}},[s("el-tree",{directives:[{name:"loading",rawName:"v-loading.body",value:a.loading,expression:"loading",modifiers:{body:!0}}],ref:"tree",attrs:{data:a.data2,"show-checkbox":"",accordion:!0,"node-key":"id","highlight-current":"",props:a.defaultProps,"element-loading-text":"拼命加载中"}}),a._v(" "),s("div",{staticClass:"footer_ope"},[s("el-button",{attrs:{type:"primary"},on:{click:a.getNode}},[a._v("保存")]),a._v(" "),s("el-button",{on:{click:a.cancelProject}},[a._v("取消")])],1)],1)]),a._v(" "),s("el-dialog",{attrs:{modal:!0,title:"编辑",visible:a.dialogFormVisibleT,size:"","label-width":"80px"},on:{"update:visible":function(e){a.dialogFormVisibleT=e}}},[a.dialogFormVisibleT?s("edit",{staticStyle:{width:"800px"},attrs:{editMes:a.editMes,selectProject:a.selectProject,ProjectId:a.ProjectId},on:{selectP:a.selectP,closeAdd:a.closeAdd}}):a._e()],1)],1)},staticRenderFns:[]}},2197:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"add"},[s("el-form",{ref:"form",staticStyle:{width:"400px"},attrs:{model:a.form,rules:a.rules}},[s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:""}},[s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[a._v("活动信息")])]),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"活动名称：",prop:"name","label-width":"90px"}},[s("el-input",{staticClass:"form_item_ipt_260",attrs:{placeholder:""},model:{value:a.form.name,callback:function(e){a.$set(a.form,"name",e)},expression:"form.name"}})],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"生效时间：","label-width":"90px"}},[s("el-date-picker",{staticClass:"form_item_ipt_260",attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:a.dateForm},model:{value:a.date,callback:function(e){a.date=e},expression:"date"}})],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"标签图片：","label-width":"90px"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{accept:a.acceptImage,action:a.action,"show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload}},[a.imageUrl?s("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:""}},[s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[a._v("返现设置")])]),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"返现方式：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",staticStyle:{float:"left","margin-right":"5px"},attrs:{label:"1"},model:{value:a.form.type,callback:function(e){a.$set(a.form,"type",e)},expression:"form.type"}},[a._v("固定返现")]),a._v(" "),s("el-input-number",{staticClass:"form_item_ipt_60",staticStyle:{float:"left"},attrs:{min:0,controls:!1},model:{value:a.form.ReturnPoint,callback:function(e){a.$set(a.form,"ReturnPoint",e)},expression:"form.ReturnPoint"}}),a._v("%\n           ")],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"返现限制：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",staticStyle:{float:"left","margin-right":"10px"},attrs:{label:"true"},model:{value:a.form.IsLimitTimes,callback:function(e){a.$set(a.form,"IsLimitTimes",e)},expression:"form.IsLimitTimes"}},[a._v("限制")]),a._v(" "),s("span",{staticStyle:{float:"left","margin-right":"5px","line-height":"39px"}},[a._v("前")]),a._v(" "),s("el-input-number",{staticClass:"form_item_ipt_60",staticStyle:{float:"left"},attrs:{min:0,controls:!1},model:{value:a.form.ReturnTimes,callback:function(e){a.$set(a.form,"ReturnTimes",e)},expression:"form.ReturnTimes"}}),a._v("\n            笔订单可使用（活动时间内每个买家在该店的前N笔订单）\n            "),s("el-radio",{staticClass:"radio",attrs:{label:"false"},model:{value:a.form.IsLimitTimes,callback:function(e){a.$set(a.form,"IsLimitTimes",e)},expression:"form.IsLimitTimes"}},[a._v("不限")])],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:""}},[s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[a._v("选择活动范围")])]),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"适用商户：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",attrs:{label:"true"},model:{value:a.form.isAllSupplyer,callback:function(e){a.$set(a.form,"isAllSupplyer",e)},expression:"form.isAllSupplyer"}},[a._v("所有商户")]),a._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:"false"},model:{value:a.form.isAllSupplyer,callback:function(e){a.$set(a.form,"isAllSupplyer",e)},expression:"form.isAllSupplyer"}},[a._v("部分商户")]),a._v(" "),"false"==a.form.isAllSupplyer?s("el-checkbox-group",{model:{value:a.checkList,callback:function(e){a.checkList=e},expression:"checkList"}},a._l(a.userList,function(e,t){return s("el-checkbox",{key:t,attrs:{label:e.Code}},[a._v(a._s(e.BranchName))])}),1):a._e()],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"适用栏目：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:a.form.CatalogType,callback:function(e){a.$set(a.form,"CatalogType",e)},expression:"form.CatalogType"}},[a._v("医美")]),a._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:"2"},model:{value:a.form.CatalogType,callback:function(e){a.$set(a.form,"CatalogType",e)},expression:"form.CatalogType"}},[a._v("商城")])],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"适用商品：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",attrs:{label:"true"},model:{value:a.form.IsAllGoods,callback:function(e){a.$set(a.form,"IsAllGoods",e)},expression:"form.IsAllGoods"}},[a._v("全部")]),a._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:"false"},model:{value:a.form.IsAllGoods,callback:function(e){a.$set(a.form,"IsAllGoods",e)},expression:"form.IsAllGoods"}},[a._v("部分")]),a._v(" "),"false"==a.form.IsAllGoods?s("span",[s("el-button",{attrs:{type:"text"},on:{click:a.add}},[a._v("+添加项目")]),a._v("\n            已选择"+a._s(a.selectProject.length)+"个"),s("br")],1):a._e(),a._v(" "),a._l(a.selectProject,function(e,t){return s("el-tag",{key:t,staticClass:"tag",attrs:{type:"primary",title:e.Name}},[a._v(a._s(e.Name)+"\n            ")])})],2)],1),a._v(" "),s("div",{staticClass:"footer_ope"},[s("el-button",{attrs:{type:"primary",loading:a.saveLoading},on:{click:function(e){return a.save("form")}}},[a._v("保存")]),a._v(" "),s("el-button",{on:{click:a.cancel}},[a._v("取消")])],1)],1)},staticRenderFns:[]}},2260:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"edit"},[s("el-form",{ref:"form",staticStyle:{width:"400px"},attrs:{model:a.form}},[s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:""}},[s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[a._v("活动信息")])]),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"活动名称：",prop:"name","label-width":"90px"}},[s("el-input",{staticClass:"form_item_ipt_260",attrs:{placeholder:""},model:{value:a.form.name,callback:function(e){a.$set(a.form,"name",e)},expression:"form.name"}})],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"生效时间：","label-width":"90px"}},[s("dateLink",{attrs:{date:a.date},on:{getDate:a.getDate}})],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"标签图片：","label-width":"90px"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{accept:a.acceptImage,action:a.action,"show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload}},[a.imageUrl?s("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:""}},[s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[a._v("返现设置")])]),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"返现方式：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",staticStyle:{float:"left","margin-right":"5px"},attrs:{label:"1"},model:{value:a.form.type,callback:function(e){a.$set(a.form,"type",e)},expression:"form.type"}},[a._v("固定返现")]),a._v(" "),s("el-input-number",{staticClass:"form_item_ipt_60",staticStyle:{float:"left"},attrs:{min:0,controls:!1},model:{value:a.form.ReturnPoint,callback:function(e){a.$set(a.form,"ReturnPoint",e)},expression:"form.ReturnPoint"}}),a._v("%\n            ")],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"返现限制：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",staticStyle:{float:"left","margin-right":"10px"},attrs:{label:"true"},model:{value:a.form.IsLimitTimes,callback:function(e){a.$set(a.form,"IsLimitTimes",e)},expression:"form.IsLimitTimes"}},[a._v("限制")]),a._v(" "),s("span",{staticStyle:{float:"left","margin-right":"5px","line-height":"39px"}},[a._v("前")]),a._v(" "),s("el-input-number",{staticClass:"form_item_ipt_60",staticStyle:{float:"left"},attrs:{min:1,controls:!1},model:{value:a.form.ReturnTimes,callback:function(e){a.$set(a.form,"ReturnTimes",e)},expression:"form.ReturnTimes"}}),a._v("\n            笔订单可使用（活动时间内每个买家在该店的前N笔订单）\n            "),s("el-radio",{staticClass:"radio",attrs:{label:"false"},model:{value:a.form.IsLimitTimes,callback:function(e){a.$set(a.form,"IsLimitTimes",e)},expression:"form.IsLimitTimes"}},[a._v("不限")])],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:""}},[s("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[a._v("选择活动范围")])]),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"适用商户：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",attrs:{label:"true"},model:{value:a.form.isAllSupplyer,callback:function(e){a.$set(a.form,"isAllSupplyer",e)},expression:"form.isAllSupplyer"}},[a._v("所有商户")]),a._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:"false"},model:{value:a.form.isAllSupplyer,callback:function(e){a.$set(a.form,"isAllSupplyer",e)},expression:"form.isAllSupplyer"}},[a._v("部分商户")]),a._v(" "),"false"==a.form.isAllSupplyer?s("el-checkbox-group",{model:{value:a.checkList,callback:function(e){a.checkList=e},expression:"checkList"}},a._l(a.userList,function(e,t){return s("el-checkbox",{key:t,attrs:{label:e.Code}},[a._v(a._s(e.BranchName))])}),1):a._e()],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"适用栏目：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:a.form.CatalogType,callback:function(e){a.$set(a.form,"CatalogType",e)},expression:"form.CatalogType"}},[a._v("医美")]),a._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:"2"},model:{value:a.form.CatalogType,callback:function(e){a.$set(a.form,"CatalogType",e)},expression:"form.CatalogType"}},[a._v("商城")])],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"适用商品：","label-width":"90px"}},[s("el-radio",{staticClass:"radio",attrs:{label:"true"},model:{value:a.form.IsAllGoods,callback:function(e){a.$set(a.form,"IsAllGoods",e)},expression:"form.IsAllGoods"}},[a._v("全部")]),a._v(" "),s("el-radio",{staticClass:"radio",attrs:{label:"false"},model:{value:a.form.IsAllGoods,callback:function(e){a.$set(a.form,"IsAllGoods",e)},expression:"form.IsAllGoods"}},[a._v("部分")]),a._v(" "),"false"==a.form.IsAllGoods?s("span",[s("el-button",{attrs:{type:"text"},on:{click:a.add}},[a._v("+添加项目")]),a._v("\n            已选择"+a._s(a.selectProject.length)+"个"),s("br")],1):a._e(),a._v(" "),a._l(a.selectProject,function(e,t){return s("el-tag",{key:t,staticClass:"tag",attrs:{type:"primary",title:e.Name}},[a._v(a._s(e.Name)+"\n            ")])})],2)],1),a._v(" "),s("div",{staticClass:"footer_ope"},[s("el-button",{attrs:{type:"primary",loading:a.saveLoading},on:{click:function(e){return a.save("form")}}},[a._v("保存")]),a._v(" "),s("el-button",{on:{click:a.cancel}},[a._v("取消")])],1)],1)},staticRenderFns:[]}},370:function(e,t,a){a(1681);var s=a(98)(a(1111),a(2153),"data-v-15037d41",null);e.exports=s.exports},441:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return n}),a.d(t,"e",function(){return r}),a.d(t,"c",function(){return l});var s="image/gif,image/jpeg,image/jpg,image/png,image/svg",i="/Image/UploadImg",r="9",n=[{name:"中国",value:"01"},{name:"中国台湾",value:"02"},{name:"韩国",value:"03"},{name:"美国",value:"04"}],l=[{name:"网页",linkType:"0",linkUrl:""},{name:"热门",linkType:"1",linkUrl:"0"},{name:"直播",linkType:"1",linkUrl:"1"},{name:"视频",linkType:"1",linkUrl:"2"},{name:"问答",linkType:"1",linkUrl:"4"},{name:"精选案例",linkType:"2",linkUrl:"0"},{name:"最新案例",linkType:"2",linkUrl:"1"},{name:"附近案例",linkType:"2",linkUrl:"2"},{name:"医院详情",linkType:"3",linkUrl:""},{name:"医生详情",linkType:"4",linkUrl:""},{name:"项目详情",linkType:"5",linkUrl:""},{name:"商品详情",linkType:"6",linkUrl:""},{name:"案例详情",linkType:"7",linkUrl:""},{name:"卡券详情",linkType:"8",linkUrl:""},{name:"活动详情",linkType:"9",linkUrl:""},{name:"问答详情",linkType:"10",linkUrl:""},{name:"视频详情",linkType:"11",linkUrl:""},{name:"直播详情",linkType:"12",linkUrl:""},{name:"医美百科",linkType:"13",linkUrl:""},{name:"金牌设计",linkType:"14",linkUrl:""},{name:"抽奖中心",linkType:"15",linkUrl:""},{name:"红包专区",linkType:"16",linkUrl:""},{name:"html扩展页面",linkType:"17",linkUrl:""},{name:"医院列表",linkType:"18",linkUrl:""},{name:"项目列表",linkType:"19",linkUrl:""},{name:"卡券列表",linkType:"20",linkUrl:""},{name:"医生列表",linkType:"21",linkUrl:""},{name:"活动列表",linkType:"22",linkUrl:""},{name:"商家列表",linkType:"23",linkUrl:""},{name:"商家商品列表",linkType:"24",linkUrl:""},{name:"商家详情",linkType:"25",linkUrl:""},{name:"商家商品详情",linkType:"26",linkUrl:""},{name:"我的-订单",linkType:"27",linkUrl:"0"},{name:"我的-邀请好友",linkType:"27",linkUrl:"1"},{name:"我的-我的消息",linkType:"27",linkUrl:"2"},{name:"我的-我的收藏",linkType:"27",linkUrl:"3"},{name:"我的-身份认证",linkType:"27",linkUrl:"4"},{name:"我的-我的财富",linkType:"27",linkUrl:"5"},{name:"我的-关于我们",linkType:"27",linkUrl:"6"},{name:"我的-联系我们",linkType:"27",linkUrl:"7"},{name:"我的-信息咨询",linkType:"27",linkUrl:"8"},{name:"医院中心",linkType:"28",linkUrl:"0"},{name:"销售公司",linkType:"28",linkUrl:"1"},{name:"消费商",linkType:"28",linkUrl:"2"},{name:"商家中心",linkType:"28",linkUrl:"3"}]},486:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{date:""},data:function(){return{date1:"",date2:"",pickerOptionsStart:{disabledDate:function(){}},pickerOptionsOver:{disabledDate:function(){}}}},watch:{date:{handler:function(){this.copyWorth()},deep:!0}},mounted:function(){},methods:{copyWorth:function(){0!=this.date.length&&(this.date1=this.date.substring(0,10),this.date2=this.date.substring(13))},getDate:function(e){var t=e.split(" ")[0].split("-");return new Date(t[0],t[1]-1,t[2])},starTimeChang:function(e){var t=void 0;t=e?this.getDate(e):"",this.pickerOptionsOver={disabledDate:function(e){return e.getTime()<t}},this.$emit("getDate",this.date1,this.date2)},endTimeChang:function(e){var t=void 0;t=e?this.getDate(e):"",this.pickerOptionsStart={disabledDate:function(e){return e.getTime()>=t}},this.$emit("getDate",this.date1,this.date2)}},components:{}}},488:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},489:function(e,t,a){var s=a(488);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(216)("fbb5ce40",s,!0)},490:function(e,t,a){a(489);var s=a(98)(a(486),a(491),"data-v-266030ab",null);e.exports=s.exports},491:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期","picker-options":t.pickerOptionsStart},on:{change:t.starTimeChang},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}}),t._v(" "),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期","picker-options":t.pickerOptionsOver},on:{change:t.endTimeChang},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)},staticRenderFns:[]}},703:function(e,t,a){e.exports={default:a(704),__esModule:!0}},704:function(e,t,a){a(706),e.exports=a(2).Number.isInteger},705:function(e,t,a){var s=a(19),i=Math.floor;e.exports=function(e){return!s(e)&&isFinite(e)&&i(e)===e}},706:function(e,t,a){var s=a(9);s(s.S,"Number",{isInteger:a(705)})}});