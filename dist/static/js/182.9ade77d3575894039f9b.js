webpackJsonp([182],{1187:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(100),o=i.n(a),n=i(99),s=i.n(n),l=i(37),r=i.n(l),c=(i(101),i(65)),u=(i.n(c),i(22)),h=i(64);e.default={data:function(){return{loading:!1,total:0,size:10,currentPage:1,formInline:{keywords:"",typeCode:"",hospitalCode:"",warehouse:""},whList:[],allWhList:[],tableData:[],hospitalList:[]}},computed:{},mounted:function(){this.GetDropDownPermission()},methods:{hosChange:function(e){var a=this;this.formInline.warehouse="",i.i(u.b)("hospitalCode")||(""!=e?(this.whList=[],this.allWhList.forEach(function(t){e==t.hospitalCode&&a.whList.push(t)})):this.whList=JSON.parse(r()(this.allWhList)))},GetDropDownPermission:function(){var n=this;return s()(o.a.mark(function t(){var e,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.i(h.d)({typeId:1});case 2:return e=t.sent,n.hospitalList=e.data,t.next=6,i.i(h.e)({hospitalCode:"",pageIndex:1,pageSize:100,keywords:"",typeId:1});case 6:a=t.sent,i.i(u.b)("hospitalCode")?a.data.forEach(function(t){t.hospitalCode==i.i(u.b)("hospitalCode")&&(n.whList.push(t),n.allWhList.push(t))}):(n.whList=a.data,n.allWhList=JSON.parse(r()(a.data)));case 8:case"end":return t.stop()}},t,n)}))()},GetStockWarning:function(a){var n=this;return s()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.loading=!0,t.next=4,i.i(h.Y)(a);case 4:e=t.sent,n.tableData=e.data,n.total=e.count,n.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,n,[[0,10]])}))()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.GetStockWarning({warehouseId:this.formInline.warehouse,hospitalCode:this.formInline.hospitalCode,pageIndex:this.currentPage,pageSize:this.size,keywords:this.formInline.keywords.removeSP()})},handleSizeChange:function(t){this.size=t,this.search()},handleCurrentChange:function(t){this.currentPage=t,this.search()},deleteRow:function(){this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){})}},components:{}}},1323:function(t,e,a){(t.exports=a(215)(!1)).push([t.i,"",""])},1748:function(t,e,a){var n=a(1323);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(216)("2f0d7a9e",n,!0)},2220:function(t,e){t.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag selCommon"},[a("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:e.formInline,"label-width":"80px"}},[a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院："}},[a("el-select",{staticStyle:{width:"200px"},on:{change:e.hosChange},model:{value:e.formInline.hospitalCode,callback:function(t){e.$set(e.formInline,"hospitalCode",t)},expression:"formInline.hospitalCode"}},e._l(e.hospitalList,function(t,e){return a("el-option",{key:e,attrs:{label:t.supplierName,value:t.code}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"仓库："}},[a("el-select",{staticStyle:{width:"200px"},model:{value:e.formInline.warehouse,callback:function(t){e.$set(e.formInline,"warehouse",t)},expression:"formInline.warehouse"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.whList,function(t,e){return a("el-option",{key:e,attrs:{label:t.warehouseName,value:t.id}})})],2)],1),e._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"smt min_table",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:e.tableData,border:"","max-height":"560"}},[a("el-table-column",{attrs:{prop:"warehouseName",label:"仓库","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"batchNumber",label:"批号","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"drugName",label:"药品名称","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"规格","min-width":"90"}}),e._v("\n        0"),a("el-table-column",{attrs:{prop:"effectiveDate",label:"有效期","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.effectiveDate?a("span",[e._v(e._s(t.row.effectiveDate.substring(0,10)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"originAddress",label:"预警日期","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.warningDate.substring(0,10)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"originAddress",label:"产地","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jiType",label:"剂型","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dwName",label:"单位","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantityIn",label:"入库总数","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantityOut",label:"出库总数","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"库存数量","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"originAddress",label:"预警数量","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.warningCount))])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},423:function(t,e,a){a(1748);var n=a(98)(a(1187),a(2220),"data-v-347c1974",null);t.exports=n.exports}});