webpackJsonp([127],{1011:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),i=n.n(a),s=n(99),r=n.n(s),o=n(65),l=(n.n(o),n(538)),m=n.n(l),c=(n(22),n(64));t.default={data:function(){return{mes:{},makeLoading:!1,dialogService:!1,loading:!1,date:"",currentPage:1,total:0,pageSize:10,keywords:"",formInline:{hospitalCode:"",date:"",startDate:"",endDate:"",grade:"",keywords:"",IsFinished:0},tableData:[],hospitalList:[]}},computed:{computedDate:function(){return!(0<String(this.date).length)}},mounted:function(){this.date=new Date,this.formInline.date=new Date,this.GetDropDownPermission()},methods:{viewDet:function(e){this.mes={code:e},this.dialogService=!0},dateChange:function(e){this.formInline.date=e},settle:function(s){var n=this,e=this.$createElement;this.$msgbox({title:"提示",message:e("p",null,[e("span",null,"是否进行结算? ")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(e,t,a){"confirm"===e&&(t.confirmButtonLoading=!0,t.confirmButtonText="执行中...",n.SettlementService({id:s.id}),t.confirmButtonLoading=!1),a()}}).then(function(e){})},SettlementService:function(a){var s=this;return r()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(c._482)(a);case 2:(t=e.sent).status?(s.$message({type:"success",message:"结算成功"}),s.search()):s.$message({type:"warning",message:"结算失败!"+t.errorMessage});case 4:case"end":return e.stop()}},e,s)}))()},getSummaries:function(e){var t=e.columns,s=e.data,n=[];return t.forEach(function(t,e){if(0!==e){var a=s.map(function(e){return Number(e[t.property])});a.every(function(e){return isNaN(e)})?n[e]="":(n[e]=a.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e.add(t)},0),n[e]=n[e].toQFW())}else n[e]="合计"}),n[1]="",n},GetDropDownPermission:function(){var a=this;return r()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(c.d)({typeId:1});case 2:t=e.sent,a.hospitalList=t.data,a.formInline.hospitalCode=t.data[0].code;case 5:case"end":return e.stop()}},e,a)}))()},onSubmit:function(){this.currentPage=1,this.search()},GetServiceLevelConsume:function(a){var s=this;return r()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(c._483)(a);case 2:t=e.sent,s.loading=!1,t.data.forEach(function(e){e.commissionAmount=e.commissionAmount1+e.commissionAmount2+e.commissionAmount3+e.commissionAmount4+e.commissionAmount5,e.realAmount=e.realAmount1+e.realAmount2+e.realAmount3+e.realAmount4+e.realAmount5}),s.tableData=t.data;case 6:case"end":return e.stop()}},e,s)}))()},search:function(){this.saveHos=this.formInline.hospitalCode,this.saveEnd=0<String(this.date).length?this.date.formatDate("yyyy-MM-dd"):"",this.loading=!0,this.GetServiceLevelConsume({CommissionDate:0<String(this.date).length?this.date.formatDate("yyyy-MM-dd"):"",HospitalCode:this.formInline.hospitalCode,Keywords:this.formInline.keywords,IsFinished:0})},generate:function(){var e=this;""==this.hospitalCode?this.$message({message:"请先选择医院！",type:"warning"}):this.$confirm("是否生成截止时间到"+this.formInline.date+"的数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.makeLoading=!0,e.GeneratorSerCommission()})},GeneratorSerCommission:function(){var a=this;return r()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(c._484)({CommissionDate:a.formInline.date,hospitalCode:a.formInline.hospitalCode});case 2:t=e.sent,a.makeLoading=!1,t.status?(a.$message({type:"success",message:"生成成功"}),a.search()):a.$message({type:"warning",message:"生成失败!"+t.errorMessage});case 5:case"end":return e.stop()}},e,a)}))()}},components:{det:m.a}}},1393:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1818:function(e,t,a){var s=a(1393);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(216)("47292201",s,!0)},2291:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"tag selCommon"},[s("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,"label-width":"80px"}},[s("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"日期："}},[s("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:a.dateChange},model:{value:a.date,callback:function(e){a.date=e},expression:"date"}})],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院："}},[s("el-select",{staticStyle:{width:"200px"},model:{value:a.formInline.hospitalCode,callback:function(e){a.$set(a.formInline,"hospitalCode",e)},expression:"formInline.hospitalCode"}},a._l(a.hospitalList,function(e,t){return s("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"关键字："}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"服务商"},model:{value:a.formInline.keywords,callback:function(e){a.$set(a.formInline,"keywords",e)},expression:"formInline.keywords"}})],1),a._v(" "),s("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[s("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),s("el-button",{attrs:{type:"danger",loading:a.makeLoading,disabled:a.computedDate},on:{click:a.generate}},[a._v("生成数据")])],1)],1),a._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"min_table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:a.tableData,border:"","max-height":"560","show-summary":"","summary-method":a.getSummaries}},[s("el-table-column",{attrs:{prop:"serviceInfoName",label:"姓名","min-width":"80"},scopedSlots:a._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(e){return a.viewDet(t.row.serviceCode)}}},[a._v("\n                        "+a._s(t.row.serviceInfoName)+"\n                        ")])]}}])}),a._v(" "),s("el-table-column",{attrs:{prop:"serviceGrade",label:"等级","min-width":"80"},scopedSlots:a._u([{key:"default",fn:function(e){return[1==e.row.serviceGrade?s("span",[a._v("总监")]):a._e(),a._v(" "),2==e.row.serviceGrade?s("span",[a._v("经理")]):a._e(),a._v(" "),3==e.row.serviceGrade?s("span",[a._v("科长")]):a._e(),a._v(" "),4==e.row.serviceGrade?s("span",[a._v("组长")]):a._e(),a._v(" "),5==e.row.serviceGrade?s("span",[a._v("美导")]):a._e()]}}])}),a._v(" "),s("el-table-column",{attrs:{prop:"commissionAmount1",label:"5%","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"commissionAmount2",label:"2%","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"commissionAmount3",label:"1.5%","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"commissionAmount4",label:"1%","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"commissionAmount5",label:"0.5%","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"pointCommissionAmount",label:"基金业绩","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"commissionAmount1",label:"本人业绩","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"realPointAmount",label:"基金提成","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"totalRealAmount",label:"提成合计","min-width":"80",align:"right"}}),a._v(" "),s("el-table-column",{attrs:{prop:"customerName",label:"操作","min-width":"80",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",size:"small",disabled:1==t.row.isFinished},on:{click:function(e){return a.settle(t.row)}}},[a._v("结算")])]}}])})],1),a._v(" "),s("el-dialog",{attrs:{title:"服务商详情",visible:a.dialogService,size:"",top:"20%"},on:{"update:visible":function(e){a.dialogService=e}}},[a.dialogService?s("det",{staticStyle:{width:"800px"},attrs:{mes:a.mes}}):a._e()],1)],1)},staticRenderFns:[]}},304:function(e,t,a){a(1818);var s=a(98)(a(1011),a(2291),"data-v-5845d87e",null);e.exports=s.exports},530:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(100),n=s.n(a),i=s(99),r=s.n(i),o=(s(22),s(64));t.default={props:{mes:{type:Object,default:{}},id:""},data:function(){return{ruleForm:{},payData:[],message:{}}},mounted:function(){this.getPayData()},methods:{getPayData:function(){var a=this;return r()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.i(o._116)({code:a.mes.code});case 2:t=e.sent,a.payData=t.data.branchOrderPayList,a.message=t.data.serviceInfo;case 5:case"end":return e.stop()}},e,a)}))()}},components:{}}},533:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".form_item_mt0[data-v-9d7deb36]{width:46%}.form_item_mt1[data-v-9d7deb36]{width:100%}",""])},536:function(e,t,a){var s=a(533);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(216)("134cbd0f",s,!0)},538:function(e,t,a){a(536);var s=a(98)(a(530),a(539),"data-v-9d7deb36",null);e.exports=s.exports},539:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"selCommon editRegister"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,"label-width":"85px"}},[a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"服务商编号："}},[a("span",[t._v(t._s(t.message.code))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"姓名："}},[a("span",[t._v(t._s(t.message.serviceInfoName))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"联系电话：",required:""}},[a("span",[t._v(t._s(t.message.phoneNumber))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"邮箱："}},[a("span",[t._v(t._s(t.message.email))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"住址："}},[a("span",[t._v(t._s(t.message.province)+t._s(t.message.city)+t._s(t.message.area)+t._s(t.message.address))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"身份证号："}},[a("span",[t._v(t._s(t.message.IdCard))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"生日："}},[a("span",[t._v(t._s(t.message.birthday))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"性别："}},[0==t.message.sex?a("span",[t._v("女")]):t._e(),t._v(" "),1==t.message.sex?a("span",[t._v("男")]):t._e()]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"推荐人："}},[a("span",[t._v(t._s(t.message.referrerName))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"注册费用："}},[a("span",[t._v(t._s(t.message.payAmount))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"银行卡号："}},[a("span",[t._v(t._s(t.message.bankCardId))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"开户行："}},[a("span",[t._v(t._s(t.message.openBankCode))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"开户行支行："}},[a("span",[t._v(t._s(t.message.openBankName))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"开户人姓名："}},[a("span",[t._v(t._s(t.message.bankCardHolder))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt1",attrs:{label:"备注："}},[a("span",[t._v(t._s(t.message.memo))])]),t._v(" "),a("el-form-item",{staticClass:"form_item_mt1",attrs:{label:"支付信息："}},[a("el-table",{staticStyle:{width:"780px","margin-bottom":"10px"},attrs:{data:t.payData,border:""}},[a("el-table-column",{attrs:{prop:"payTypeName",label:"支付方式","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"receiveAccount",label:"收款账户","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"realAmount",label:"支付金额","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"procFee",label:"手续费","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"payDate",label:"支付日期","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.payDate?a("span",[t._v(t._s(e.row.payDate.substring(0,19)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"120","show-overflow-tooltip":""}})],1)],1)],1)],1)},staticRenderFns:[]}}});