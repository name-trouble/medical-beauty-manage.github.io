webpackJsonp([184],{1160:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(100),o=l.n(a),n=l(99),i=l.n(n),r=(l(22),l(64));t.default={data:function(){return{yearList:[],monthList:["01","02","03","04","05","06","07","08","09",10,11,12],editMes:[],isDrug:!1,saveLoading:!1,loading:!1,title:"",tag:!1,total:0,size:10,currentPage:1,formInline:{year:(new Date).getFullYear(),month:"",keywords:"",typeCode:"",hospitalCode:"",wareHouse:""},tableData:[],hospitalList:[],supplierList:[],whList:[],allData:[],sum:{}}},computed:{},mounted:function(){var e=(new Date).getFullYear(),t=(new Date).getMonth()+1;this.formInline.year=e,this.formInline.month=10<=t?t:"0"+t;for(var a=0;a<4;a++)this.yearList.push(e-a);this.GetDropDownPermission()},methods:{getSummaries:function(){return["总合计","",Math.round(this.sum.orderCount),Math.round(this.sum.drugOutAmount),Math.round(this.sum.wholesaleAmount),Math.round(this.sum.saleAmount)]},GetDropDownPermission:function(){var n=this;return i()(o.a.mark(function e(){var t,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.i(r.d)({typeId:1});case 2:return t=e.sent,n.hospitalList=t.data,e.next=6,l.i(r.e)({hospitalCode:"",pageIndex:1,pageSize:100,keywords:""});case 6:a=e.sent,n.whList=a.data;case 8:case"end":return e.stop()}},e,n)}))()},GetStockDrug:function(a){var n=this;return i()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.loading=!0,e.next=4,l.i(r.M)(a);case 4:(t=e.sent).status?(n.allData=n.GetTotal(t.data),n.getPage(t.data),n.total=t.count):n.$message.error("查询失败"+t.errorMessage),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,n,[[0,8]])}))()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.GetStockDrug({pageIndex:this.currentPage,pageSize:this.size,keywords:this.formInline.keywords.removeSP(),warehouseId:this.formInline.wareHouse,hospitalCode:this.formInline.hospitalCode})},handleSizeChange:function(e){this.size=e,this.getPage()},handleCurrentChange:function(e){this.currentPage=e,this.getPage()},GetTotal:function(e){var t=this;return e.forEach(function(e){t.sum.orderCount=t.sum.orderCount.add(e.orderCount),t.sum.drugOutAmount=t.sum.drugOutAmount.add(e.drugOutAmount),t.sum.wholesaleAmount=t.sum.wholesaleAmount.add(e.wholesaleAmount),t.sum.saleAmount=t.sum.saleAmount.add(e.saleAmount)}),e},getPage:function(){var e=this;this.loading=!0,this.tableData=this.allData.slice((this.currentPage-1)*this.size,this.currentPage*this.size),setTimeout(function(){e.loading=!1},500)}},components:{}}},1512:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1937:function(e,t,a){var n=a(1512);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(216)("151eb9b6",n,!0)},2412:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tag selCommon"},[a("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:t.formInline,"label-width":"90px"}},[a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院："}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.formInline.hospitalCode,callback:function(e){t.$set(t.formInline,"hospitalCode",e)},expression:"formInline.hospitalCode"}},t._l(t.hospitalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"仓库："}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.formInline.wareHouse,callback:function(e){t.$set(t.formInline,"wareHouse",e)},expression:"formInline.wareHouse"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.whList,function(e,t){return a("el-option",{key:t,attrs:{label:e.warehouseName,value:e.warehouseCode}})})],2)],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"年月："}},[a("el-select",{staticStyle:{width:"95px"},model:{value:t.formInline.year,callback:function(e){t.$set(t.formInline,"year",e)},expression:"formInline.year"}},t._l(t.yearList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"95px"},model:{value:t.formInline.month,callback:function(e){t.$set(t.formInline,"month",e)},expression:"formInline.month"}},t._l(t.monthList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"账面数量："}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.formInline.hospitalCode,callback:function(e){t.$set(t.formInline,"hospitalCode",e)},expression:"formInline.hospitalCode"}},[a("el-option",{attrs:{label:"显示全部为零",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"不显示全为零",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"按批号显示："}},[a("el-select",{staticStyle:{width:"200px"},model:{value:t.formInline.hospitalCode,callback:function(e){t.$set(t.formInline,"hospitalCode",e)},expression:"formInline.hospitalCode"}},[a("el-option",{attrs:{label:"是",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"否",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"smt min_table",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:t.tableData,border:"","show-summary":"","summary-method":t.getSummaries,"max-height":"560"}},[a("el-table-column",{attrs:{prop:"warehouseName",label:"仓库","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"drugId",label:"药品编号","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"drugName",label:"药品名称","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"规格","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"batchNumber",label:"批号","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jiType",label:"剂型","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dwName",label:"单位","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"originAddress",label:"产地","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"本月期初数量","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"期初金价金额","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"本月入库","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"本月进价","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"本月出库","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"本月出库进价金额","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"本月结存数量","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remainingCount",label:"结存进价","min-width":"90"}})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},405:function(e,t,a){a(1937);var n=a(98)(a(1160),a(2412),"data-v-d6b73f5a",null);e.exports=n.exports}});