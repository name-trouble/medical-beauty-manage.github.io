webpackJsonp([188],{1133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(37),s=n.n(a),r=n(100),i=n.n(r),o=n(99),l=n.n(o),c=(n(101),n(65)),u=(n.n(c),n(22)),m=n(64);t.default={data:function(){return{title:"",tag:!1,total:0,size:10,currentPage:1,hospitalList:[],formInline:{keywords:"",typeCode:""},form:{hospital:"",rate1:"",rate2:""},tableData:[]}},computed:{tHeader:function(){return["封面","主题","发布人","标签","视频大小","发布时间","浏览人次","平均浏览时长","分享","销售额","商品提成"]},filterVal:function(){return["picture","title","userName","tab","videoSize","createDate","views","grade","grade","ReferrerName"]},tableData1:function(){return this.tableData},name:function(){return"视频管理"}},mounted:function(){this.onSubmit()},methods:{AddHospitalSet:function(t){var a=this;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.i(m._310)(t);case 3:e.sent.status?(a.$message({message:"添加成功",type:"success"}),a.onSubmit(),a.tag=!1):a.$message.error("添加失败"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a.$message.error("添加失败");case 11:case"end":return e.stop()}},e,a,[[0,7]])}))()},DeleteHospitalSet:function(t){var a=this;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.i(m._311)(t);case 3:e.sent.status?(a.$message({message:"删除成功",type:"success"}),a.onSubmit()):a.$message.error("删除失败"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a.$message.error("删除失败");case 11:case"end":return e.stop()}},e,a,[[0,7]])}))()},GetHospitalSet:function(a){var r=this;return l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.i(m._312)(a);case 3:return t=e.sent,e.next=6,n.i(m.a)({SupTypeCode:"001"});case 6:r.hospitalList=e.sent,r.tableData=t.data,r.total=t.count,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,r,[[0,11]])}))()},UpdateHospitalSet:function(t){var a=this;return l()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.i(m._313)(t);case 3:e.sent.status?(a.$message({message:"编辑成功",type:"success"}),a.onSubmit(),a.tag=!1):a.$message.error("编辑失败"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a.$message.error("编辑失败");case 11:case"end":return e.stop()}},e,a,[[0,7]])}))()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.GetHospitalSet({pageIndex:this.currentPage,pageSize:this.size,keywords:this.formInline.keywords.removeSP()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.size=e,this.onSubmit()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.onSubmit()},sure:function(){"编辑"==this.title?this.UpdateHospitalSet({id:this.form.id,hospitalExecutive:this.form.hospital.split("|")[1],executiveName:this.form.hospital.split("|")[0],rate:Number(this.form.rate1).div(100),recommendRate:Number(this.form.rate2).div(100),modifiedUserId:n.i(u.b)("userId"),modifiedBy:n.i(u.b)("userName")}):this.AddHospitalSet({hospitalExecutive:this.form.hospital.split("|")[1],executiveName:this.form.hospital.split("|")[0],rate:Number(this.form.rate1).div(100),recommendRate:Number(this.form.rate2).div(100),createUserId:n.i(u.b)("userId"),createBy:n.i(u.b)("userName")})},cancel:function(){this.tag=!1},addTag:function(e,t,a){if(this.reset(),this.tag=!0,this.title=e,a){var r=JSON.parse(s()(a[t]));this.form={id:a[t].id,hospital:r.executiveName+"|"+r.hospitalExecutive,rate1:r.rate.mul(100),rate2:r.recommendRate.mul(100)}}},deleteRow:function(e,t){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.DeleteHospitalSet({id:t[e].id})}).catch(function(){})},reset:function(){for(var e in this.form)this.form[e]=""}},components:{}}},1530:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1955:function(e,t,a){var r=a(1530);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("2af8f6f8",r,!0)},2430:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"prop selCommon"},[r("el-form",{staticClass:"form_search",attrs:{inline:!0,model:a.formInline,"label-width":"80px"}},[r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"关键字："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"执行医院"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.keywords,callback:function(e){a.$set(a.formInline,"keywords",e)},expression:"formInline.keywords"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[r("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),r("el-button",{staticClass:"searchBtn",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return a.addTag("添加")}}},[a._v("添加新比例")])],1)],1),a._v(" "),r("el-table",{staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:"",height:"460"}},[r("el-table-column",{attrs:{prop:"hospitalExecutive",label:"编号","min-width":"150"}}),a._v(" "),r("el-table-column",{attrs:{prop:"executiveName",label:"执行医院","min-width":"120"}}),a._v(" "),r("el-table-column",{attrs:{prop:"rate",label:"执行方比例","min-width":"150"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                "+a._s(e.row.rate.mul(100))+"%\n            ")]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"recommendRate",label:"推荐方比例","min-width":"150"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                "+a._s(e.row.recommendRate.mul(100))+"%\n            ")]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"status",label:"操作","min-width":"150"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.addTag("编辑",t.$index,a.tableData)}}},[a._v("编辑")]),a._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return a.deleteRow(t.$index,a.tableData)}}},[a._v("删除")])]}}])})],1),a._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),r("el-dialog",{attrs:{title:a.title,visible:a.tag,size:""},on:{"update:visible":function(e){a.tag=e}}},[r("el-form",{staticStyle:{width:"420px"},attrs:{model:a.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"执行医院："}},[r("el-select",{staticStyle:{width:"320px"},model:{value:a.form.hospital,callback:function(e){a.$set(a.form,"hospital",e)},expression:"form.hospital"}},a._l(a.hospitalList,function(e,t){return r("el-option",{key:t,attrs:{label:e.SupplierName,value:e.SupplierName+"|"+e.Code}})}),1)],1),a._v(" "),r("el-form-item",{attrs:{label:"执行方比例：",prop:"rate1",rules:[{type:"number",message:"必须为数字值"}],required:""}},[r("el-input",{staticStyle:{width:"320px"},attrs:{type:"rate1"},model:{value:a.form.rate1,callback:function(e){a.$set(a.form,"rate1",a._n(e))},expression:"form.rate1"}},[r("template",{slot:"append"},[a._v("%")])],2)],1),a._v(" "),r("el-form-item",{attrs:{label:"推荐方比例：",prop:"rate2",rules:[{type:"number",message:"必须为数字值"}],required:""}},[r("el-input",{staticStyle:{width:"320px"},attrs:{type:"rate1"},model:{value:a.form.rate2,callback:function(e){a.$set(a.form,"rate2",a._n(e))},expression:"form.rate2"}},[r("template",{slot:"append"},[a._v("%")])],2)],1)],1),a._v(" "),r("div",{staticClass:"footer_ope"},[r("el-button",{attrs:{type:"primary"},on:{click:a.sure}},[a._v("确定")]),a._v(" "),r("el-button",{on:{click:a.cancel}},[a._v("取消")])],1)],1)],1)},staticRenderFns:[]}},389:function(e,t,a){a(1955);var r=a(98)(a(1133),a(2430),"data-v-e86c17ec",null);e.exports=r.exports}});