webpackJsonp([179],{1197:function(e,t,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(100),d=m.n(a),n=m(99),o=m.n(n),r=m(65),f=(m.n(r),m(22),m(64));t.default={data:function(){return{addDialog:!1,ticket:"",loading:!1,total:0,size:10,currentPage:1,formInline:{keywords:""},tableData:[],allData:[],form:{preCode:"",num:"",startNum:0,endNum:0},saveLoading:!1}},computed:{},mounted:function(){},methods:{addSure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.AddBlackTicketInfo()})},AddBlackTicketInfo:function(){var u=this;return o()(d.a.mark(function e(){var t,a,n,r,o,i,s,l,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],a=Number(u.form.num),n=u.form.startNum,r=u.form.endNum,o=n;o<=r;o++){for(i=u.form.preCode,s=a-String(o).length,l=0;l<s;l++)i+="0";t.push(i+o)}return u.saveLoading=!0,e.next=5,m.i(f.m)({jsonStr:t.join(",")});case 5:c=e.sent,u.showMessage(c,"操作"),u.saveLoading=!1;case 8:case"end":return e.stop()}},e,u)}))()},withdraw:function(e){var t=this;this.$confirm("确定撤回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.DeleteBlackTicketInfo(e)})},DeleteBlackTicketInfo:function(a){var n=this;return o()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.i(f.n)({id:a});case 2:t=e.sent,n.showMessage(t,"撤回");case 4:case"end":return e.stop()}},e,n)}))()},showMessage:function(e,t){e.status?(this.$message({message:t+"成功",type:"success"}),this.addDialog=!1,this.search()):this.$message.error(t+"失败!"+e.errorMessage)},add:function(){this.addDialog=!0},GetBlackTicketInfo:function(a,n){var r=this;return o()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.i(f.o)(a);case 3:t=e.sent,n?(r.allData=t.data,r.$refs.exportTable.handleDownload()):(r.tableData=t.data,r.total=t.count),r.loading=!1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,r,[[0,8]])}))()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.loading=!0,this.GetBlackTicketInfo({pageIndex:this.currentPage,pageSize:this.size,code:this.formInline.keywords.removeSP()})},handleSizeChange:function(e){this.size=e,this.search()},handleCurrentChange:function(e){this.currentPage=e,this.search()}},components:{}}},1495:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1920:function(e,t,a){var n=a(1495);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(216)("60c221e8",n,!0)},2395:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"tag selCommon"},[n("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:a.formInline,"label-width":"80px"}},[n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"关键字："}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"前缀/券号"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.keywords,callback:function(e){a.$set(a.formInline,"keywords",e)},expression:"formInline.keywords"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:""}},[n("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),n("el-button",{staticClass:"searchBtn",on:{click:a.add}},[a._v("添加作废单")])],1)],1),a._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"smt min_table",staticStyle:{width:"600px","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:"","max-height":"560"}},[n("el-table-column",{attrs:{prop:"ticketCode",label:"卡券编号","min-width":"90",align:"center"}}),a._v(" "),n("el-table-column",{attrs:{prop:"customerName",label:"操作","min-width":"90",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.withdraw(t.row.id)}}},[a._v("撤回")])]}}])})],1),a._v(" "),n("div",{},[n("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),n("el-dialog",{attrs:{title:"添加",visible:a.addDialog,modal:!0,top:"12%",size:""},on:{"update:visible":function(e){a.addDialog=e}}},[n("el-form",{ref:"form",staticClass:"demo-form-inline",staticStyle:{width:"400px"},attrs:{model:a.form,"label-width":"90px"}},[n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"前缀：",prop:"preCode",rules:[{required:!0,message:"不能为空"}]}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"前缀"},model:{value:a.form.preCode,callback:function(e){a.$set(a.form,"preCode",e)},expression:"form.preCode"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"流水位数：",prop:"num",rules:[{type:"number",required:!0,message:"不能为空"}]}},[n("el-input",{staticStyle:{width:"300px"},attrs:{controls:!1,placeholder:"流水位数"},model:{value:a.form.num,callback:function(e){a.$set(a.form,"num",a._n(e))},expression:"form.num"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"区间："}},[n("el-input-number",{staticStyle:{width:"140px",float:"left"},attrs:{controls:!1,placeholder:"初始值"},model:{value:a.form.startNum,callback:function(e){a.$set(a.form,"startNum",e)},expression:"form.startNum"}}),a._v(" "),n("span",{staticStyle:{float:"left",margin:"0 10px"}},[a._v("-")]),a._v(" "),n("el-input-number",{staticStyle:{width:"140px",float:"left"},attrs:{controls:!1,placeholder:"结束值"},model:{value:a.form.endNum,callback:function(e){a.$set(a.form,"endNum",e)},expression:"form.endNum"}})],1),a._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"10px","text-align":"center"},attrs:{label:"","label-width":"0px"}},[n("el-button",{attrs:{type:"primary",loading:a.saveLoading},on:{click:function(e){return a.addSure("form")}}},[a._v("确定")]),a._v(" "),n("el-button",{on:{click:function(e){a.addDialog=!1}}},[a._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]}},428:function(e,t,a){a(1920);var n=a(98)(a(1197),a(2395),"data-v-ba81ed22",null);e.exports=n.exports}});