webpackJsonp([70],{1067:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(66),c=i.n(a),r=i(102),m=i.n(r),l=i(100),p=i.n(l),n=i(99),o=i.n(n),s=i(65),f=(i.n(s),i(436)),d=i.n(f),u=i(517),h=i.n(u),_=i(64);t.default={data:function(){return{ExportLoading:!1,topBranchList:[],saveLoading:!1,hospitalList:"",opeMes:{},loading:!1,referList:[],baseData:"",bankList:[],eduList:[],industryList:[],origionList:[],gradeList:[],currentPage:1,detailCode:"",dialogFormVisible:!1,dialogCheck:!1,form:{CommissionDate:(new Date).formatDate("yyyy-MM-dd")},yearList:[],monthList:[],total:0,size:10,date:"",formInline:{date1:"",date2:"",grade:"",referrerName:"",branchName:"",region:"",ApproveState:"",hospital:"",IsPayOff:"",cardNO:"",isEnable:"",topBranch:""},tableData:[],openCode:"",allData:[]}},computed:{tHeader:function(){return["编号","消费商","注册日期","推荐人","医院","联系电话","消费商卡号","来源渠道","代理等级","缴纳会费","已缴会费","是否结清","审核状态","状态"]},filterVal:function(){return["Code","BranchName","RegistDate","ReferrerName","HospitalName","PhoneNumber","CardNO","SourcWayeCode","BranchGradeName","PayAmount","RealPayAmount","IsPayOff","ApproveState","IsEnable"]},tableData1:function(){var a=this;return this.allData.forEach(function(e,t){e.RegistDate?e.RegistDate=e.RegistDate.substring(0,10):e.RegistDate="",e.IsPayOff=e.IsPayOff?"已结清":"未结清",e.IsEnable=a.getStatus(e.IsEnable),e.ApproveState=a.getApproveState(e.ApproveState)}),this.allData},name:function(){return"代理"}},mounted:function(){this.getBaseDate(),this.getBranchGradeAll()},methods:{getApproveState:function(e){switch(e){case 0:return"未审核";case 1:case 2:return"已审核";case null:return"未审核"}},getStatus:function(e){switch(e){case 0:return"未启用";case 1:return"已启用";case 2:return"已退会"}},exportTbale:function(){this.ExportLoading=!0,this.getBranchByConditions({referrerName:this.formInline.referrerName.removeSP(),branchName:this.formInline.branchName.removeSP(),branchGradeCode:this.formInline.grade,sourcWayeCode:this.formInline.region,startDate:this.formInline.date1,endDate:this.formInline.date2,pageIndex:this.currentPage,pageSize:this.total,ApproveState:this.formInline.ApproveState,isEnable:this.formInline.isEnable,hospitalCode:this.formInline.hospital,IsPayOff:this.formInline.IsPayOff,cardNO:this.formInline.cardNO,IsApprove:1,TopBranch:this.formInline.topBranch},"export")},ApproveBranch:function(a){var r=this;return o()(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.saveLoading=!0,e.next=3,i.i(_._394)(a);case 3:(t=e.sent).status?(r.$message({message:"审核成功",type:"success"}),r.getTableDate(),r.cancel()):r.$message.error("审核失败"+t.errorMessage),r.saveLoading=!1;case 6:case"end":return e.stop()}},e,r)}))()},getBaseDate:function(){this.yearList=[(new Date).getFullYear()+1,(new Date).getFullYear(),(new Date).getFullYear()-1,(new Date).getFullYear()-2];for(var e=1;e<13;e++)e<10?this.monthList.push("0"+e):this.monthList.push(e);var t=(new Date).getMonth();this.form.year=(new Date).getFullYear(),9<t?this.form.month=t:0==t?(this.form.year=(new Date).getFullYear()-1,this.form.month=12):this.form.month="0"+t},PreRecomConsume:function(t){var a=this;return o()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.i(_._395)(t);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},e,a,[[0,6]])}))()},getBranchGradeAll:function(){var s=this;return o()(p.a.mark(function e(){var t,a,r,l,n,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.all([i.i(_.d)({typeId:"2"}),i.i(_.d)({typeId:1}),i.i(_._319)(),i.i(_._62)()]);case 3:t=e.sent,a=m()(t,4),r=a[0],l=a[1],n=a[2],o=a[3],s.topBranchList=r.data,s.hospitalList=l.data,s.formInline.hospital=s.hospitalList[0].code,s.gradeList=n,s.baseMesSplit(o),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}},e,s,[[0,16]])}))()},GetBranchByCode:function(t){var a=this;return o()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.i(_._51)({branchcode:t});case 2:if(e.sent.Branch.IsPayOff)return e.abrupt("return",!0);e.next=7;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,a)}))()},getBranchByConditions:function(a,r){var l=this;return o()(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.i(_.y)(a);case 3:(t=e.sent).forEach(function(e){0==e.ComplateRange||e.ComplateRange?e.ComplateRange=e.ComplateRange.mul(100):e.ComplateRange=0}),l.loading=!1,r?(l.ExportLoading=!1,l.allData=t,l.$refs.exportTable.handleDownload()):(l.tableData=t,l.tableData.push(),0!=t.length&&(l.total=t[0].RecordCount)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,l,[[0,9]])}))()},dateSelect:function(e){0!=e.length?(e=e.formatDates(),this.formInline.date1=e.substring(0,10),this.formInline.date2=e.substring(13)):(this.formInline.date1="",this.formInline.date2="")},onSubmit:function(){this.currentPage=1,this.getTableDate(1)},handleSizeChange:function(e){this.size=e,this.getTableDate()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.getTableDate()},DetailMes:function(e,t){this.detailCode=t[e].Code,this.dialogFormVisible=!0},open:function(e,t){this.GetBranchByCode(t[e].ReferrerCode)?(this.getBaseDate(),this.dialogCheck=!0,this.opeMes=t[e],this.PreRecomConsume({branchcode:t[e].Code}),this.openCode=t[e].Code):this.$message.error("推荐人未付清,不能进行审核")},baseMesSplit:function(e){var t=this;e.forEach(function(e){"0001"==e.BusinessCode&&t.eduList.push(e),"0002"==e.BusinessCode&&t.industryList.push(e),"0003"==e.BusinessCode&&t.origionList.push(e),"0004"==e.BusinessCode&&t.bankList.push(e)})},getTableDate:function(){this.loading=!0,this.getBranchByConditions({referrerName:this.formInline.referrerName.removeSP(),branchName:this.formInline.branchName.removeSP(),branchGradeCode:this.formInline.grade,sourcWayeCode:this.formInline.region,startDate:this.formInline.date1,endDate:this.formInline.date2,pageIndex:this.currentPage,pageSize:this.size,ApproveState:this.formInline.ApproveState,isEnable:this.formInline.isEnable,hospitalCode:this.formInline.hospital,IsPayOff:this.formInline.IsPayOff,cardNO:this.formInline.cardNO,IsApprove:1,TopBranch:this.formInline.topBranch})},checkSure:function(){this.ApproveBranch({branchcode:this.opeMes.Code,CommissionDate:this.form.CommissionDate})},cancel:function(){this.dialogCheck=!1}},components:{Export:d.a,agentDetail:h.a}}},1329:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1754:function(e,t,a){var r=a(1329);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("500c7658",r,!0)},2226:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"selCommon AgentManage"},[r("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:a.formInline,"label-width":"90px"}},[r("el-form-item",{staticStyle:{"margin-bottom":"10px","font-size":"12px !important"},attrs:{label:"注册日期："}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:a.dateSelect},model:{value:a.date,callback:function(e){a.date=e},expression:"date"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"推荐人："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.referrerName,callback:function(e){a.$set(a.formInline,"referrerName",e)},expression:"formInline.referrerName"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"代理人："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.branchName,callback:function(e){a.$set(a.formInline,"branchName",e)},expression:"formInline.branchName"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"代理等级："}},[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:a.onSubmit},model:{value:a.formInline.grade,callback:function(e){a.$set(a.formInline,"grade",e)},expression:"formInline.grade"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),a._l(a.gradeList,function(e){return r("el-option",{key:e.Code,attrs:{label:e.BranchGradeName,value:e.Code}})})],2)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"来源渠道："}},[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:a.onSubmit},model:{value:a.formInline.region,callback:function(e){a.$set(a.formInline,"region",e)},expression:"formInline.region"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),a._l(a.origionList,function(e){return r("el-option",{key:e.DataName,attrs:{label:e.DataName,value:e.DataName}})})],2)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"审核状态："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.ApproveState,callback:function(e){a.$set(a.formInline,"ApproveState",e)},expression:"formInline.ApproveState"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"未审核",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"已审核",value:"1"}})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"付款状态："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.IsPayOff,callback:function(e){a.$set(a.formInline,"IsPayOff",e)},expression:"formInline.IsPayOff"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"未付清",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"已付清",value:"1"}})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"启用状态："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.isEnable,callback:function(e){a.$set(a.formInline,"isEnable",e)},expression:"formInline.isEnable"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"未启用",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"已启用",value:"1"}})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.hospital,callback:function(e){a.$set(a.formInline,"hospital",e)},expression:"formInline.hospital"}},a._l(a.hospitalList,function(e,t){return r("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"销售公司："}},[r("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:a.formInline.topBranch,callback:function(e){a.$set(a.formInline,"topBranch",e)},expression:"formInline.topBranch"}},a._l(a.topBranchList,function(e,t){return r("el-option",{key:t,attrs:{label:e.branchName,value:e.code}})}),1)],1),r("br"),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[r("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),r("Export",{ref:"exportTable",staticStyle:{display:"none"},attrs:{tHeader:a.tHeader,filterVal:a.filterVal,tableData1:a.tableData1,name:a.name}})],1)],1),a._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"min_table smt",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:""}},[r("el-table-column",{attrs:{prop:"Code",label:"代理编号","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("div",{on:{click:function(e){return a.DetailMes(t.$index,a.tableData)}}},[r("span",{staticClass:"table_btn"},[a._v(a._s(t.row.BranchName))]),r("br"),a._v(" "),r("span",{staticClass:"table_btn"},[a._v("["+a._s(t.row.Code)+"]")])])]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"RegistDate",label:"注册日期",width:"110"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.RegistDate?r("span",[a._v("\n                     "+a._s(e.row.RegistDate.substring(0,10))+"\n                ")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"ReferrerName",label:"推荐人","min-width":"130"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.ReferrerName?r("span",[a._v(a._s(e.row.ReferrerName))]):a._e(),r("br"),a._v(" "),e.row.ReferrerCode?r("span",[a._v("["+a._s(e.row.ReferrerCode)+"]")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"BranchName",label:"策略-进度","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("div",{staticStyle:{float:"left"}},[2==e.row.IdentityType?r("span",[a._v("老策略")]):a._e(),a._v(" "),1==e.row.IdentityType?r("span",[a._v("新策略")]):a._e()]),a._v("\n                 \n                "),1==e.row.IdentityType&&e.row.ComplateRange<100?r("el-progress",{attrs:{type:"circle",percentage:e.row.ComplateRange,"stroke-width":1,width:40}}):a._e(),a._v(" "),1==e.row.IdentityType&&100==e.row.ComplateRange?r("el-progress",{attrs:{type:"circle",percentage:100,"stroke-width":1,width:40,status:"success"}}):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"HospitalName",label:"医院","min-width":"130"}}),a._v(" "),r("el-table-column",{attrs:{prop:"BranchGradeName",label:"代理等级","min-width":"130"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Price",label:"缴纳会费","min-width":"90",align:"right"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.Price||0==e.row.Price?r("span",[a._v("￥"+a._s(e.row.Price.toQFW()))]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"RealPayAmount",label:"已缴纳会费","min-width":"100",align:"right"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.RealPayAmount||0==e.row.RealPayAmount?r("span",[a._v("￥"+a._s(e.row.RealPayAmount.toQFW()))]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"Pledge",label:"缴纳押金","min-width":"90"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.Pledge||0==e.row.Pledge?r("span",[a._v("￥"+a._s(e.row.Pledge.toQFW()))]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"IsPayOff",label:"是否结清",width:"90"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.IsPayOff?r("el-tag",{attrs:{type:"warning"}},[a._v("未结清")]):a._e(),a._v(" "),1==e.row.IsPayOff?r("el-tag",{attrs:{type:"success"}},[a._v("已结清")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"IsEnable",label:"审核状态",width:"80"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.ApproveState?r("el-tag",{attrs:{type:"warning"}},[a._v("未审核")]):a._e(),a._v(" "),null==e.row.ApproveState?r("el-tag",{attrs:{type:"warning"}},[a._v("未审核")]):a._e(),a._v(" "),1==e.row.ApproveState?r("el-tag",{attrs:{type:"success"}},[a._v("已审核")]):a._e(),a._v(" "),2==e.row.ApproveState?r("el-tag",{attrs:{type:"success"}},[a._v("已审核")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"grade",label:"操作",width:"145"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"small",disabled:0==t.row.IsEnable||0==t.row.IsPayOff||1==t.row.ApproveState},on:{click:function(e){return a.open(t.$index,a.tableData)}}},[a._v("审核")])]}}])})],1),a._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),r("el-dialog",{attrs:{title:"代理详情",visible:a.dialogFormVisible,size:"",top:"5%"},on:{"update:visible":function(e){a.dialogFormVisible=e}}},[a.dialogFormVisible?r("div",[r("agentDetail",{ref:"detail",staticStyle:{width:"920px"},attrs:{detailCode:a.detailCode}})],1):a._e()]),a._v(" "),r("el-dialog",{attrs:{title:"代理审核",visible:a.dialogCheck,size:"",top:"30%"},on:{"update:visible":function(e){a.dialogCheck=e}}},[r("el-form",{staticStyle:{width:"400px"}},[r("el-form-item",{attrs:{label:"推荐人："}},[r("span",[a._v("\n                     "+a._s(a.opeMes.ReferrerName)+"|"+a._s(a.opeMes.ReferrerCode)+"\n                ")])]),a._v(" "),r("el-form-item",{attrs:{label:"提成日期："}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:a.form.CommissionDate,callback:function(e){a.$set(a.form,"CommissionDate",e)},expression:"form.CommissionDate"}})],1)],1),a._v(" "),r("div",{staticClass:"form_footer"},[r("el-button",{attrs:{type:"primary",loading:a.saveLoading},on:{click:a.checkSure}},[a._v("确定")]),a._v(" "),r("el-button",{on:{click:a.cancel}},[a._v("取消")])],1)],1)],1)},staticRenderFns:[]}},347:function(e,t,a){a(1754);var r=a(98)(a(1067),a(2226),"data-v-372bd2ff",null);e.exports=r.exports},436:function(e,t,a){a(439);var r=a(98)(a(437),a(440),"data-v-6c47323e",null);e.exports=r.exports},437:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{tHeader:{},filterVal:{},tableData1:{type:Array},name:""},watch:{tableData1:{handler:function(e){this.otData=e},deep:!0}},data:function(){return{otData:[]}},methods:{handleDownload:function(){var a=this;r.e(220).then(function(){var e=r(448).export_json_to_excel,t=[];t=0!=a.otData.length?a.formatJson(a.filterVal,a.otData):a.formatJson(a.filterVal,a.tableData1),e(a.tHeader,t,a.name)}.bind(null,r)).catch(r.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})}}}},438:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".exportBtn[data-v-6c47323e]{background:#fff;border:1px solid #d6d4d4;font-size:14px;color:#666;border-radius:4px}",""])},439:function(e,t,a){var r=a(438);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("fdf4f478",r,!0)},440:function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{staticClass:"exportBtn",attrs:{type:"primary"},on:{click:this.handleDownload}},[this._v("导出报表")])},staticRenderFns:[]}},443:function(e,t,a){"use strict";t.__esModule=!0;var r,l=a(444),n=(r=l)&&r.__esModule?r:{default:r};t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},444:function(e,t,a){e.exports={default:a(445),__esModule:!0}},445:function(e,t,a){a(446);var r=a(2).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},446:function(e,t,a){var r=a(9);r(r.S+r.F*!a(10),"Object",{defineProperty:a(11).f})},510:function(e,t,a){e.exports=a.p+"static/img/person.f548a9b.jpg"},513:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(100),c=i.n(a),r=i(66),m=i.n(r),l=i(102),p=i.n(l),n=i(99),o=i.n(n),s=i(443),f=i.n(s),d=i(101),u=i(64);t.default={props:{detailCode:""},data:function(){var e;return e={dialogImg:!1,baseImgPath:d.b,fileList:[],allMes:{},integral:0,payTable:[],ticketsList:[],packageAll:[],packageVal:[],gradeList:[],tableData:[]},f()(e,"allMes",""),f()(e,"ruleForm",{grade:"",BranchName:"",Sex:"",Code:"",BranchGradeName:"",PhoneNumber:"",OldReferrerName:"",ReferrerName:""}),f()(e,"createBy",""),f()(e,"ServiceInfo",{}),e},watch:{detailCode:{handler:function(){this.getBranchGradeAll()},deep:!0},"ruleForm.grade":{handler:function(t){this.gradeList.forEach(function(e){e.Code==t&&e.OrderNum})},deep:!0}},mounted:function(){this.getBranchGradeAll()},methods:{imgShow:function(e){this.$emit("photoShow",e)},uploadImg:function(){this.dialogImg=!0},getBranchGradeAll:function(){var s=this;return o()(c.a.mark(function e(){var t,a,r,l,n,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.all([i.i(u._319)(),i.i(u._354)(),i.i(u._353)(),i.i(u._51)({branchcode:s.detailCode})]);case 3:t=e.sent,a=p()(t,4),r=a[0],l=a[1],n=a[2],o=a[3],s.gradeList=r,s.packageAll=l,s.ticketsList=n,s.getBranchByCode(o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}},e,s,[[0,15]])}))()},getBranchByCode:function(e){this.fileList=e.CommonPhotoList,this.allMes=e,this.ServiceInfo=e.ServiceInfo?e.ServiceInfo:{},this.copyWorth(e.Branch),this.tableData=e.CPOList,this.payTable=e.BranchOrderPayList.filter(function(e){if(1==e.ItemType||4==e.ItemType)return e})},copyWorth:function(e){for(var t in e)e[t]&&"null"!=e[t]&&null!=e[t]&&"undefined"!=e[t]||(e[t]="");this.allMes=e,this.ruleForm.Sex=this.getSex(e.Sex),this.ruleForm.Code=e.Code,this.ruleForm.BranchName=e.BranchName,this.ruleForm.BranchGradeName=this.getGradeName(e.BranchGradeCode),this.ruleForm.PhoneNumber=e.PhoneNumber,this.ruleForm.SourcWayeCode=e.SourcWayeCode,this.ruleForm.RegistDate=e.RegistDate.substring(0,10),this.ruleForm.ReferrerName=e.ReferrerName,this.ruleForm.OpenBankName=e.OpenBankName,this.ruleForm.OpenBankCode=e.OpenBankCode,this.ruleForm.Income=e.Income,this.ruleForm.IDCard=e.IDCard,this.ruleForm.Email=e.Email,this.ruleForm.BankCardId=e.BankCardId,this.ruleForm.Birthday=e.Birthday,this.ruleForm.BankCardHolder=e.BankCardHolder,this.ruleForm.Address=e.Province+e.City+e.Area+e.Address.split(",").join(""),this.ruleForm.hospital=e.HospitalName,this.ruleForm.OldReferrerName=e.OldReferrerName?e.OldReferrerName:"",this.packageVal=this.packNamTurn(e.ConPackage),this.createBy=e.CreateBy},getSex:function(e){return e?1==e?"男":"女":""},getGradeName:function(t){var a="",r=[],l="";return this.gradeList.forEach(function(e){e.Code==t&&(a=e.BranchGradeName,l=e.OrderNum)}),this.gradeList.forEach(function(e){e.OrderNum<l&&r.push(e)}),this.gradeList=r,a},packNamTurn:function(e){for(var t=e.split(","),a=[],r=0;r<t.length;r++)for(var l=0;l<this.packageAll.length;l++)t[r]==this.packageAll[l].ConPacCode&&(a.push(this.packageAll[l].ConPacName),this.integral+=this.packageAll[l].JifenRecharge);return a}},components:{}}},514:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".clear[data-v-33b7c139]{clear:both}.pic[data-v-33b7c139]{width:60px;height:60px;border-radius:30px;overflow:hidden;background:url("+a(510)+") 50%;background-size:100%}.form_item_half[data-v-33b7c139]{width:48%;margin-bottom:0}.upGrade[data-v-33b7c139]{height:750px;overflow-x:hidden;overflow-y:auto}.mes[data-v-33b7c139]{margin-left:20px;line-height:26px}.imgList[data-v-33b7c139]{width:100px;height:100px;border:1px dashed #c0ccda;display:inline-block;border-radius:6px;margin-right:5px;position:relative}.layer[data-v-33b7c139]{position:absolute;top:0;left:0;z-index:2;width:100%;height:100px;background-color:rgba(0,0,0,.3);text-align:center;line-height:100px;opacity:0;color:#fff;border:none}.imgShow[data-v-33b7c139]{width:100px;height:100px}.imgList:hover .layer[data-v-33b7c139]{opacity:1}.view[data-v-33b7c139]{cursor:pointer}",""])},515:function(e,t,a){var r=a(514);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("06166ec1",r,!0)},517:function(e,t,a){a(515);var r=a(98)(a(513),a(519),"data-v-33b7c139",null);e.exports=r.exports},519:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"upGrade"},[r("div",{staticClass:"clear"},[a._m(0),a._v(" "),r("div",{staticClass:"mes left"},[r("span",{},[a._v(a._s(a.ruleForm.BranchName)+"  "+a._s(a.ruleForm.Sex))]),r("br"),a._v(" "),r("span",[a._v("代理编号："+a._s(a.ruleForm.Code))]),a._v("   \n            "),r("span",[a._v("代理等级："+a._s(a.ruleForm.BranchGradeName)+"  手机号码："+a._s(a.ruleForm.PhoneNumber))]),a._v("  \n            "),r("span",[a._v("创建人："+a._s(a.createBy))]),a._v("   \n        ")])]),a._v(" "),r("div",{staticClass:"clear",staticStyle:{"margin-top":"20px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:a.ruleForm,inline:!0,"label-width":"110px"}},[r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:""}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("代理详情")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2"},attrs:{span:24}},[r("el-form-item",{staticClass:"form_item_half",attrs:{label:"注册时间："}},[r("span",[a._v(a._s(a.ruleForm.RegistDate))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"邮箱："}},[r("span",[a._v(a._s(a.ruleForm.Email))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"地区："}},[r("span",[a._v(a._s(a.ruleForm.Address))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"来源渠道："}},[r("span",[a._v(a._s(a.ruleForm.SourcWayeCode))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"身份证号："}},[r("span",[a._v(a._s(a.ruleForm.IDCard))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"卡号："}},[r("span",[a._v(a._s(a.allMes.CardNO))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"生日："}},[r("span",[a._v(a._s(a.ruleForm.Birthday))])]),a._v(" "),0<a.ruleForm.ReferrerName.length?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"推荐人："}},[r("span",[a._v(a._s(a.ruleForm.ReferrerName))])]):a._e(),a._v(" "),0<a.ruleForm.OldReferrerName.length?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"前推荐人："}},[r("span",[a._v(a._s(a.ruleForm.OldReferrerName))])]):a._e(),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"服务商："}},[a.ServiceInfo.ServiceInfoName?r("span",[a._v(a._s(a.ServiceInfo.ServiceInfoName)+"（"+a._s(a.ServiceInfo.PhoneNumber)+"）")]):a._e()]):a._e(),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"医院："}},[r("span",[a._v(a._s(a.ruleForm.hospital))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"代理类型："}},[1==a.allMes.BranchType?r("span",[a._v("个人")]):a._e(),a._v(" "),2==a.allMes.BranchType?r("span",[a._v("店铺")]):a._e()]),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"店铺："}},[0<a.allMes.ShopName.length?r("span",[a._v(a._s(a.allMes.ShopName))]):a._e(),a._v(" "),r("span",[a._v(a._s(a.allMes.ShopArea)+"m²")])]):a._e(),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"凭证："}},[r("el-button",{attrs:{size:"small"},on:{click:a.uploadImg}},[a._v("查看图片")])],1):a._e(),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"专家日提成：",prop:""}},[0==a.allMes.IsExpert?r("span",[a._v("无")]):a._e(),a._v(" "),1==a.allMes.IsExpert?r("span",[a._v("有")]):a._e()]):a._e(),a._v(" "),1==a.allMes.IsExpert&&2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"生效时间："}},[a.allMes.ShopEffectiveDate?r("span",[a._v(a._s(a.allMes.ShopEffectiveDate.substring(0,10)))]):a._e()]):a._e(),a._v(" "),1==a.allMes.IsExpert&&2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"专家日提成比例："}},[a.allMes.ExpertRate?r("span",[a._v(a._s(a.allMes.ExpertRate.mul(100))+"%")]):a._e()]):a._e(),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"策略："}},[1==a.allMes.IdentityType?r("span",[a._v("新策略")]):a._e(),a._v(" "),2==a.allMes.IdentityType?r("span",[a._v("老策略")]):a._e()]),a._v(" "),1==a.allMes.IdentityType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"订单号："}},[1==a.allMes.IdentityType?r("span",[a._v(a._s(a.allMes.FormNO))]):a._e()]):a._e()],1),a._v(" "),r("el-form-item",{staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{label:""}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("组合信息")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"套餐内容："}},[r("el-row",a._l(a.packageVal,function(e,t){return r("span",{key:t,staticStyle:{"margin-right":"20px"}},[a._v(a._s(e))])}),0)],1),a._v(" "),r("el-form-item",{staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{label:"卡券："}},[r("el-table",{ref:"singleTable",staticStyle:{width:"750px"},attrs:{data:a.tableData,border:"","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",width:"60",label:"序号"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ConPacName",label:"套餐名称","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"TickInfoCode",label:"券种编号","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"TickName",label:"券名称","min-width":"120"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Price",label:"面值","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"EndDate",label:"有效期","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(e){return[""!=e.row.PrdOfVal&&null!=e.row.PrdOfVal?r("span",[a._v(" "+a._s("售后"+e.row.PrdOfVal+"天"))]):r("div",[r("p",[a._v("开始："+a._s(e.row.StartDate&&e.row.StartDate.substr(0,10))+" ")]),a._v(" "),r("p",[a._v("结束："+a._s(e.row.EndDate&&e.row.EndDate.substr(0,10))+" ")])])]}}])})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item",attrs:{label:"积分："}},[r("span",[a._v(a._s(a.integral))])])],1),a._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"100%"},attrs:{label:""}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("银行信息")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticClass:"form_item_half",attrs:{label:"银行："}},[r("span",[a._v(a._s(a.ruleForm.OpenBankCode))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"开户支行："}},[r("span",[a._v(a._s(a.ruleForm.OpenBankName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"银行卡号："}},[r("span",[a._v(a._s(a.ruleForm.BankCardId))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"开户人："}},[r("span",[a._v(a._s(a.ruleForm.BankCardHolder))])])],1),a._v(" "),r("el-form-item",{staticStyle:{width:"100%",margin:"0"},attrs:{label:"","label-width":"70px"}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("支付信息")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{label:" ","label-width":"50px"}},[r("el-table",{ref:"singleTable",staticStyle:{width:"800px"},attrs:{data:a.payTable,border:""}},[r("el-table-column",{attrs:{prop:"PayTypeName","min-width":"100",label:"支付方式"}}),a._v(" "),r("el-table-column",{attrs:{prop:"PayDate",label:"支付日期","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.PayDate?r("span",[a._v("\n                                    "+a._s(e.row.PayDate.substring(0,10))+" "+a._s(e.row.PayDate.substring(11,19))+"\n                                ")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"ReceiveAccount",label:"收款账户","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ProcFee",label:"手续费","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ItemDetail",label:"来源","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Memo",label:"备注","min-width":"100","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"RealAmount",label:"实际金额","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                                "+a._s(e.row.RealAmount.toQFW())+"\n                            ")]}}])})],1)],1)],1)],1)],1),a._v(" "),r("el-dialog",{attrs:{title:"凭证图片",visible:a.dialogImg,modal:!1,size:""},on:{"update:visible":function(e){a.dialogImg=e}}},[r("div",{staticStyle:{width:"650px"}},a._l(a.fileList,function(t){return r("div",{key:t.Id,staticClass:"imgList"},[r("img",{staticClass:"imgShow",attrs:{src:a.baseImgPath+t.ImgUrl,alt:""}}),a._v(" "),r("div",{staticClass:"layer"},[r("i",{staticClass:"el-icon-view view",on:{click:function(e){return a.imgShow(a.baseImgPath+t.ImgUrl)}}})])])}),0)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pic left"},[t("img",{attrs:{src:"",alt:""}})])}]}}});