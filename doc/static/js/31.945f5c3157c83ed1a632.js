webpackJsonp([31],{1346:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,".block[data-v-40041f90]{margin-top:20px;float:right}#print[data-v-40041f90]{display:none}",""])},1429:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,".demo-ruleForm[data-v-69757672]{width:300px}.form_footer[data-v-69757672]{text-align:center;padding:10px 0}.form_item_ipt153[data-v-69757672]{width:260px}.form_item_wt255[data-v-69757672]{width:300px}",""])},1771:function(e,t,r){var a=r(1346);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("20531af3",a,!0)},1854:function(e,t,r){var a=r(1429);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("42bca522",a,!0)},2045:function(e,t,r){r(1854);var a=r(98)(r(976),r(2327),"data-v-69757672",null);e.exports=a.exports},2243:function(e,t){e.exports={render:function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",[a("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:r.formInline,"label-width":"80px"}},[a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"模板名称："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"编号/客户/服务者/卡号"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&r._k(e.keyCode,"enter",13,e.key,"Enter")?null:r.onSubmit(e)}},model:{value:r.formInline.keywords,callback:function(e){r.$set(r.formInline,"keywords",e)},expression:"formInline.keywords"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院:"}},[a("el-select",{staticStyle:{width:"200px"},model:{value:r.formInline.hospital,callback:function(e){r.$set(r.formInline,"hospital",e)},expression:"formInline.hospital"}},r._l(r.hospitalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1),r._v(" "),a("br"),r._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:r.onSubmit}},[r._v("查询")]),r._v(" "),a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:r.add}},[r._v("添加模板")])],1)],1),r._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],staticClass:"min_table4 smt",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:r.tableData,border:""}},[a("el-table-column",{attrs:{prop:"templatName",label:"模板名称","min-width":"120"}}),r._v(" "),a("el-table-column",{attrs:{prop:"hospitalName",label:"医院","min-width":"100"}}),r._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作","min-width":"100"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.viewTemplate(t.$index,t.row)}}},[r._v("查看模板")]),r._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.edit(t.$index,t.row)}}},[r._v("编辑模板")]),r._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.teplateDrug(t.$index,t.row)}}},[r._v("选择药品")]),r._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.print(t.row.id,1)}}},[r._v("打印")]),r._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return r.del(t.row.id)}}},[r._v("删除")])]}}])})],1),r._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":r.currentPage,"page-sizes":[10,20,30,40],"page-size":r.size,layout:"total, sizes, prev, pager, next, jumper",total:r.total},on:{"size-change":r.handleSizeChange,"current-change":r.handleCurrentChange}})],1),r._v(" "),a("el-dialog",{attrs:{title:"添加产品单",visible:r.dialogFormVisible,"close-on-click-modal":!1,size:"",top:"10%"},on:{"update:visible":function(e){r.dialogFormVisible=e}}},[r.dialogFormVisible?a("ordonnance",{ref:"addOrd",staticStyle:{width:"950px"},attrs:{editMes:r.editMes},on:{addClose:r.addClose,openSelDrug:r.openSelDrug}}):r._e()],1),r._v(" "),a("el-dialog",{attrs:{title:"查看",visible:r.readDialog,"close-on-click-modal":!1,size:""},on:{"update:visible":function(e){r.readDialog=e}}}),r._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:r.editDialog,size:"",top:"10%"},on:{"update:visible":function(e){r.editDialog=e}}},[r.editDialog?a("edit",{ref:"editOrd",staticStyle:{width:"950px"},attrs:{mesCode:r.mesCode,id:r.mesId,payMesShow:r.payMesShow},on:{addClose:r.addClose,openSelDrug:r.openSelDrug}}):r._e()],1),r._v(" "),a("el-dialog",{attrs:{title:"选择药品",visible:r.dialogSelDrug,top:"20%",size:"","close-on-click-modal":!1},on:{"update:visible":function(e){r.dialogSelDrug=e}}},[r.dialogSelDrug?a("selDrug",{staticStyle:{width:"640px"},attrs:{mes:r.condition},on:{addDrug:r.addDrug}}):r._e()],1),r._v(" "),a("el-dialog",{attrs:{title:"添加模板",visible:r.moduleDialog,"close-on-click-modal":!1,size:""},on:{"update:visible":function(e){r.moduleDialog=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:r.ruleForm,"label-width":"90px"}},[a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"模板名称：",prop:"templateName",rules:[{required:!0,message:"请选择",trigger:"blur"}]}},[a("el-input",{staticStyle:{width:"260px"},model:{value:r.ruleForm.templateName,callback:function(e){r.$set(r.ruleForm,"templateName",e)},expression:"ruleForm.templateName"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院：",prop:"hospital",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"260px"},model:{value:r.ruleForm.hospital,callback:function(e){r.$set(r.ruleForm,"hospital",e)},expression:"ruleForm.hospital"}},r._l(r.hospitalList,function(e,t){return""!=e.code?a("el-option",{key:t,attrs:{label:e.supplierName,value:e.code+"|"+e.supplierName}}):r._e()}),1)],1)],1),r._v(" "),a("div",{staticClass:"form_footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("确定")]),r._v(" "),a("el-button",{on:{click:function(e){return r.resetForm("ruleForm")}}},[r._v("取消")])],1)],1)],1)},staticRenderFns:[]}},2327:function(e,t){e.exports={render:function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",{staticClass:"ord"},[a("el-form",{ref:"ruleForm",attrs:{model:r.ruleForm,rules:r.rules,inline:!0,"label-width":"90px"}},[a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"模板名称："}},[a("span",[r._v(r._s(r.ruleForm.templateName))])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"医院："}},[a("span",[r._v(r._s(r.ruleForm.hospital))])]),r._v(" "),a("br"),r._v(" "),a("el-form-item",{staticClass:" form_item_mt0",attrs:{label:"药品信息：","label-width":"100px"}}),r._v(" "),a("el-form-item",{staticClass:" form_item_mt10",attrs:{label:" ","label-width":"20px"}},[a("el-table",{staticStyle:{width:"920px","margin-bottom":"10px"},attrs:{data:r.tableData,height:"250",border:""}},[a("el-table-column",{attrs:{prop:"catalogId",label:"组别","min-width":"60"}}),r._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"药品名称","min-width":"120"}}),r._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"规格","min-width":"90"}}),r._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"数量","min-width":"70"},scopedSlots:r._u([{key:"default",fn:function(t){return[r.editMes.footerShow?a("el-input-number",{staticStyle:{width:"90%"},attrs:{max:t.row.max,controls:!1},on:{change:function(e){return r.NumChange(t.$index,t.row.quantity)}},model:{value:t.row.quantity,callback:function(e){r.$set(t.row,"quantity",e)},expression:"scope.row.quantity"}}):a("span",[r._v(r._s(t.row.quantity))])]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格","min-width":"70"}}),r._v(" "),a("el-table-column",{attrs:{prop:"dwName",label:"单位","min-width":"70"}}),r._v(" "),a("el-table-column",{attrs:{prop:"usage",label:"用法","min-width":"90"}}),r._v(" "),a("el-table-column",{attrs:{prop:"frequency",label:"频次","min-width":"70"}}),r._v(" "),a("el-table-column",{attrs:{prop:"days",label:"天数","min-width":"70"}}),r._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"90"}}),r._v(" "),r.editMes.footerShow?a("el-table-column",{attrs:{prop:"address",label:"操作","min-width":"80"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.del(t.$index,r.tableData)}}},[r._v("删除")])]}}],null,!1,1029837559)}):r._e()],1),r._v(" "),r.editMes.footerShow?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:r.add}},[r._v("添加药品")]):r._e(),a("br")],1)],1),r._v(" "),r.editMes.footerShow?a("div",{staticClass:"form_footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("确定")]),r._v(" "),a("el-button",{on:{click:function(e){return r.resetForm("ruleForm")}}},[r._v("取消")])],1):r._e()],1)},staticRenderFns:[]}},282:function(e,t,r){r(1771);var a=r(98)(r(983),r(2243),"data-v-40041f90",null);e.exports=a.exports},441:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return a}),r.d(t,"d",function(){return i}),r.d(t,"e",function(){return o}),r.d(t,"c",function(){return l});var a="image/gif,image/jpeg,image/jpg,image/png,image/svg",s="/Image/UploadImg",o="9",i=[{name:"中国",value:"01"},{name:"中国台湾",value:"02"},{name:"韩国",value:"03"},{name:"美国",value:"04"}],l=[{name:"网页",linkType:"0",linkUrl:""},{name:"热门",linkType:"1",linkUrl:"0"},{name:"直播",linkType:"1",linkUrl:"1"},{name:"视频",linkType:"1",linkUrl:"2"},{name:"问答",linkType:"1",linkUrl:"4"},{name:"精选案例",linkType:"2",linkUrl:"0"},{name:"最新案例",linkType:"2",linkUrl:"1"},{name:"附近案例",linkType:"2",linkUrl:"2"},{name:"医院详情",linkType:"3",linkUrl:""},{name:"医生详情",linkType:"4",linkUrl:""},{name:"项目详情",linkType:"5",linkUrl:""},{name:"商品详情",linkType:"6",linkUrl:""},{name:"案例详情",linkType:"7",linkUrl:""},{name:"卡券详情",linkType:"8",linkUrl:""},{name:"活动详情",linkType:"9",linkUrl:""},{name:"问答详情",linkType:"10",linkUrl:""},{name:"视频详情",linkType:"11",linkUrl:""},{name:"直播详情",linkType:"12",linkUrl:""},{name:"医美百科",linkType:"13",linkUrl:""},{name:"金牌设计",linkType:"14",linkUrl:""},{name:"抽奖中心",linkType:"15",linkUrl:""},{name:"红包专区",linkType:"16",linkUrl:""},{name:"html扩展页面",linkType:"17",linkUrl:""},{name:"医院列表",linkType:"18",linkUrl:""},{name:"项目列表",linkType:"19",linkUrl:""},{name:"卡券列表",linkType:"20",linkUrl:""},{name:"医生列表",linkType:"21",linkUrl:""},{name:"活动列表",linkType:"22",linkUrl:""},{name:"商家列表",linkType:"23",linkUrl:""},{name:"商家商品列表",linkType:"24",linkUrl:""},{name:"商家详情",linkType:"25",linkUrl:""},{name:"商家商品详情",linkType:"26",linkUrl:""},{name:"我的-订单",linkType:"27",linkUrl:"0"},{name:"我的-邀请好友",linkType:"27",linkUrl:"1"},{name:"我的-我的消息",linkType:"27",linkUrl:"2"},{name:"我的-我的收藏",linkType:"27",linkUrl:"3"},{name:"我的-身份认证",linkType:"27",linkUrl:"4"},{name:"我的-我的财富",linkType:"27",linkUrl:"5"},{name:"我的-关于我们",linkType:"27",linkUrl:"6"},{name:"我的-联系我们",linkType:"27",linkUrl:"7"},{name:"我的-信息咨询",linkType:"27",linkUrl:"8"},{name:"医院中心",linkType:"28",linkUrl:"0"},{name:"销售公司",linkType:"28",linkUrl:"1"},{name:"消费商",linkType:"28",linkUrl:"2"},{name:"商家中心",linkType:"28",linkUrl:"3"}]},443:function(e,t,r){"use strict";t.__esModule=!0;var a,s=r(444),o=(a=s)&&a.__esModule?a:{default:a};t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},444:function(e,t,r){e.exports={default:r(445),__esModule:!0}},445:function(e,t,r){r(446);var a=r(2).Object;e.exports=function(e,t,r){return a.defineProperty(e,t,r)}},446:function(e,t,r){var a=r(9);a(a.S+a.F*!r(10),"Object",{defineProperty:r(11).f})},500:function(e,t,r){var a=r(531);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("5eaa0016",a,!0)},531:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,".el-form-item__error{color:#ff4949;font-size:12px;line-height:1!important;padding-top:4px;position:static!important;top:100%;left:0}",""])},540:function(e,t){e.exports={randomAddress:[{Id:1,Address:"河北省邯郸市武安市上团城乡兴华钢铁有限公司"},{Id:2,Address:"河北省邯郸市武安市仁慈医院前兴荣小区5-1-201室"},{Id:3,Address:"吉林省吉林市蛟河市建材一条街贵都售楼处旁浪鲸卫浴"},{Id:4,Address:"吉林省吉林市蛟河市水畔春天2号楼1单元402"},{Id:5,Address:"河北省沧州市盐山县河北省沧州市盐山县圣佛镇付窑厂村"},{Id:6,Address:"山东省滨州市阳信县阳信县阳城八路盛世翰海东南门"},{Id:7,Address:"山西省太原市小店区亲贤街茂业小区3号楼1304"},{Id:8,Address:"浙江省温州市平阳县水头镇青溪村172号隔壁"},{Id:9,Address:"安徽省合肥市包河区桐城南路仕嘉名苑南楼703"},{Id:10,Address:"浙江省温州市鹿城区藤桥镇戍浦北路西湾村866号"},{Id:11,Address:"辽宁省沈阳市皇姑区黄河北大街146号"},{Id:12,Address:"重庆市重庆市铜梁县铜梁区襄安镇145号"},{Id:13,Address:"安徽省合肥市包河区桐城南路仕嘉名苑南楼703"},{Id:14,Address:"江苏省苏州市虎丘区泰山路666号"},{Id:15,Address:"江苏省苏州市虎丘区泰山路666号"},{Id:16,Address:"湖北省荆门市钟祥市旧口镇建设路18号"},{Id:17,Address:"广东省深圳市坪山新区竹坑村安置小区"},{Id:18,Address:"安徽省芜湖市芜湖县西次六路34号"},{Id:19,Address:"山西省太原市古交市沟儿口23号"},{Id:20,Address:"辽宁省沈阳市于洪区橙山路望湖丽园小区1-1-2306"},{Id:21,Address:"山东省菏泽市郓城县郓城东方医院"},{Id:22,Address:"辽宁省沈阳市皇姑区铜山路怡林名门3号楼1601室"},{Id:23,Address:"山西省太原市古交市滨河南路新家园超市170"},{Id:24,Address:"重庆市沙坪坝区歌乐山街道156号"},{Id:25,Address:"山东省潍坊市奎文区中百益家园245号"},{Id:26,Address:"河北省石家庄市长安区紫晶悦城2号地2号楼"},{Id:27,Address:"河北省石家庄市长安区和平路瑞府小区5-2-1504"},{Id:28,Address:"山东省潍坊市奎文区胜利街志远路中百益家园名鼎檀厅"},{Id:29,Address:"浙江省宁波市北仑区北仑出口加工区玉山路12号管研"},{Id:30,Address:"浙江省杭州市萧山区瓜沥镇友谊路478号"},{Id:31,Address:"河北省廊坊市大厂回族自治县祁各庄镇潮白佳程3-1-401"},{Id:32,Address:"河北省廊坊市大厂回族自治县潮白河英国宫2期12号楼1单元704"},{Id:33,Address:"浙江省杭州市萧山区瓜沥镇东灵路447号"},{Id:34,Address:"黑龙江省齐齐哈尔市龙江县景星镇"},{Id:35,Address:"广东省佛山市禅城区珠玑街三巷2号楼"},{Id:36,Address:"黑龙江省齐齐哈尔市龙江县景星镇"},{Id:37,Address:"河南省商丘市永城市河南省永城市酇阳镇酇南村"},{Id:38,Address:"河南省商丘市永城市河南省永城市十八里镇王双楼村南李庄"},{Id:39,Address:"安徽省合肥市包河区恒大中心售楼部东北侧"},{Id:40,Address:"河北省保定市徐水县河北省保定市徐水县大王店镇长城公寓"},{Id:41,Address:"河北省石家庄市裕华区盛景八方小区7-2-2202室"},{Id:42,Address:"山西省太原市万柏林区西矿街54号理工大学西区"},{Id:43,Address:"河北省石家庄市裕华区祁连大街加州阳光8-1-401"},{Id:44,Address:"上海市上海市奉贤区南桥镇南桥新城望园路8号"},{Id:45,Address:"河北省沧州市黄骅市南大港管理区一分区"},{Id:46,Address:"河北省沧州市黄骅市官庄乡 "},{Id:47,Address:"辽宁省辽阳市宏伟区火炬街"},{Id:48,Address:"山东省青岛市黄岛区薛家岛街道万达维多利亚湾1-4-2302"},{Id:49,Address:"北京市北京市大兴区亦庄新康家园小韩便利店"},{Id:50,Address:"山东省济南市历城区历山北路20号汇源华庭东区"},{Id:51,Address:"北京市北京市大兴区亦庄 大族广场T2栋8层正麟殿"},{Id:52,Address:"辽宁省铁岭市昌图县八面城镇"},{Id:53,Address:"湖北省武汉市洪山区关山街道光谷国际总部4栋405"},{Id:54,Address:"湖北省武汉市江汉区新华下路和祥里社区11栋1单元404"},{Id:55,Address:"辽宁省沈阳市和平区秀岛路185-1中海国际社区8#1-21-2"},{Id:56,Address:"河北省石家庄市辛集市辛集职教中心"},{Id:57,Address:"山东省威海市环翠区文峰四街76号楼3O3室"},{Id:58,Address:"浙江省绍兴市柯桥区滨海商业中心中泰华府7-803室"},{Id:59,Address:"山东省威海市环翠区昆明路四号"},{Id:60,Address:"浙江省绍兴市柯桥区马鞍镇滨海工业区兴滨路102"},{Id:61,Address:"河北省石家庄市辛集市芳华小区中心三号一单元501"},{Id:62,Address:"江苏省苏州市昆山市花集路588号可逸兰亭12栋805"},{Id:63,Address:"江苏省苏州市昆山市花集路588号可逸兰亭12栋二单元805"},{Id:64,Address:"江西省吉安市安福县安福县人民医院内二科"},{Id:65,Address:"河南省郑州市荥阳市索河路广武路西北角颐和小区"},{Id:66,Address:"河南省郑州市荥阳市广武路与索河路交叉口西北角新益家"},{Id:67,Address:"江西省赣州市章贡区开发区迎宾大道工业一路"},{Id:68,Address:"山东省青岛市城阳区铁骑山路惜福镇三元集团国贸3号楼"},{Id:69,Address:"山东省聊城市东昌府区振兴路西姚新村"},{Id:70,Address:"江西省赣州市章贡区迎宾大道工业一路"},{Id:71,Address:"山西省太原市小店区平阳路平阳景苑10号楼5单元"},{Id:72,Address:"河南省安阳市汤阴县新城国际"},{Id:73,Address:"广东省揭阳市榕城区仙桥镇槎桥斗门村1号"},{Id:74,Address:"河南省安阳市汤阴县大东门南200米路西馨雅家私"},{Id:75,Address:"山东省济南市历城区历山北路20号汇源华庭东区"},{Id:76,Address:"广东省中山市三角镇金三大道中138号东润华庭珀斯翡翠"},{Id:77,Address:"广东省中山市三角镇东润华庭珀斯翡翠13栋"},{Id:78,Address:"江西省吉安市安福县人民医院内二科"},{Id:79,Address:"浙江省杭州市西湖区浙江大学玉泉校区"},{Id:80,Address:"广东省揭阳市榕城区广东省揭阳市榕城区榕华凤港村56号"},{Id:81,Address:"河北省沧州市青县木门店镇后董京"},{Id:82,Address:"吉林省长春市绿园区和平大街车城苑"},{Id:83,Address:"吉林省长春市朝阳区前进大街前进小区一栋三单元303"},{Id:84,Address:"河北省沧州市新华区佳兴物流园北海川和众"},{Id:85,Address:"河南省商丘市梁园区星林路10号"},{Id:86,Address:"河南省郑州市新密市河南省郑州市新密市育才街喜悦鲁班"},{Id:87,Address:"北京市北京市海淀区北太平庄路18号城建大厦A座11层 "},{Id:88,Address:"重庆市重庆市沙坪坝区大学城南路时光里小区"},{Id:89,Address:"山东省青岛市即墨市环秀街道办事处环秀景苑8-2-603"},{Id:90,Address:"上海市上海市松江区车墩镇北松公路4898号"},{Id:91,Address:"安徽省合肥市蜀山区高新技术开发区望江西路10号"},{Id:92,Address:"上海市上海市松江区车墩镇泖亭路369号"},{Id:93,Address:"山东省烟台市蓬莱市半岛蓝湾23号楼1单元1202"},{Id:94,Address:"黑龙江省牡丹江市宁安市瑞和广场晓雅花坊"},{Id:95,Address:"重庆市重庆市沙坪坝区大学城南路富力城时光里16号"},{Id:96,Address:"江西省南昌市新建县学府大道1299号"},{Id:97,Address:"江西省抚州市广昌县香港花园14栋"},{Id:98,Address:"广东省东莞市厚街镇三屯34号"},{Id:99,Address:"江苏省南京市江宁区铜山镇禄口街道145号"},{Id:100,Address:"江苏省扬州市邗江区扬子津45号"},{Id:101,Address:"浙江省宁波市镇海区城河西路28号"},{Id:102,Address:"北京市北京市海淀区学清路12号学清苑小区4#-1503"},{Id:103,Address:"上海市上海市浦东新区和龙路295弄33号602室"},{Id:104,Address:"浙江省宁波市镇海区服装城西区2-20号"},{Id:105,Address:"山东省青岛市即墨市龙山街道鹤山路101号"},{Id:106,Address:"辽宁省沈阳市铁西区保工街北三中路33号3"},{Id:107,Address:"辽宁省沈阳市浑南新区五三街道富民南街25号"},{Id:108,Address:"河北省保定市定州市中山路万国广场售楼部"},{Id:109,Address:"天津市天津市宝坻区天津市宝坻区挹青路31号"},{Id:110,Address:"天津市天津市塘沽区福州道鸿正绿色家园22-3-602"},{Id:111,Address:"河南省周口市太康县张集乡蒋堂村34号"},{Id:112,Address:"四川省成都市新都区斑竹园镇憩园街21号"},{Id:113,Address:"广东省广州市番禺区南村镇里仁洞村环城中路57号 "},{Id:114,Address:"浙江省温州市乐清市新塘工业区永兴一路七号 "},{Id:115,Address:"浙江省温州市鹿城区南汇街道锦东家园一组团14幢501室"},{Id:116,Address:"浙江省温州市鹿城区南汇街道大自然3期b5栋901"},{Id:117,Address:"河北省石家庄市裕华区学苑路岗当新村7-2-301"},{Id:118,Address:"浙江省宁波市余姚市舜水南路100-7号 "},{Id:119,Address:"广东省广州市天河区车陂路西华大街西华花园18号"},{Id:120,Address:"湖北省襄阳市襄州区二汽车城大道锦绣路香樟苑"},{Id:121,Address:"河北省石家庄市桥东区学苑路岗当新村7号楼3单元"},{Id:122,Address:"广东省广州市天河区车陂路西华大街西华花园18号"},{Id:123,Address:"湖北省武汉市硚口区新世界汇豪邸4-2-1003"},{Id:124,Address:"广东省广州市天河区广汕一路747号"},{Id:125,Address:"福建省厦门市思明区西林西二里金莎花园34号602"},{Id:126,Address:"陕西省西安市阎良区凤凰街道 道北小区 一号楼"},{Id:127,Address:"河南省郑州市中牟县郑州工商学院"},{Id:128,Address:"安徽省合肥市蜀山区汇林园30栋106"},{Id:129,Address:"河南省郑州市郑东新区职教园区前程北路8号"},{Id:130,Address:"甘肃省天水市秦州区天水师范学院"},{Id:131,Address:"湖北省荆门市钟祥市丰乐镇幸福街39号"},{Id:132,Address:"安徽省淮北市濉溪县刘桥镇二矿工人村"},{Id:133,Address:"山东省淄博市临淄区金山镇加华路15号 "},{Id:134,Address:"江西省鹰潭市贵溪市铜拆解石窝村"},{Id:135,Address:"江苏省无锡市锡山区鹅湖镇甘露翰林路5号"},{Id:136,Address:"北京市北京市丰台区大成里蔚园4号楼707"},{Id:137,Address:"北京市北京市海淀区复兴路15号"},{Id:138,Address:"山东省滨州市惠民县淄角镇洛门马村"},{Id:139,Address:"上海市上海市浦东新区周浦镇繁荣安居115号401"},{Id:140,Address:"山东省滨州市惠民县温博园101号"},{Id:141,Address:"甘肃省庆阳市西峰区兰州路45号"},{Id:142,Address:"甘肃省庆阳市西峰区陇东学院"},{Id:143,Address:"吉林省辽源市东丰县东丰县兴达富苑3-1-304"},{Id:144,Address:"山东省临沂市沂水县翰林华府东沿街58号"},{Id:145,Address:"山东省临沂市沂水县沂水中心南街翰林华府"},{Id:146,Address:"福建省泉州市南安市112信箱83号"},{Id:147,Address:"福建省泉州市南安市112信箱83号"},{Id:148,Address:"江西省南昌市青山湖区广阳路万科城四期13栋404"},{Id:149,Address:"江西省景德镇市乐平市新火车站售票厅下面鄱阳饭店"},{Id:150,Address:"江苏省南通市通州市姜灶 汽车站旁 清水衣橱"},{Id:151,Address:"河北省石家庄市桥西区红旗大街356号 "},{Id:152,Address:"黑龙江省哈尔滨市松北区浦源路2468号 "},{Id:153,Address:"辽宁省朝阳市双塔区文祥豪府二期十四号楼三单元402"},{Id:154,Address:"辽宁省朝阳市双塔区站南街道八一家园B区28号楼2单元502"},{Id:155,Address:"浙江省杭州市西湖区浙大路38号"},{Id:156,Address:"河南省焦作市沁阳市步行街144号"},{Id:157,Address:"河南省焦作市沁阳市自由门122号"},{Id:158,Address:"湖北省黄冈市蕲春县向桥乡白水村"},{Id:159,Address:"广东省河源市源城区埔前镇白水村101号"},{Id:160,Address:"广东省惠州市惠城区小金口墩子沥村35号"},{Id:161,Address:"浙江省温州市苍南县灵溪镇百丈小区38栋一单元502"},{Id:162,Address:"江苏省无锡市锡山区鹅湖镇甘露翰林路5号 "},{Id:163,Address:"浙江省温州市苍南县灵溪五街江湾路宋桥庭院21幢一单元202"},{Id:164,Address:"重庆市重庆市永川市重庆市永川区科创职业学院"},{Id:165,Address:"广东省韶关市曲江区府前中路亿华13号"},{Id:166,Address:"广东省韶关市曲江区马坝亿华时代广场小区1-1-2301"},{Id:167,Address:"湖北省孝感市孝南区孝感村2号"},{Id:168,Address:"山东省德州市德城区迎宾路金谷园小区西门口公寓楼328室"}]}},542:function(e,t,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(100),m=d.n(r),a=d(66),u=d.n(a),s=d(102),c=d.n(s),o=d(99),i=d.n(o),p=(d(22),d(64)),l=(d(1),d(500));d.n(l);t.default={props:{mesCode:""},data:function(){return{payWayList:[],tableData:[],ruleForm:{},payData:[]}},computed:{totalPrice:function(){if(0==this.tableData.length)return 0;var t=0;return this.tableData.forEach(function(e){t+=Number(e.price).mul(Number(e.quantity))}),t},totalPay:function(){if(0==this.payData.length)return 0;var t=0;return this.payData.forEach(function(e){t=t.add(e.realAmount)}),t}},mounted:function(){this.date=new Date,this.GetProofOrderProDet({OrderProductCode:this.mesCode})},methods:{GetProofOrderProDet:function(l){var n=this;return i()(m.a.mark(function e(){var t,r,a,s,o,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.all([d.i(p.l)("0006"),d.i(p._497)(l)]);case 2:if(t=e.sent,r=c()(t,2),a=r[0],s=r[1],a.constructor==Array&&(n.payWayList=a),s.status){for(i in o=s.data.proofOrderProduct)null!=o[i]&&null!=o[i]&&"null"!=o[i]&&"undefined"!=o[i]||(o[i]="");n.ruleForm=o,n.tableData=s.data.proofOrderProductDetailList,n.payData=s.data.proofOrderPaylList,n.payData=n.deal(s.data.proofOrderPaylList)}case 8:case"end":return e.stop()}},e,n)}))()},deal:function(e){var r=this;return e.forEach(function(t){r.payWayList.forEach(function(e){t.payType!=e.DataCode||(t.payTypeName=e.DataName)})}),e}}}},547:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,".demo-ruleForm[data-v-262351b1]{width:300px}.form_footer[data-v-262351b1]{text-align:center}.form_item_ipt153[data-v-262351b1]{width:153px}.form_item_wt255[data-v-262351b1]{width:200px}.form_item_wt270[data-v-262351b1]{width:230px}.ord[data-v-262351b1]{min-height:440px}",""])},551:function(e,t,r){var a=r(547);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("36bf48c2",a,!0)},553:function(e,t,r){r(551);var a=r(98)(r(542),r(556),"data-v-262351b1",null);e.exports=a.exports},556:function(e,t){e.exports={render:function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",{staticClass:"ord"},[a("el-form",{ref:"ruleForm",attrs:{model:r.ruleForm,inline:!0,"label-width":"80px"}},[a("el-form-item",{staticClass:"form_item_wt270 form_item_mt0",attrs:{label:"姓名：",prop:"customerId"}},[a("span",[r._v(r._s(r.ruleForm.customerName)+"["+r._s(r.ruleForm.customerId)+"]")])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"性别："}},[0==r.ruleForm.sex?a("span",[r._v("女")]):a("span",[r._v("男")])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"年龄："}},[a("span",[r._v(r._s(r.ruleForm.age))])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"科室："}},[a("span",[r._v(r._s(r.ruleForm.deptName))])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt270 form_item_mt0",attrs:{label:"临床诊断："}},[a("span",[r._v(r._s(r.ruleForm.diagnosis))])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"服务者："}},[a("span",[r._v(r._s(r.ruleForm.nurseName))])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"日期："}},[r.ruleForm.orderDate?a("span",[r._v(r._s(r.ruleForm.orderDate.substring(0,10)))]):r._e()]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"费别："}},[a("span",[r._v(r._s(r.ruleForm.costCategory))])]),r._v(" "),a("el-form-item",{staticClass:"form_item_wt270 form_item_mt0",attrs:{label:"联系电话："}},[a("span",[r._v(r._s(r.ruleForm.phoneNumber))])]),r._v(" "),a("el-form-item",{staticClass:" form_item_mt0",staticStyle:{width:"600px"},attrs:{label:"地址："}},[a("span",[r._v(r._s(r.ruleForm.customerAddress))])]),a("br"),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"药品信息："}}),r._v(" "),a("el-form-item",{attrs:{label:" ","label-width":"50px"}},[a("el-table",{staticStyle:{width:"820px","margin-bottom":"10px"},attrs:{data:r.tableData,border:""}},[a("el-table-column",{attrs:{prop:"catalogId",label:"组别","min-width":"50"}}),r._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"药品名称","min-width":"100"}}),r._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"规格","min-width":"50"}}),r._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"数量","min-width":"50"}}),r._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格","min-width":"50"}}),r._v(" "),a("el-table-column",{attrs:{prop:"dwName",label:"单位","min-width":"50"}}),r._v(" "),a("el-table-column",{attrs:{prop:"usage",label:"用法","min-width":"70"}}),r._v(" "),a("el-table-column",{attrs:{prop:"frequency",label:"频次","min-width":"50"}}),r._v(" "),a("el-table-column",{attrs:{prop:"days",label:"天数","min-width":"50"}}),r._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"90"}})],1),r._v(" "),a("span",[r._v("药品金额："),a("span",[r._v(r._s(r.ruleForm.totalAmount))])])],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt0",attrs:{label:"支付信息："}}),r._v(" "),a("el-form-item",{attrs:{label:" ","label-width":"50px"}},[a("el-table",{staticStyle:{width:"820px","margin-bottom":"10px"},attrs:{data:r.payData,border:""}},[a("el-table-column",{attrs:{prop:"payTypeName",label:"支付方式","min-width":"100"}}),r._v(" "),a("el-table-column",{attrs:{prop:"receiveAccount",label:"收款账户","min-width":"80"}}),r._v(" "),a("el-table-column",{attrs:{prop:"realAmount",label:"支付金额","min-width":"80"}}),r._v(" "),a("el-table-column",{attrs:{prop:"payDate",label:"支付日期","min-width":"80"},scopedSlots:r._u([{key:"default",fn:function(e){return[e.row.payDate?a("span",[r._v(r._s(e.row.payDate.substring(0,10)))]):r._e()]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"80"}}),r._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作","min-width":"80"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.del(t.$index,r.payData)}}},[r._v("删除")])]}}])})],1),r._v(" "),a("span",[r._v("支付金额："+r._s(r.totalPay))])],1),r._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"备注："}},[a("el-input",{staticStyle:{width:"784px"},attrs:{type:"textarea",rows:3},model:{value:r.ruleForm.memo,callback:function(e){r.$set(r.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1)],1)],1)},staticRenderFns:[]}},577:function(e,t,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(103),_=v.n(r),a=v(37),b=v.n(a),s=v(66),g=v.n(s),o=v(102),w=v.n(o),i=v(100),F=v.n(i),l=v(99),n=v.n(l),d=v(540),I=v.n(d),x=v(22),D=v(64),m=v(500),u=(v.n(m),v(615)),c=v.n(u);t.default={components:{pay:c.a},props:{mesCode:"",id:"",payMesShow:Boolean,goodsType:{default:1}},data:function(){return{saveLoading:!1,editMes:{},editIndex:"",date:"",customer:"",payData:[],tableData:[],project:"",projectList:[],hospitalList:[],diaList:["重睑术后","重睑修复术后","隆鼻修复术后","注射隆鼻术后","假体隆鼻术后","面部软组织萎缩术后","下颏短小术后","眼袋术后","上睑皮肤松弛术后","内眦赘皮术后","腹部脂肪堆积术后","双上臂脂肪堆积术后","双大腿脂肪堆积术后","面颊脂肪堆积术后","下巴脂肪堆积术后","线雕术后","小乳术后","隆胸术后"],ruleForm:{customerId:"",customerName:"",sex:"0",date:"",age:"",address:"",phone:"",dpt:"",diag:"",fb:"",refrenceBranchCode:"",refrenceBranchName:"",memo:"",nurse:"",nurseId:"",nurseName:"",DeptCode:"",DeptName:"",hospital:"",hospitalName:"",hospitalCode:"",cardNO:"",module:""},deptList:[],customerList:[],dialogFormVisible:!1,payDialog:!1,rules:{name:[{required:!0,message:"请输入",trigger:"change"}]},nurseList:[],payWayList:[],allWhlist:[],whList:[],moduleList:[]}},computed:{totalPrice:function(){if(0==this.tableData.length)return 0;var t=0;return this.tableData.forEach(function(e){t+=Number(e.price).mul(Number(e.quantity)).mul(e.days)}),t},totalPay:function(){if(0==this.payData.length)return 0;var t=0;return this.payData.forEach(function(e){t=t.add(e.realAmount)}),t}},watch:{"ruleForm.hospital":{handler:function(){this.hosChange()},deep:!0}},mounted:function(){this.getServiceMan()},methods:{templateChange:function(r){var a=this;return n()(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r)return e.next=3,v.i(D._78)({id:r});e.next=7;break;case 3:t=e.sent,a.tableData=t.data,e.next=8;break;case 7:a.tableData=[];case 8:case"end":return e.stop()}},e,a)}))()},NumChange:function(e){var t=this;setTimeout(function(){t.tableData[e].realAmount=t.tableData[e].quantity.mul(t.tableData[e].price).mul(t.tableData[e].days),t.tableData[e].totalQuantity=t.tableData[e].quantity.mul(t.tableData[e].days)},50)},payOpe:function(e,t,r){t?e.constructor==Object&&this.payData.push(e):r&&(this.payData[this.editIndex]=e,this.payData.push()),this.payDialog=!1},hosChange:function(){var r=this;return n()(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 0==r.ruleForm.hospital.length?(r.ruleForm.hospitalCode="",r.ruleForm.hospitalName=""):(r.ruleForm.hospitalCode=r.ruleForm.hospital.split("|")[0],r.ruleForm.hospitalName=r.ruleForm.hospital.split("|")[1]),r.deptList=[],e.next=4,v.i(D.t)({HospitalCode:r.ruleForm.hospitalCode});case 4:t=e.sent,""!=r.ruleForm.hospitalCode?r.deptList=t.data:r.deptList=[],r.whList=[],r.allWhlist.forEach(function(e){e.hospitalCode==r.ruleForm.hospitalCode&&r.whList.push(e)});case 8:case"end":return e.stop()}},e,r)}))()},dptChange:function(){0==this.ruleForm.dpt.length?(this.ruleForm.DeptCode="",this.ruleForm.DeptName=""):(this.ruleForm.DeptCode=this.ruleForm.dpt.split("|")[0],this.ruleForm.DeptName=this.ruleForm.dpt.split("|")[1])},GetProofOrderProDet:function(r){var a=this;return n()(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.i(D._497)(r);case 2:(t=e.sent).status&&(a.init(t.data.proofOrderProduct,t.data.proofOrderProductDetailList),a.tableData=t.data.proofOrderProductDetailList,a.payData=a.deal(t.data.proofOrderPaylList));case 4:case"end":return e.stop()}},e,a)}))()},deal:function(e){var r=this;return e.forEach(function(t){r.payWayList.forEach(function(e){t.payType!=e.DataCode||(t.payTypeName=e.DataName)})}),e},init:function(e){for(var t in e)null!=e[t]&&"null"!=e[t]&&null!=e[t]&&"undefined"!=e[t]||(e[t]="");this.ruleForm={customerId:e.customerId,customerName:e.customerName,sex:e.sex+"",date:"",age:e.age+"",address:e.customerAddress?e.customerAddress:this.address[Math.floor(167*Math.random()+0)].Address,phone:e.phoneNumber,diag:e.diagnosis,fb:e.costCategory,refrenceBranchCode:e.refrenceBranchCode,refrenceBranchName:e.refrenceBranchName,memo:e.memo,nurse:0<e.nurseId.length?e.nurseId+"|"+e.nurseName:"",nurseId:e.nurseId,nurseName:e.nurseName,dpt:0<e.deptCode.length?e.deptCode+"|"+e.deptName:"",DeptCode:e.deptCode,DeptName:e.deptName,hospital:0<e.hospitalCode.length?e.hospitalCode+"|"+e.hospitalName:"",hospitalName:e.hospitalName,hospitalCode:e.hospitalCode,cardNO:e.cardNO,module:""},this.project=e.diagnosis,this.customer=e.customerName,this.date=new Date(e.orderDate.substring(0,4),Number(e.orderDate.substring(5,7))-1,e.orderDate.substring(8,10))},UpdateProofOrderProduct:function(r){var a=this;return n()(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.saveLoading=!1,e.next=3,v.i(D._501)(r);case 3:(t=e.sent).status?(a.$message({type:"success",message:"编辑成功!"}),a.$emit("addClose",!0)):a.$message({type:"warning",message:"编辑失败!"+t.errorMessage}),a.saveLoading=!1;case 6:case"end":return e.stop()}},e,a)}))()},ProofOrderProductPay:function(r){var a=this;return n()(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.i(D._502)(r);case 2:(t=e.sent).status?(a.$message({type:"success",message:"支付成功!"}),a.$emit("addClose",!0)):a.$message({type:"warning",message:"支付失败!"+t.errorMessage});case 4:case"end":return e.stop()}},e,a)}))()},getServiceMan:function(){var y=this;return n()(F.a.mark(function e(){var t,r,a,s,o,i,l,n,d,m,u,c,p,f,h;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.address=I.a.randomAddress,e.next=3,g.a.all([v.i(D.l)("0006"),v.i(D.d)({typeId:1}),v.i(D._15)(),v.i(D.e)({hospitalCode:"",pageIndex:1,pageSize:100,keywords:"",typeId:1}),v.i(D._81)({KeyWords:"",PageSize:1,PageIndex:1,hospitalCode:v.i(x.b)("hospitalCode")})]);case 3:for(t=e.sent,r=w()(t,5),a=r[0],s=r[1],o=r[2],i=r[3],l=r[4],y.moduleList=l.data,a.constructor==Array&&(y.payWayList=a),y.hospitalList=s.data,n=v.i(x.b)("hospitalCode")?v.i(x.b)("hospitalCode"):"all",m=!(d=!0),u=void 0,e.prev=17,c=_()(o.data);!(d=(p=c.next()).done);d=!0)f=p.value,h=f.hospitalCode.split(","),("all"==n||0<=h.indexOf(n))&&y.nurseList.push({code:f.code,name:f.serviceName,text:f.serviceName+"("+f.code+")"});e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),m=!0,u=e.t0;case 25:e.prev=25,e.prev=26,!d&&c.return&&c.return();case 28:if(e.prev=28,m)throw u;e.next=31;break;case 31:return e.finish(28);case 32:return e.finish(25);case 33:y.allWhlist=JSON.parse(b()(i.data)),y.GetProofOrderProDet({OrderProductCode:y.mesCode});case 35:case"end":return e.stop()}},e,y,[[17,21,25,33],[26,,28,32]])}))()},dateChange:function(e){this.ruleForm.date=e},getMember:function(e){if(e instanceof Array&&0<e.length){var t=!0,r=!1,a=void 0;try{for(var s,o=_()(e);!(t=(s=o.next()).done);t=!0){var i=s.value;i.value=i.MemberName,i.name=i.MemberName,i.Type=1==i.Type?"black":"red",i.CardNO=i.CardNO?i.CardNO:"",this.customerList.push(i)}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}}},queryCus:function(a,s){var o=this;return n()(F.a.mark(function e(){var t,r;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.customerList=[],""!==a&&null!=a)return e.next=4,v.i(D.A)({keywords:a.removeSP()});e.next=6;break;case 4:t=e.sent,o.getMember(t);case 6:o.ruleForm.refrenceBranchCode="",o.ruleForm.refrenceBranchName="",o.ruleForm.customerId="",o.ruleForm.customerName="",o.ruleForm.customerGradeName="",clearTimeout((r=o).timeout),o.timeout=setTimeout(function(){s(r.customerList)},100);case 14:case"end":return e.stop()}},e,o)}))()},selectCus:function(e){for(var t in e)null!=e[t]&&null!=e[t]||(e[t]="");e.Address=e.Province+e.City+e.Area+e.Address.split(",").join(""),0<e.Birthday.length&&1900!=e.Birthday.substring(0,10)?this.ruleForm.age=(new Date).getFullYear()-e.Birthday:this.ruleForm.age="",this.ruleForm.customerName=e.MemberName,this.ruleForm.customerId=e.Code,this.ruleForm.customerGradeName=e.CustomerGradeName,e.Address?this.ruleForm.address=e.Address:this.ruleForm.address="",e.sex=e.Sex,this.ruleForm.phone=e.PhoneNumber,this.ruleForm.refrenceBranchCode=e.ReferrerCode?e.ReferrerCode:"",this.ruleForm.refrenceBranchName=e.ReferrerName?e.ReferrerName:"",this.ruleForm.cardNO=e.CardNO?e.CardNO:""},nurseSelect:function(){0==this.ruleForm.nurse.length?(this.ruleForm.nurseId="",this.ruleForm.nurseName=""):(this.ruleForm.nurseId=this.ruleForm.nurse.split("|")[0],this.ruleForm.nurseName=this.ruleForm.nurse.split("|")[1])},add:function(e){"pay"==e?(this.editIndex="",this.editMes="",this.payDialog=!0):this.$emit("openSelDrug",!0,"edit",{warehouseId:0<this.whList.length?this.whList[0].id:"",hospitalCode:this.ruleForm.hospitalCode})},submitForm:function(e){var a=this,s=this;this.$refs[e].validate(function(e){if(e)if(a.payMesShow){var t={code:a.mesCode,jsonStr:b()(a.payData)};a.ProofOrderProductPay(t)}else{var r={id:s.id,orderProductCode:s.mesCode,orderDate:s.ruleForm.date,age:s.ruleForm.age,phoneNumber:s.ruleForm.phone,customerAddress:s.ruleForm.address,deptCode:s.ruleForm.DeptCode,deptName:s.ruleForm.DeptName,hospitalCode:s.ruleForm.hospitalCode,hospitalName:s.ruleForm.hospitalName,sex:s.ruleForm.sex,customerId:s.ruleForm.customerId,customerName:s.ruleForm.customerName,refrenceBranchCode:s.ruleForm.refrenceBranchCode,refrenceBranchName:s.ruleForm.refrenceBranchName,nurseId:s.ruleForm.nurseId,nurseName:s.ruleForm.nurseName,costCategory:s.ruleForm.fb,diagnosis:s.ruleForm.diag,totalAmount:s.totalPrice,memo:s.ruleForm.memo,modifiedUserId:v.i(x.b)("userId"),modifiedBy:v.i(x.b)("userName"),productList:b()(s.tableData),cardNo:s.ruleForm.cardNO,goodsType:s.goodsType};s.UpdateProofOrderProduct(r)}})},resetForm:function(){this.$emit("addClose",!1)},addDrugs:function(t){var r=this;if(5<=this.tableData.length)return this.$message({message:"处方单最多添加五种药品",type:"warning"}),!1;var a=!0;this.tableData.forEach(function(e){return e.unitId==t.unitId&&0!=t.unitId&&e.catalogId==t.catalogId&&(a=!1,r.$message({message:"列表已存在相同药品且组别相同,请直接修改数量",type:"warning"})),"口服"==e.usage&&"外用"==t.usage||"外用"==e.usage&&"口服"==t.usage?(a=!1,r.$message({message:"口服和外用不能存在同一张处方单中！",type:"warning"}),!1):"口服"==e.usage&&"口服"==t.usage&&e.catalogId==t.catalogId?(a=!1,r.$message({message:"口服同一组别只能存在一个！",type:"warning"}),!1):void 0}),a&&(this.tableData.push(JSON.parse(b()(t))),this.$emit("openSelDrug",!1))},del:function(e,t){t.splice(e,1)},editPay:function(e,t){this.editIndex=e,this.editMes=t[e],this.payDialog=!0}}}},578:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(103),d=l.n(r),a=l(100),n=l.n(a),s=l(66),m=l.n(s),o=l(102),u=l.n(o),i=l(99),c=l.n(i),p=(l(22),l(64)),f=l(500);l.n(f);t.default={props:{editMes:"",id:"",hospitalCode:"",code:""},data:function(){return{debounce:500,payWayList:[],accountList:[],payDate:"",ruleForm:{memo:"",receiveAccount:"",payType:"",payTypeName:"",realAmount:"",payDate:""},RemainAmount:"0",rules:{payType:[{required:!0,message:"请选择",trigger:"change"}],realAmount:[{required:!0,type:"number",message:"请填写",trigger:"blur"}]}}},mounted:function(){this.payDate=new Date,this.ruleForm.payDate=new Date,this.getPayWay()},methods:{initData:function(e){this.ruleForm={memo:e.memo,receiveAccount:e.receiveAccount,payType:e.payType,payTypeName:"",realAmount:e.realAmount,ProcFee:e.procFee,payDate:""},this.payDate=0<e.payDate.length?new Date(e.payDate.substring(0,4),e.payDate.substring(5,7)-1,e.payDate.substring(8,10)):new Date},getPayWay:function(){var i=this;return c()(n.a.mark(function e(){var t,r,a,s,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.all([l.i(p._32)({branchcode:i.code}),l.i(p._31)({hospitalCode:i.hospitalCode}),l.i(p.l)("0006")]);case 2:t=e.sent,r=u()(t,3),a=r[0],s=r[1],o=r[2],i.RemainAmount=a.RemainAmount,i.accountList=s.data,i.payWayList=o,i.editMes.payDate&&i.initData(i.editMes);case 11:case"end":return e.stop()}},e,i)}))()},submitForm:function(e){var l=this,n=this;this.$refs[e].validate(function(e){if(e){var t=!0,r=!1,a=void 0;try{for(var s,o=d()(n.payWayList);!(t=(s=o.next()).done);t=!0){var i=s.value;n.ruleForm.payType==i.DataCode&&(n.ruleForm.payTypeName=i.DataName)}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}n.payDate.formatDate("yyyy-MM-dd")==(new Date).formatDate("yyyy-MM-dd")?n.ruleForm.payDate=(new Date).formatDate("yyyy-MM-dd hh:mm:ss"):n.ruleForm.payDate=n.payDate.formatDate("yyyy-MM-dd hh:mm:ss"),l.editMes.payDate?(n.payDate.formatDate("yyyy-MM-dd")==n.editMes.payDate.substring(0,10)&&(n.ruleForm.payDate=n.editMes.payDate),n.$emit("payOpe",n.ruleForm,!1,!0)):n.$emit("payOpe",n.ruleForm,!0)}})},resetForm:function(){this.$emit("payOpe",this.ruleForm,!1,!1)}}}},587:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,".form_footer[data-v-2e963c68]{text-align:center}.form_item_ipt153[data-v-2e963c68]{width:153px}.form_item_wt255[data-v-2e963c68]{width:253px}",""])},588:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,".demo-ruleForm[data-v-3e594a96]{width:300px}.form_footer[data-v-3e594a96]{text-align:center}.form_item_ipt153[data-v-3e594a96]{width:260px}.form_item_wt255[data-v-3e594a96]{width:400px}.ord[data-v-3e594a96]{min-height:440px}",""])},601:function(e,t,r){var a=r(587);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("14543856",a,!0)},602:function(e,t,r){var a=r(588);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("17df96ea",a,!0)},614:function(e,t,r){r(602);var a=r(98)(r(577),r(621),"data-v-3e594a96",null);e.exports=a.exports},615:function(e,t,r){r(601);var a=r(98)(r(578),r(620),"data-v-2e963c68",null);e.exports=a.exports},620:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,inline:!0,"label-width":"100px"}},[r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"支付方式：",prop:"PayType"}},[r("el-select",{staticStyle:{width:"300px",float:"none"},model:{value:t.ruleForm.payType,callback:function(e){t.$set(t.ruleForm,"payType",e)},expression:"ruleForm.payType"}},t._l(t.payWayList,function(e,t){return r("el-option",{key:t,attrs:{label:e.DataName,value:e.DataCode}})}),1)],1),t._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"金额：",prop:"realAmount"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:t.ruleForm.realAmount,callback:function(e){t.$set(t.ruleForm,"realAmount",t._n(e))},expression:"ruleForm.realAmount"}})],1),t._v(" "),"018"==t.ruleForm.payType?r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"预付款余额："}},[t._v("\n            "+t._s(t.RemainAmount)+"\n         ")]):t._e(),t._v(" "),"001"!=t.ruleForm.payType?r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"收款账户："}},[r("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择"},model:{value:t.ruleForm.receiveAccount,callback:function(e){t.$set(t.ruleForm,"receiveAccount",e)},expression:"ruleForm.receiveAccount"}},t._l(t.accountList,function(e,t){return r("el-option",{key:t,attrs:{label:e.shortName,value:e.shortName}})}),1)],1):t._e(),t._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"支付时间："}},[r("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.payDate,callback:function(e){t.payDate=e},expression:"payDate"}})],1),t._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"备注："}},[r("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:3},model:{value:t.ruleForm.memo,callback:function(e){t.$set(t.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1)],1),t._v(" "),r("div",{staticClass:"form_footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确定")]),t._v(" "),r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("取消")])],1)],1)},staticRenderFns:[]}},621:function(e,t){e.exports={render:function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",{staticClass:"ord"},[a("el-form",{ref:"ruleForm",attrs:{model:r.ruleForm,rules:r.rules,inline:!0,"label-width":"100px"}},[a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"姓名：",prop:"customerId"}},[a("el-autocomplete",{staticStyle:{width:"260px",float:"left"},attrs:{"fetch-suggestions":r.queryCus,placeholder:"请输入内容",disabled:r.payMesShow,"trigger-on-focus":!1},on:{select:r.selectCus},scopedSlots:r._u([{key:"default",fn:function(e){var t=e.item;return[a("my-item-ordon",{attrs:{item:t}})]}}]),model:{value:r.customer,callback:function(e){r.customer=e},expression:"customer"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"性别：",disabled:r.payMesShow}},[a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:r.ruleForm.sex,callback:function(e){r.$set(r.ruleForm,"sex",e)},expression:"ruleForm.sex"}},[r._v("女")]),r._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:r.ruleForm.sex,callback:function(e){r.$set(r.ruleForm,"sex",e)},expression:"ruleForm.sex"}},[r._v("男")])],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"年龄："}},[a("el-input",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow},model:{value:r.ruleForm.age,callback:function(e){r.$set(r.ruleForm,"age",e)},expression:"ruleForm.age"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"医院："}},[a("el-select",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow},model:{value:r.ruleForm.hospital,callback:function(e){r.$set(r.ruleForm,"hospital",e)},expression:"ruleForm.hospital"}},r._l(r.hospitalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.code+"|"+e.supplierName}})}),1)],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"科室："}},[a("el-select",{staticClass:"form_item_ipt153",attrs:{disabled:r.payMesShow},on:{change:r.dptChange},model:{value:r.ruleForm.dpt,callback:function(e){r.$set(r.ruleForm,"dpt",e)},expression:"ruleForm.dpt"}},r._l(r.deptList,function(e,t){return a("el-option",{key:t,attrs:{label:e.deptName,value:e.deptCode+"|"+e.deptName}})}),1)],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"临床诊断："}},[a("el-select",{staticStyle:{width:"260px",float:"left"},attrs:{filterable:"","allow-create":"",disabled:r.payMesShow},model:{value:r.ruleForm.diag,callback:function(e){r.$set(r.ruleForm,"diag",e)},expression:"ruleForm.diag"}},r._l(r.diaList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"服务者："}},[a("el-select",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow,filterable:""},on:{change:r.nurseSelect},model:{value:r.ruleForm.nurse,callback:function(e){r.$set(r.ruleForm,"nurse",e)},expression:"ruleForm.nurse"}},[a("el-option",{attrs:{value:"",label:"空"}}),r._v(" "),r._l(r.nurseList,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.code+"|"+e.name}})})],2)],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"日期："}},[a("el-date-picker",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow,type:"date",placeholder:"选择日期"},on:{change:r.dateChange},model:{value:r.date,callback:function(e){r.date=e},expression:"date"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"费别："}},[a("el-select",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow},model:{value:r.ruleForm.fb,callback:function(e){r.$set(r.ruleForm,"fb",e)},expression:"ruleForm.fb"}},[a("el-option",{attrs:{label:"空",value:""}}),r._v(" "),a("el-option",{attrs:{label:"自费",value:"自费"}})],1)],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"联系电话："}},[a("el-input",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow},model:{value:r.ruleForm.phone,callback:function(e){r.$set(r.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"卡号："}},[a("el-input",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow},model:{value:r.ruleForm.cardNO,callback:function(e){r.$set(r.ruleForm,"cardNO",e)},expression:"ruleForm.cardNO"}})],1),r._v(" "),a("el-form-item",{staticClass:"form_item_wt255 form_item_mt10",attrs:{label:"地址："}},[a("el-input",{staticStyle:{width:"260px"},attrs:{disabled:r.payMesShow},model:{value:r.ruleForm.address,callback:function(e){r.$set(r.ruleForm,"address",e)},expression:"ruleForm.address"}})],1),r._v(" "),a("br"),r._v(" "),a("el-form-item",{staticClass:" form_item_mt0",attrs:{label:"药品信息：","label-width":"100px"}}),r._v(" "),a("el-form-item",{attrs:{label:" ","label-width":"20px"}},[a("el-table",{staticStyle:{width:"920px","margin-bottom":"10px"},attrs:{data:r.tableData,border:""}},[a("el-table-column",{attrs:{prop:"catalogId",label:"组别","min-width":"60"}}),r._v(" "),a("el-table-column",{attrs:{prop:"productName",label:1==r.goodsType?"药品名称":"产品名称","min-width":"120","show-overflow-tooltip":""}}),r._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"规格","min-width":"110","show-overflow-tooltip":""}}),r._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"数量","min-width":"60"},scopedSlots:r._u([{key:"default",fn:function(t){return[r.payMesShow?a("span",[r._v(r._s(t.row.quantity))]):a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1},on:{change:function(e){return r.NumChange(t.$index,t.row.quantity)}},model:{value:t.row.quantity,callback:function(e){r.$set(t.row,"quantity",e)},expression:"scope.row.quantity"}})]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格","min-width":"60"},scopedSlots:r._u([{key:"default",fn:function(t){return[r.payMesShow?a("span",[r._v(r._s(t.row.price))]):a("el-input-number",{staticStyle:{width:"90%"},attrs:{controls:!1},on:{change:function(e){return r.NumChange(t.$index,t.row.price)}},model:{value:t.row.price,callback:function(e){r.$set(t.row,"price",e)},expression:"scope.row.price"}})]}}])}),r._v(" "),a("el-table-column",{attrs:{prop:"dwName",label:"单位","min-width":"60"}}),r._v(" "),a("el-table-column",{attrs:{prop:"usage",label:"用法","min-width":"90"}}),r._v(" "),a("el-table-column",{attrs:{prop:"frequency",label:"频次","min-width":"70"}}),r._v(" "),a("el-table-column",{attrs:{prop:"days",label:"天数","min-width":"60"}}),r._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"90","show-overflow-tooltip":""}}),r._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作","min-width":"80"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",disabled:r.payMesShow},on:{click:function(e){return r.del(t.$index,r.tableData)}}},[r._v("删除")])]}}])})],1),r._v(" "),a("el-button",{attrs:{type:"primary",size:"small",disabled:r.payMesShow},domProps:{textContent:r._s(1==r.goodsType?"添加药品":"添加产品")},on:{click:function(e){return r.add("med")}}}),a("br"),r._v(" "),a("span",[r._v("药品金额："+r._s(r.totalPrice))])],1),r._v(" "),r.payMesShow?a("el-form-item",{attrs:{label:"支付信息：","label-width":"100px"}},[a("el-table",{staticStyle:{width:"784px","margin-bottom":"10px"},attrs:{data:r.payData,border:""}},[a("el-table-column",{attrs:{prop:"payTypeName",label:"支付方式","min-width":"100"}}),r._v(" "),a("el-table-column",{attrs:{prop:"receiveAccount",label:"收款账户","min-width":"80"}}),r._v(" "),a("el-table-column",{attrs:{prop:"realAmount",label:"支付金额","min-width":"80"}}),r._v(" "),a("el-table-column",{attrs:{prop:"payDate",label:"支付日期","min-width":"80"},scopedSlots:r._u([{key:"default",fn:function(e){return[e.row.payDate?a("span",[r._v(r._s(e.row.payDate.substring(0,10))+" "+r._s(e.row.payDate.substring(11,19)))]):r._e()]}}],null,!1,424554897)}),r._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"80"}}),r._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作","min-width":"80"},scopedSlots:r._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.editPay(t.$index,r.payData)}}},[r._v("编辑")]),r._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return r.del(t.$index,r.payData)}}},[r._v("删除")])]}}],null,!1,3933539133)})],1),r._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return r.add("pay")}}},[r._v("添加支付信息")]),a("br"),r._v(" "),a("span",[r._v("支付金额："+r._s(r.totalPay))])],1):r._e(),r._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"备注："}},[a("el-input",{staticStyle:{width:"784px"},attrs:{type:"textarea",rows:3},model:{value:r.ruleForm.memo,callback:function(e){r.$set(r.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1)],1),r._v(" "),a("div",{staticClass:"form_footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("确定")]),r._v(" "),a("el-button",{on:{click:function(e){return r.resetForm("ruleForm")}}},[r._v("取消")])],1),r._v(" "),a("el-dialog",{attrs:{title:"支付",visible:r.payDialog,"close-on-click-modal":!1,size:"",modal:!1},on:{"update:visible":function(e){r.payDialog=e}}},[r.payDialog?a("pay",{staticStyle:{width:"450px"},attrs:{code:r.ruleForm.customerId,"hospital-code":r.ruleForm.hospitalCode,editMes:r.editMes},on:{payOpe:r.payOpe}}):r._e()],1)],1)},staticRenderFns:[]}},632:function(e,t,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(103),p=c.n(r),a=c(100),f=c.n(a),s=c(99),o=c.n(s),i=c(443),l=c.n(i),h=(c(22),c(64)),n=c(1),d=c(500);c.n(d);n.default.component("my-item-ordonProRep",{functional:!0,render:function(e,t){var r=t.props.item;return e("div",t.data,[e("p",{attrs:{class:"select_name",title:r.Name}},["名称："+r.Name]),e("p",{attrs:{class:"select_code",title:r.Name}},["批号："+r.batchNumber]),e("p",{attrs:{class:"select_code",title:r.Name}},["仓库："+r.warehouseName+r.ManuF]),e("p",{attrs:{class:"select_code",title:r.Name}},["价格："+r.salePrice]),e("p",{attrs:{class:"select_code",title:r.Name}},["规格："+r.unitName]),e("p",{attrs:{class:"select_code",title:r.Name}},["库存："+r.remainingCount]),e("p",{attrs:{class:"select_code",title:r.Name}},["冻结："+r.frozenQuantity])])},props:{item:{type:Object,required:!0}}}),t.default={data:function(){var e;return{customer:"",projectList:[],catalogList:[1,2,3,4,5,6],rules:{},useMethodList:[],Form:(e={id:"",drugName:"",drugId:"",num:1,unitId:"",unitName:"",price:0,memo:"",dwName:"",useMethod:"",frequency:"",catalogId:"1",days:1},l()(e,"frequency",""),l()(e,"usage",""),l()(e,"max",0),l()(e,"counts",""),e),drugList:[],drug:"",whList:[]}},props:{mes:{}},computed:{},mounted:function(){this.getBaseDataByCode()},methods:{getBaseDataByCode:function(){var r=this;return o()(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.i(h.l)("0025");case 2:t=e.sent,r.useMethodList=t;case 4:case"end":return e.stop()}},e,r)}))()},usageChange:function(){this.Form.frequency="",this.Form.counts="",this.Form.days=1},getPro:function(m){var u=this;return o()(f.a.mark(function e(){var t,r,a,s,o,i,l,n,d;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.i(h._8)({warehouseId:u.mes.warehouseId,hospitalCode:u.mes.hospitalCode,pageIndex:1,pageSize:10,keywords:m,IsFrozen:0,goodsType:"1,2"});case 2:if(t=e.sent,r=[],!(t.data instanceof Array&&0<t.data.length)){e.next=24;break}for(s=!(a=!0),o=void 0,e.prev=8,i=p()(t.data);!(a=(l=i.next()).done);a=!0)0<(n=l.value).remainingCount&&(d="",n.manufacturer&&(d=9<n.manufacturer.length?"("+n.manufacturer.substring(0,9)+"...)":"("+n.manufacturer+")"),r.push({warehouseName:n.warehouseName,warehouseId:n.warehouseId,dwName:n.dwName,value:n.drugName,code:n.drugId,GoodsCode:n.drugId,Name:n.drugName,unitName:n.unitName,approvalNumber:n.approvalNumber,batchNumber:n.batchNumber,manufacture:n.manufacturer,ManuF:d,effectiveDate:n.effectiveDate?n.effectiveDate:"",productionDate:n.productionDate?n.productionDate:"",originAddress:n.originAddress,realPrice:n.realPrice,salePrice:n.salePrice,jiType:n.jiType,unitId:n.unitId,remainingCount:n.remainingCount,frozenQuantity:n.frozenQuantity,goodsType:n.goodsType}));e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),s=!0,o=e.t0;case 16:e.prev=16,e.prev=17,!a&&i.return&&i.return();case 19:if(e.prev=19,s)throw o;e.next=22;break;case 22:return e.finish(19);case 23:return e.finish(16);case 24:u.drugList=r;case 25:case"end":return e.stop()}},e,u,[[8,12,16,24],[17,,19,23]])}))()},selectPro:function(e){this.Form.id=e.code,this.Form.drugName=e.Name,this.Form.drugId=e.code,this.Form.dwName=e.dwName,this.Form.price=e.salePrice,this.Form.unitName=e.unitName,this.Form.unitId=e.unitId,this.Form.jiType=e.jiType,this.Form.productionDate=e.productionDate,this.Form.manufacture=e.manufacture,this.Form.originAddress=e.originAddress,this.Form.realPrice=e.realPrice,this.Form.effectiveDate=e.effectiveDate?e.effectiveDate.substring(0,10):"",this.Form.salePrice=e.salePrice,this.Form.batchNumber=e.batchNumber,this.Form.warehouseId=e.warehouseId,this.Form.goodsType=e.goodsType,this.Form.approvalNumber=e.approvalNumber,this.Form.warehouseName=e.warehouseName,this.Form.max=e.remainingCount},initPro:function(){this.Form.drugName="",this.Form.drugId=""},queryPro:function(e,t){this.drugList=[],this.initPro(),""!==e&&null!=e&&this.getPro(e);var r=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r.drugList)},1e3)},addDrugs:function(e){var r=this;this.$refs[e].validate(function(e){if(e){if(r.Form.days*r.Form.num>r.Form.max)return r.$message({type:"warning",message:"药品数量超出库存!"}),!1;var t={productId:r.Form.drugId,drugId:r.Form.id,productName:r.Form.drugName,unitId:r.Form.unitId,unitName:r.Form.unitName,price:r.Form.price,quantity:r.Form.num,realAmount:Number(r.Form.price)*Number(r.Form.num)*r.Form.days,memo:r.Form.memo,dwName:r.Form.dwName,usage:r.Form.usage,frequency:r.Form.frequency,catalogId:r.Form.catalogId,days:r.Form.days,max:r.Form.max,jiType:r.Form.jiType,drugName:r.Form.drugName,productionDate:r.Form.productionDate,manufacture:r.Form.manufacture,originAddress:r.Form.originAddress,realPrice:r.Form.realPrice,effectiveDate:r.Form.effectiveDate,salePrice:r.Form.price,batchNumber:r.Form.batchNumber,warehouseId:r.Form.warehouseId,warehouseName:r.Form.warehouseName,goodsType:r.Form.goodsType,approvalNumber:r.Form.approvalNumber,counts:r.Form.counts,totalQuantity:r.Form.days*r.Form.num};r.$emit("addDrug",!0,t)}})},cancel:function(){this.$emit("addDrug",!1)}}}},638:function(e,t,r){(e.exports=r(215)(!1)).push([e.i,".demo-ruleForm[data-v-0235b584]{width:300px}.form_footer[data-v-0235b584]{text-align:center;padding:10px 0}.form_item_ipt153[data-v-0235b584]{width:260px}.form_item_wt255[data-v-0235b584]{width:400px}",""])},648:function(e,t,r){var a=r(638);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(216)("a0dde01a",a,!0)},654:function(e,t,r){r(648);var a=r(98)(r(632),r(660),"data-v-0235b584",null);e.exports=a.exports},660:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ord"},[r("el-form",{ref:"Form",staticClass:"demo-ruleForm",staticStyle:{width:"680px"},attrs:{model:t.Form,inline:!0,"label-width":"100px"}},[r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"药品：",prop:"drugId",rules:[{required:!0,message:"不能为空"}]}},[r("el-autocomplete",{staticStyle:{width:"200px",float:"left"},attrs:{"fetch-suggestions":t.queryPro,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:t.selectPro},scopedSlots:t._u([{key:"default",fn:function(e){var t=e.item;return[r("my-item-ordonProRep",{attrs:{item:t}})]}}]),model:{value:t.drug,callback:function(e){t.drug=e},expression:"drug"}})],1),t._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"规格："}},[r("span",[t._v(t._s(t.Form.unitName))])]),t._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"价格：",prop:"price",rules:[{required:!0,message:"不能为空"}]}},[r("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1},model:{value:t.Form.price,callback:function(e){t.$set(t.Form,"price",e)},expression:"Form.price"}})],1),t._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"数量：",prop:"num",rules:[{required:!0,message:"不能为空"}]}},[r("el-input-number",{staticStyle:{width:"200px"},attrs:{max:t.Form.max,controls:!1},model:{value:t.Form.num,callback:function(e){t.$set(t.Form,"num",e)},expression:"Form.num"}})],1),t._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"单位："}},[r("el-input",{staticStyle:{width:"200px"},model:{value:t.Form.dwName,callback:function(e){t.$set(t.Form,"dwName",e)},expression:"Form.dwName"}})],1),t._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"用法："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:t.usageChange},model:{value:t.Form.usage,callback:function(e){t.$set(t.Form,"usage",e)},expression:"Form.usage"}},t._l(t.useMethodList,function(e,t){return r("el-option",{key:t,attrs:{label:e.DataName,value:e.DataName}})}),1)],1),t._v(" "),"肌内注射"!=t.Form.usage?r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"频次："}},[r("el-select",{staticStyle:{width:"200px"},model:{value:t.Form.frequency,callback:function(e){t.$set(t.Form,"frequency",e)},expression:"Form.frequency"}},[r("el-option",{attrs:{label:"qd",value:"qd"}}),t._v(" "),r("el-option",{attrs:{label:"bid",value:"bid"}}),t._v(" "),r("el-option",{attrs:{label:"qid",value:"qid"}}),t._v(" "),r("el-option",{attrs:{label:"tid",value:"tid"}})],1)],1):t._e(),t._v(" "),"口服"==t.Form.usage?r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"每次用量：",prop:"counts",rules:[{required:!0,message:"不能为空"}]}},[r("el-input",{staticStyle:{width:"200px"},model:{value:t.Form.counts,callback:function(e){t.$set(t.Form,"counts",e)},expression:"Form.counts"}})],1):t._e(),t._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"组别："}},[r("el-select",{staticStyle:{width:"200px"},model:{value:t.Form.catalogId,callback:function(e){t.$set(t.Form,"catalogId",e)},expression:"Form.catalogId"}},t._l(t.catalogList,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),t._v(" "),"口服"!=t.Form.usage?r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"天数："}},[r("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1},model:{value:t.Form.days,callback:function(e){t.$set(t.Form,"days",e)},expression:"Form.days"}})],1):t._e(),t._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"备注："}},[r("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:2},model:{value:t.Form.memo,callback:function(e){t.$set(t.Form,"memo",e)},expression:"Form.memo"}})],1)],1),t._v(" "),r("div",{staticClass:"form_footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addDrugs("Form")}}},[t._v("确定")]),t._v(" "),r("el-button",{on:{click:function(e){return t.cancel("Form")}}},[t._v("取消")])],1)],1)},staticRenderFns:[]}},976:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(37),o=s.n(r),a=s(100),i=s.n(a),l=s(99),n=s.n(l),d=(s(22),s(64)),m=(s(1),s(500));s.n(m);t.default={data:function(){return{saveLoading:!1,date:"",customer:"",tableData:[],diaList:["重睑术后","重睑修复术后","隆鼻修复术后","注射隆鼻术后","假体隆鼻术后","面部软组织萎缩术后","下颏短小术后","眼袋术后","上睑皮肤松弛术后","内眦赘皮术后","腹部脂肪堆积术后","双上臂脂肪堆积术后","双大腿脂肪堆积术后","面颊脂肪堆积术后","下巴脂肪堆积术后","线雕术后","小乳术后","隆胸术后"],ruleForm:{customerId:"",customerName:"",customerGradeName:"",sex:"0",date:"",age:"",address:"",phone:"",dpt:"",diag:"",fb:"自费",refrenceBranchCode:"",refrenceBranchName:"",memo:"",nurse:"",nurseId:"",nurseName:"",DeptCode:"",DeptName:"",hospital:"",hospitalName:"",hospitalCode:"",cardNo:"",templateName:""},deptList:[],customerList:[],hospitalList:[],dialogFormVisible:!1,rules:{customerId:[{required:!0,message:"请输入"}],hospitalCode:[{required:!0,message:"选择",trigger:"change"}]},nurseList:[],allWhlist:[],whList:[]}},computed:{totalPrice:function(){if(0==this.tableData.length)return 0;var t=0;return this.tableData.forEach(function(e){t=t.add(e.realAmount)}),t}},props:{editMes:{}},mounted:function(){this.date=new Date,this.editMes.id&&(this.ruleForm.templateName=this.editMes.templatName,this.ruleForm.hospital=this.editMes.hospitalName,this.getTable())},methods:{getTable:function(){var r=this;return n()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.i(d._78)({id:r.editMes.id});case 2:t=e.sent,r.tableData=t.data;case 4:case"end":return e.stop()}},e,r)}))()},NumChange:function(e){var t=this;setTimeout(function(){t.tableData[e].realAmount=t.tableData[e].quantity.mul(t.tableData[e].price)},50)},AddPrintDetail:function(r){var a=this;return n()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.saveLoading=!0,e.next=3,s.i(d._503)(r);case 3:(t=e.sent).status?(a.$message({type:"success",message:"操作成功!"}),a.$emit("addClose",!0)):a.$message({type:"warning",message:"添加失败!"+t.errorMessage});case 5:case"end":return e.stop()}},e,a)}))()},add:function(){this.$emit("openSelDrug",!0,"add",{warehouseId:"",hospitalCode:this.editMes.hospitalCode})},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(e){var t={jsonStr:o()(r.tableData),code:r.editMes.id};r.AddPrintDetail(t)}})},resetForm:function(){this.$emit("addClose",!1)},addDrugs:function(t){var r=this,a=!0;this.tableData.forEach(function(e){return e.unitId==t.unitId&&e.catalogId==t.catalogId&&(a=!1,r.$message({message:"列表已存在相同药品请直接修改数量",type:"warning"})),"口服"==e.usage&&"外用"==t.usage||"外用"==e.usage&&"口服"==t.usage?(a=!1,r.$message({message:"口服和外用不能存在同一张处方单中！",type:"warning"}),!1):"口服"==e.usage&&"口服"==t.usage&&e.catalogId==t.catalogId?(a=!1,r.$message({message:"口服同一组别只能存在一个！",type:"warning"}),!1):void 0}),a&&(t.templatId=this.editMes.id,this.tableData.push(JSON.parse(o()(t))),this.$emit("openSelDrug",!1))},del:function(e){this.tableData.splice(e,1)}}}},983:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(104),s=i.n(r),a=i(100),l=i.n(a),o=i(66),n=i.n(o),d=i(102),m=i.n(d),u=i(99),c=i.n(u),p=i(22),f=i(65),h=(i.n(f),i(2045)),y=i.n(h),v=i(553),_=i.n(v),b=i(614),g=i.n(b),w=i(654),F=i.n(w),I=i(101),x=(i(441),i(64));t.default={data:function(){return{moduleDialog:!1,dialogSelDrug:!1,loading:!1,url:"",mesId:"",mesCode:"",size:10,total:0,currentPage:1,date:"",width:480,dialogFormVisible:!1,payMesShow:!1,readDialog:!1,editDialog:!1,tableData:[],hospitalList:[],formInline:{name:"",startDate:"",endDate:"",keywords:"",isPayOff:"",hospital:"",service:""},allService:[],serviceList:[],hrefName:i.i(p.b)("userName"),condition:{},ruleForm:{templateName:"",hospital:""},editMes:{}}},mounted:function(){this.url=I.b;var e=new Date;e.setDate("01"),this.date=[e,new Date],this.GetDropDownPermission()},methods:{viewTemplate:function(e,t){this.editMes=t,this.editMes.footerShow=!1,this.dialogFormVisible=!0},teplateDrug:function(e,t){this.editMes=t,this.editMes.footerShow=!0,this.dialogFormVisible=!0},openSelDrug:function(e,t,r){e?(this.dialogSelDrug=!0,this.ope=t,this.condition=r):this.dialogSelDrug=!1},addDrug:function(e,t){e?"add"==this.ope?this.$refs.addOrd.addDrugs(t):this.$refs.editOrd.addDrugs(t):this.dialogSelDrug=!1},GetDropDownPermission:function(){var o=this;return c()(l.a.mark(function e(){var t,r,a,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={typeId:1},e.next=3,n.a.all([i.i(x.d)(t)]);case 3:r=e.sent,a=m()(r,1),s=a[0],o.hospitalList=s.data,o.formInline.hospital=i.i(p.b)("hospitalCode")?i.i(p.b)("hospitalCode"):"";case 8:case"end":return e.stop()}},e,o)}))()},dateSelect:function(e){e?(e=e.formatDates(),this.formInline.startDate=e.substring(0,10),this.formInline.endDate=e.substring(13)):(this.formInline.startDate="",this.formInline.endDate=""),this.onSubmit()},addClose:function(e){e&&this.search(),this.dialogFormVisible=!1,this.editDialog=!1},add:function(){this.ruleForm.templateName="",this.ruleForm.hospital="",this.editMes={},this.moduleDialog=!0},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.GetPrintTemplatList({KeyWords:this.formInline.keywords.removeSP(),PageSize:this.size,PageIndex:this.currentPage,hospitalCode:this.formInline.hospital})},GetPrintTemplatList:function(r){var a=this;return c()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.loading=!0,e.next=3,i.i(x._81)(r);case 3:(t=e.sent).status?(a.tableData=t.data,a.total=t.count):a.$message({type:"warning",message:"获取数据失败!"+t.errorMessage}),a.loading=!1;case 6:case"end":return e.stop()}},e,a)}))()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.size=e,this.search()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.search()},edit:function(e,t){this.ruleForm.hospital=t.hospitalCode+"|"+t.hospitalName,this.ruleForm.templateName=t.templatName,this.editMes=t,this.moduleDialog=!0},views:function(e,t){this.mesCode=t[e].orderProductCode,this.readDialog=!0},print:function(e){var t=document.location.protocol+"//"+document.location.hostname+(80==document.location.port||""==document.location.port?"":":"+document.location.port)+"/";if(0<=I.b.indexOf("192"))window.open(t+"print/printOrdonnance.html?code="+e+"&ope=4");else window.open(t+"print/printOrdonnance.html?code="+e+"&ope=4")},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(e){var t={hospitalCode:a.ruleForm.hospital.split("|")[0],hospitalName:a.ruleForm.hospital.split("|")[1],templatName:a.ruleForm.templateName},r=a.editMes.id?"编辑":"添加";a.editMes.id?(t.modifiedUserId=i.i(p.b)("userId"),t.modifiedBy=i.i(p.b)("userName"),t=s()({},a.editMes,t)):(t.createUserId=i.i(p.b)("userId"),t.createBy=i.i(p.b)("userName")),a.AddPrintTemplat(t,r)}})},resetForm:function(){this.moduleDialog=!1},AddPrintTemplat:function(r,a){var s=this;return c()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,s.editMes.id)return e.next=4,i.i(x._498)(r);e.next=7;break;case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,i.i(x._499)(r);case 9:t=e.sent;case 10:t.status?(s.$message({type:"success",message:a+"成功!"}),s.moduleDialog=!1,s.search()):s.$message({type:"error",message:a+"失败!"+t.errorMessage});case 11:case"end":return e.stop()}},e,s)}))()},DeletePrintTemplatById:function(t){var r=this;return c()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.i(x._500)(t);case 2:e.sent.status?(r.$message({message:"删除成功",type:"success"}),r.search()):r.$message.error("删除失败");case 4:case"end":return e.stop()}},e,r)}))()},del:function(e){var t=this;this.$confirm("此操作将删除该模板, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.DeletePrintTemplatById({id:e})}).catch(function(){})}},components:{ordonnance:y.a,selDrug:F.a,views:_.a,edit:g.a}}}});