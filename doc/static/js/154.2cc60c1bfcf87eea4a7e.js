webpackJsonp([154],{1053:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=o(100),i=o.n(n),r=o(99),l=o.n(r),s=o(65),c=(o.n(s),o(436)),u=o.n(c),d=(o(22),o(64));function m(t){return a.apply(this,arguments)}e.default={data:function(){return{loading:!1,mes:{},total:10,size:10,currentPage:1,hospitalList:[],date:"",formInline:{doctor:"",date1:"",date2:"",status:"",name:"",phone:"",hospital:"",keywords:""},tableData:[],doctorList:[],allData:[]}},computed:{tHeader:function(){return["日期","单据号","医院","客户","服务者","产品名称","批次","规格","单价","数量","金额"]},filterVal:function(){return["orderDate","orderProductCode","hospitalName","customerName","nurseName","productName","narcotization","unitName","price","quantity","realAmount"]},tableData1:function(){var e={orderDate:"合计",orderProductCode:"",hospitalName:"",customerName:"",nurseName:"",productName:"",narcotization:"",unitName:"",price:"",quantity:0,realAmount:0};return this.allData.forEach(function(t){e.quantity+=t.quantity,e.realAmount+=t.realAmount}),this.allData.push(e),this.allData},name:function(){return"产品出库详情"}},filters:{filterAddr:(a=function(t){if(t){t.split(",").join("");return filterAddr}return""},m.toString=function(){return a.toString()},m)},mounted:function(){var t=new Date;t.setDate("01"),this.date=[t,new Date],this.getHospital()},methods:{getSummaries:function(t){var e=t.columns,n=t.data,r=[];e.forEach(function(e,t){if(0!==t){var a=n.map(function(t){return Number(t[e.property])});a.every(function(t){return isNaN(t)})?r[t]="N/A":(r[t]=a.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t.add(e)},0),r[t])}else r[t]="合计"});for(var a=1;a<9;a++)r[a]="";return r},getdata:function(){this.loading=!0,this.search(1)},GetOrderProductEveryDay:function(a,n){var r=this;return l()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(d._547)(a);case 2:e=t.sent,n?(r.allData=e.data,r.loading=!1,r.$refs.export.handleDownload()):(r.total=e.count,r.tableData=e.data);case 4:case"end":return t.stop()}},t,r)}))()},GetReservation:function(a){var n=this;return l()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(d._77)(a);case 2:(e=t.sent).status?(n.total=e.count,n.tableData=e.data):console.log(e);case 4:case"end":return t.stop()}},t,n)}))()},getHospital:function(){var a=this;return l()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.i(d.d)({typeId:1});case 3:e=t.sent,a.hospitalList=e.data,a.formInline.hospital=a.hospitalList[0].code,a.search(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},t,a,[[0,9]])}))()},onSubmit:function(){this.currentPage=1,this.search()},search:function(t){this.GetOrderProductEveryDay({typeId:2,keywords:this.formInline.keywords.removeSP(),hospitalId:this.formInline.hospital,startDate:this.formInline.date1,enddate:this.formInline.date2,pageIndex:this.currentPage,pageSize:t?this.total:this.size},t)},dateSelect:function(t){0!=t.length?(t=t.formatDates(),this.formInline.date1=t.substring(0,10),this.formInline.date2=t.substring(13)):(this.formInline.date1="",this.formInline.date2=""),this.onSubmit()},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.size=t,this.search()},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t,this.search()}},components:{Export:u.a}}},1306:function(t,e,a){(t.exports=a(215)(!1)).push([t.i,"",""])},1731:function(t,e,a){var n=a(1306);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(216)("1c79f576",n,!0)},2203:function(t,e){t.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MemberManage"},[a("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:e.formInline,"label-width":"80px"}},[a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"入库日期："}},[a("el-date-picker",{staticClass:"form_item_ipt220",attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:e.dateSelect},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院："}},[a("el-select",{staticClass:"form_item_ipt220",on:{change:e.onSubmit},model:{value:e.formInline.hospital,callback:function(t){e.$set(e.formInline,"hospital",t)},expression:"formInline.hospital"}},e._l(e.hospitalList,function(t,e){return a("el-option",{key:e,attrs:{label:t.supplierName,value:t.code}})}),1)],1),e._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"关键字："}},[a("el-input",{staticClass:"form_item_ipt220",attrs:{placeholder:"客户/服务者/产品"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.formInline.keywords,callback:function(t){e.$set(e.formInline,"keywords",t)},expression:"formInline.keywords"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"searchBtn",on:{click:e.getdata}},[e._v("导出数据")]),e._v(" "),a("Export",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"export",attrs:{tHeader:e.tHeader,filterVal:e.filterVal,tableData1:e.tableData1,name:e.name}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:e.tableData,border:"",height:"460"}},[a("el-table-column",{attrs:{prop:"orderProductCode",label:"单据号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hospitalName",label:"医院","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerName",label:"客户","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nurseName",label:"服务者","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"产品名称","min-width":"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"narcotization",label:"批次","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unitName",label:"规格","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"数量","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realAmount",label:"金额","min-width":"120"}})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},334:function(t,e,a){a(1731);var n=a(98)(a(1053),a(2203),"data-v-2b7c6536",null);t.exports=n.exports},436:function(t,e,a){a(439);var n=a(98)(a(437),a(440),"data-v-6c47323e",null);t.exports=n.exports},437:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{tHeader:{},filterVal:{},tableData1:{type:Array},name:""},watch:{tableData1:{handler:function(t){this.otData=t},deep:!0}},data:function(){return{otData:[]}},methods:{handleDownload:function(){var a=this;n.e(220).then(function(){var t=n(448).export_json_to_excel,e=[];e=0!=a.otData.length?a.formatJson(a.filterVal,a.otData):a.formatJson(a.filterVal,a.tableData1),t(a.tHeader,e,a.name)}.bind(null,n)).catch(n.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}}},438:function(t,e,a){(t.exports=a(215)(!1)).push([t.i,".exportBtn[data-v-6c47323e]{background:#fff;border:1px solid #d6d4d4;font-size:14px;color:#666;border-radius:4px}",""])},439:function(t,e,a){var n=a(438);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(216)("fdf4f478",n,!0)},440:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("el-button",{staticClass:"exportBtn",attrs:{type:"primary"},on:{click:this.handleDownload}},[this._v("导出报表")])},staticRenderFns:[]}}});