webpackJsonp([161],{1065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),s=n.n(a),r=n(99),o=n.n(r),i=n(443),c=n.n(i),l=n(65),u=(n.n(l),n(22)),d=n(64);t.default={data:function(){var e;return e={saveLoading:!1,loading:!1,keywords:"",hospitalCode:"",date:"",topBranch:"",dialogFormVisible:!1,project:"",title:"",opeIndex:0,currentPage:1,total:0,pageSize:10},c()(e,"keywords",""),c()(e,"branchList",[]),c()(e,"form",{ShortName:"",BankName:"",CardNo:"",AccountHolder:""}),c()(e,"tableData",[]),c()(e,"allData",[]),c()(e,"ope",""),e},computed:{},watch:{},mounted:function(){this.GetDropDownPermission()},methods:{handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.search()},handleCurrentChange:function(e){this.currentPage=e,this.search()},UpdateBaseBranchAccount:function(a){var r=this;return o()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(d._377)(a);case 2:(t=e.sent).status?(r.$message({message:"编辑成功",type:"success"}),r.dialogFormVisible=!1,r.search()):r.$message.error("编辑失败"+t.errorMessage),r.saveLoading=!1;case 5:case"end":return e.stop()}},e,r)}))()},AddBaseBranchAccount:function(a){var r=this;return o()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.saveLoading=!0,e.next=3,n.i(d._378)(a);case 3:(t=e.sent).status?(r.$message({message:"添加成功",type:"success"}),r.dialogFormVisible=!1,r.search()):r.$message.error("添加失败"+t.errorMessage),r.saveLoading=!1;case 6:case"end":return e.stop()}},e,r)}))()},GetBaseBranchAccount:function(a){var r=this;return o()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(d.k)(a);case 2:(t=e.sent).status?(r.allData=t.data,r.total=t.count,r.pageData()):r.$message({type:"error",message:"获取数据失败!"+t.errorMessage});case 4:case"end":return e.stop()}},e,r)}))()},pageData:function(){this.tableData=this.allData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)},DeleteBaseBranchAccount:function(a){var r=this;return o()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(d._379)(a);case 2:(t=e.sent).status?(r.$message({message:"删除成功",type:"success"}),r.search()):r.$message.error("删除失败"+t.errorMessage);case 4:case"end":return e.stop()}},e,r)}))()},branchSel:function(){0<this.topBranch.length?(this.branchCode=this.topBranch.split("|")[0],this.branchName=this.topBranch.split("|")[1]):(this.branchCode="",this.branchName="")},GetDropDownPermission:function(){var a=this;return o()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(d._194)();case 2:return a.branchList=e.sent,e.next=5,n.i(d.d)({typeId:1});case 5:t=e.sent,a.hospitalList=t.data,a.hospitalCode=t.data[0].code,a.search();case 9:case"end":return e.stop()}},e,a)}))()},sure:function(){var e={branchCode:this.branchCode,branchName:this.branchName,shortName:this.form.ShortName,bankName:this.form.BankName,cardNO:this.form.CardNo,accountHolder:this.form.AccountHolder};"add"==this.ope?(e.createUserId=n.i(u.b)("userId"),e.createUserId=n.i(u.b)("userName"),this.AddBaseBranchAccount(e)):(e.id=this.form.id,e.modifiedUserId=n.i(u.b)("userId"),e.modifiedBy=n.i(u.b)("userName"),this.UpdateBaseBranchAccount(e))},cancel:function(){this.dialogFormVisible=!1},add:function(){this.ope="add",this.dialogFormVisible=!0,this.topBranch="",this.form={ShortName:"",BankName:"",CardNo:"",AccountHolder:""}},del:function(e,t){var a=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.DeleteBaseBranchAccount({id:t[e].id})}).catch(function(){})},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.GetBaseBranchAccount({keywords:this.keywords.removeSP()})},edit:function(e){for(var t in this.ope="edit",this.dialogFormVisible=!0,this.topBranch=e.branchCode+"|"+e.branchName,this.branchCode=e.branchCode,this.branchName=e.branchName,e)null==e[t]&&(e[t]="");this.form={id:e.id,ShortName:e.shortName,BankName:e.bankName,CardNo:e.cardNO,AccountHolder:e.accountHolder}}},components:{}}},1303:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".form_footer[data-v-2a6b9be1]{text-align:center}",""])},1728:function(e,t,a){var r=a(1303);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("0c0edd44",r,!0)},2200:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"tag selCommon"},[r("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,"label-width":"80px"}},[r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"销售公司："}},[r("el-input",{model:{value:a.keywords,callback:function(e){a.keywords=e},expression:"keywords"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[r("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),r("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:function(e){return a.add("添加")}}},[a._v("添加新账户")])],1)],1),a._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"min_table smt",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:a.tableData,border:""}},[r("el-table-column",{attrs:{prop:"branchName",label:"总代","min-width":"180"}}),a._v(" "),r("el-table-column",{attrs:{prop:"shortName",label:"账户别名","min-width":"180"}}),a._v(" "),r("el-table-column",{attrs:{prop:"cardNO",label:"卡号","min-width":"180"}}),a._v(" "),r("el-table-column",{attrs:{prop:"accountHolder",label:"开户人","min-width":"180"}}),a._v(" "),r("el-table-column",{attrs:{prop:"bankName",label:"开户行","min-width":"180"}}),a._v(" "),r("el-table-column",{attrs:{prop:"address",label:"操作",width:"200"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.edit(t.row)}}},[a._v("编辑")]),a._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(e){return a.del(t.$index,a.tableData)}}},[a._v("删除")])]}}])})],1),a._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),r("el-dialog",{attrs:{title:"添加账户",visible:a.dialogFormVisible,size:""},on:{"update:visible":function(e){a.dialogFormVisible=e}}},[r("el-form",{staticStyle:{width:"400px"},attrs:{"label-position":"right","label-width":"80px",model:a.form}},[r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"销售公司："}},[r("el-select",{staticStyle:{width:"250px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:a.branchSel},model:{value:a.topBranch,callback:function(e){a.topBranch=e},expression:"topBranch"}},a._l(a.branchList,function(e,t){return r("el-option",{key:t,attrs:{label:e.BranchName,value:e.Code+"|"+e.BranchName}})}),1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"别名"}},[r("el-input",{staticStyle:{width:"250px"},model:{value:a.form.ShortName,callback:function(e){a.$set(a.form,"ShortName",e)},expression:"form.ShortName"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"卡号"}},[r("el-input",{staticStyle:{width:"250px"},model:{value:a.form.CardNo,callback:function(e){a.$set(a.form,"CardNo",e)},expression:"form.CardNo"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"开户人"}},[r("el-input",{staticStyle:{width:"250px"},model:{value:a.form.AccountHolder,callback:function(e){a.$set(a.form,"AccountHolder",e)},expression:"form.AccountHolder"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"开户行"}},[r("el-input",{staticStyle:{width:"250px"},model:{value:a.form.BankName,callback:function(e){a.$set(a.form,"BankName",e)},expression:"form.BankName"}})],1)],1),a._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:a.saveLoading},on:{click:a.sure}},[a._v("确 定")]),a._v(" "),r("el-button",{on:{click:a.cancel}},[a._v("取 消")])],1)],1)],1)},staticRenderFns:[]}},345:function(e,t,a){a(1728);var r=a(98)(a(1065),a(2200),"data-v-2a6b9be1",null);e.exports=r.exports},443:function(e,t,a){"use strict";t.__esModule=!0;var r,n=a(444),s=(r=n)&&r.__esModule?r:{default:r};t.default=function(e,t,a){return t in e?(0,s.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},444:function(e,t,a){e.exports={default:a(445),__esModule:!0}},445:function(e,t,a){a(446);var r=a(2).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},446:function(e,t,a){var r=a(9);r(r.S+r.F*!a(10),"Object",{defineProperty:a(11).f})}});