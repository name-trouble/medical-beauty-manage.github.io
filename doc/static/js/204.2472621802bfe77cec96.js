webpackJsonp([204],{1038:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(37),n=o.n(i),a=o(100),r=o.n(a),s=o(66),l=o.n(s),c=o(102),u=o.n(c),d=o(99),m=o.n(d),f=o(65),p=(o.n(f),o(64));e.default={data:function(){return{path:"",selectItem:{},searMes:"",dialogFormVisible0:!1,dialogFormVisible1:!1,formLabelWidth:"80px",form:{},formList:[],column:[],addIndex:"",editIndex:"",index0:"",index1:"",index2:"",index3:"",currentIndex0:"",currentIndex1:"",currentIndex2:"",currentIndex3:"",item1:[],item2:[],item3:[],data:[],tableData3:[],multipleSelection:[],items:[[{}],[{}],[{}]],flg:!1,allCatlog:[],currentIndex:["999","999","999","999"],dialogFormVisible:[!1,!1,!1],opeIndex:0}},mounted:function(){this.getColumn()},computed:{},methods:{refreshData:function(){this.items.push(),this.currentIndex.push(),this.dialogFormVisible.push()},emptyData:function(n){this.currentIndex.forEach(function(t,e,i){n<e&&(i[e]="999")}),this.items.forEach(function(t,e,i){n<e&&(i[e]=[{}])}),this.refreshData()},getColumn:function(){var s=this;return m()(r.a.mark(function t(){var e,i,n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.all([o.i(p._553)(),o.i(p._550)({keywords:""})]);case 2:e=t.sent,i=u()(e,2),n=i[0],a=i[1],s.column=n,s.tableData3=a;case 8:case"end":return t.stop()}},t,s)}))()},selectColumn:function(i,t,n){var a=this;return m()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.currentIndex[0]=n,t.next=3,o.i(p._207)({code:i.CloumnCode});case 3:e=t.sent,a.allCatlog=e.data,a.items[0]=a.getChilrenList(""),a.emptyData(0);case 7:case"end":return t.stop()}},t,a)}))()},select:function(t,e,i){this.selectItem=t,this.currentIndex[e]=i,e<3&&(this.items[e]=this.getChilrenList(t.code),this.emptyData(e)),this.refreshData(),this.getProperty({keywords:"",columncode:t.cloumnCode,catelogcode:t.code})},add:function(t){this.form.name="","999"==this.currentIndex[t-1]?this.$message({message:"警告!，请先选择上一级",type:"warning"}):(this.opeIndex=t-1,this.dialogFormVisible[0]=!0,this.dialogFormVisible.push())},edit:function(t){"999"==this.currentIndex[t]?this.$message({message:"警告!，请先选择要编辑的选项",type:"warning"}):(this.form.name=this.items[t-1][this.currentIndex[t]].name,this.opeIndex=t-1,this.dialogFormVisible[1]=!0,this.dialogFormVisible.push())},del:function(t){if("999"==this.currentIndex[t])this.$message({message:"警告!，请先选择要删除的选项",type:"warning"});else{this.opeIndex=t-1;var e=this.items[t-1][this.currentIndex[t]];this.DeleteCatelogById({id:e.id,cloumnCode:e.cloumnCode},e.parentCode,t)}},addSure:function(t){if(0==t){var e=void 0;e=0==this.opeIndex?this.column[this.currentIndex[this.opeIndex]]:this.items[this.opeIndex-1][this.currentIndex[this.opeIndex]];var i="";2==this.opeIndex?i="|"+this.items[0][this.currentIndex[1]].code+"|"+this.items[1][this.currentIndex[2]].code+"|":1==this.opeIndex&&(i="|"+this.items[0][this.currentIndex[1]].code+"|");var n={cloumnCode:e.cloumnCode?e.cloumnCode:e.CloumnCode,parentCode:e.code?e.code:"",name:this.form.name,cloumnName:this.column[this.currentIndex[0]].Name,catalogPath:i};this.AddCatalog(n,e.code?e.code:"")}else if(1==t){var a=this.items[this.opeIndex][this.currentIndex[this.opeIndex+1]];this.UpdateCatalog({cloumnCode:a.cloumnCode,id:a.id,name:this.form.name},a.parentCode)}},getChilrenList:function(e){var i=[];return this.allCatlog.forEach(function(t){null==t.parentCode&&(t.parentCode=""),t.parentCode==e&&i.push(t)}),i},down:function(){var e=this;return m()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getProperty({keywords:"",columncode:e.selectItem.cloumnCode,catelogcode:e.selectItem.code});case 1:case"end":return t.stop()}},t,e)}))()},GetCatelogByColumnCode:function(i,n){var a=this;return m()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(p._207)(i);case 2:e=t.sent,a.allCatlog=e.data,a.items[a.opeIndex]=a.getChilrenList(n),a.refreshData();case 6:case"end":return t.stop()}},t,a)}))()},AddCatalog:function(e,i){var n=this;return m()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(p._562)(e);case 2:0<t.sent.success&&(n.dialogFormVisible[0]=!1,n.GetCatelogByColumnCode({code:e.cloumnCode},i));case 4:case"end":return t.stop()}},t,n)}))()},UpdateCatalog:function(e,i){var n=this;return m()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(p._563)(e);case 2:0<t.sent.success&&(n.dialogFormVisible[1]=!1,n.GetCatelogByColumnCode({code:e.cloumnCode},i));case 4:case"end":return t.stop()}},t,n)}))()},DeleteCatelogById:function(e,i,n){var a=this;return m()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(p._564)(e);case 2:0<t.sent.success&&a.GetCatelogByColumnCode({code:e.cloumnCode},i),a.currentIndex[n]="999",a.currentIndex.push();case 6:case"end":return t.stop()}},t,a)}))()},getProperty:function(n){var a=this;return m()(r.a.mark(function t(){var e,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(p._550)(n);case 2:e=t.sent,a.tableData3=e,(i=a).$nextTick(function(){i.check(e)});case 6:case"end":return t.stop()}},t,a)}))()},check:function(t){var e=this;this.$refs.multipleTable.clearSelection(),t.forEach(function(t){1==t.IsChecked&&e.$refs.multipleTable.toggleRowSelection(t)})},handleSelectionChange:function(t){this.multipleSelection=t,this.multipleSelection.push()},addAttributes:function(){var i=this;return m()(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],i.multipleSelection.forEach(function(t){e.push({columnCode:i.selectItem.cloumnCode,catalogCode:i.selectItem.code,propertyCode:t.Code,propertyName:t.Name})}),t.next=4,o.i(p._565)({JsonStr:n()(e)});case 4:0!=t.sent.success&&i.$alert("添加成功","提示",{confirmButtonText:"确定",type:"success"});case 6:case"end":return t.stop()}},t,i)}))()},cancel:function(t){this.dialogFormVisible[t]=!1,this.dialogFormVisible.push()}}}},1417:function(t,e,i){(t.exports=i(215)(!1)).push([t.i,".classification[data-v-6512a882]{display:block;float:left;width:240px;position:relative;margin-top:60px;border:1px solid #dedede;border-right:none;height:560px}.classification[data-v-6512a882]:nth-child(4){border:1px solid #dedede}.classify-tittle[data-v-6512a882]{position:absolute;top:-40px;width:100%;height:40px;color:#666;text-align:center;line-height:40px;font-size:16px}.classification .classify-list[data-v-6512a882]{cursor:pointer;width:100%;height:32px;line-height:32px;font-size:14px;text-indent:21px;color:#666}.classify_container[data-v-6512a882]{height:513px;overflow:auto}.classify-footer[data-v-6512a882]{position:absolute;bottom:0;width:100%;height:47px;background-color:#f2f2f2;line-height:48px;text-indent:110px}.edit-btn[data-v-6512a882]{margin-left:0}.classify-list.active[data-v-6512a882]{background:#cda382;color:#fff}.el-button--primary[data-v-6512a882]{color:#fff;background-color:#cda382;border-color:#cda382}.clear[data-v-6512a882]{clear:both;margin-left:20px}",""])},1842:function(t,e,i){var n=i(1417);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i(216)("67624bca",n,!0)},2315:function(t,e){t.exports={render:function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"selCommon"},[a("div",{staticStyle:{"margin-left":"20px"}},[a("div",{staticClass:"classification"},[a("div",{staticClass:"classify-tittle"},[n._v("栏目")]),n._v(" "),a("ul",{staticClass:"classify_container"},n._l(n.column,function(e,i){return a("li",{key:i,staticClass:"classify-list",class:{active:n.currentIndex[0]===i},on:{click:function(t){return n.selectColumn(e,0,i)}}},[n._v(n._s(e.Name)+"\n                    ")])}),0),n._v(" "),a("div",{staticClass:"classify-footer"})]),n._v(" "),a("div",{staticClass:"classification"},[a("div",{staticClass:"classify-tittle"},[n._v("大类")]),n._v(" "),a("ul",{staticClass:"classify_container"},n._l(n.items[0],function(e,i){return a("li",{key:i,staticClass:"classify-list",class:{active:n.currentIndex[1]===i},on:{click:function(t){return n.select(e,1,i)}}},[n._v(n._s(e.name)+"\n                    ")])}),0),n._v(" "),a("div",{staticClass:"classify-footer"},[a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"plus"},on:{click:function(t){return n.add(1)}}}),n._v(" "),a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){return n.edit(1)}}}),n._v(" "),a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){return n.del(1)}}})],1)]),n._v(" "),a("div",{staticClass:"classification"},[a("div",{staticClass:"classify-tittle"},[n._v("中类")]),n._v(" "),a("ul",{staticClass:"classify_container"},n._l(n.items[1],function(e,i){return a("li",{key:i,staticClass:"classify-list",class:{active:n.currentIndex[2]===i},on:{click:function(t){return n.select(e,2,i)}}},[n._v(n._s(e.name)+"\n                    ")])}),0),n._v(" "),a("div",{staticClass:"classify-footer"},[a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"plus"},on:{click:function(t){return n.add(2)}}}),n._v(" "),a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){return n.edit(2)}}}),n._v(" "),a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){return n.del(2)}}})],1)]),n._v(" "),a("div",{staticClass:"classification"},[a("div",{staticClass:"classify-tittle"},[n._v("小类")]),n._v(" "),a("ul",n._l(n.items[2],function(e,i){return a("li",{key:i,staticClass:"classify-list",class:{active:n.currentIndex[3]===i},on:{click:function(t){return n.select(e,3,i)}}},[n._v(n._s(e.name)+"\n                    ")])}),0),n._v(" "),a("div",{staticClass:"classify-footer"},[a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"plus"},on:{click:function(t){return n.add(3)}}}),n._v(" "),a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){return n.edit(3)}}}),n._v(" "),a("el-button",{staticClass:"edit-btn",attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){return n.del(3)}}})],1)])]),n._v(" "),a("el-dialog",{attrs:{title:"添加：",visible:n.dialogFormVisible[0],size:""},on:{"update:visible":function(t){return n.$set(n.dialogFormVisible,0,t)}}},[a("el-form",{staticStyle:{width:"320px"},attrs:{model:n.form,inline:!0}},[a("el-form-item",{attrs:{label:"名称","label-width":n.formLabelWidth}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off"},model:{value:n.form.name,callback:function(t){n.$set(n.form,"name",t)},expression:"form.name"}})],1)],1),n._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return n.addSure(0)}}},[n._v("确 定")]),n._v(" "),a("el-button",{on:{click:function(t){return n.cancel(0)}}},[n._v("取 消")])],1)],1),n._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:n.dialogFormVisible[1],size:""},on:{"update:visible":function(t){return n.$set(n.dialogFormVisible,1,t)}}},[a("el-form",{staticStyle:{width:"320px"},attrs:{model:n.form,inline:!0}},[a("el-form-item",{attrs:{label:"名称：","label-width":n.formLabelWidth}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off"},model:{value:n.form.name,callback:function(t){n.$set(n.form,"name",t)},expression:"form.name"}})],1)],1),n._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return n.addSure(1)}}},[n._v("确 定")]),n._v(" "),a("el-button",{on:{click:function(t){return n.cancel(1)}}},[n._v("取 消")])],1)],1),n._v(" "),a("div",{staticClass:"clear"},[a("p",{staticStyle:{"line-height":"36px",display:"inline-block","margin-top":"20px"}},[n._v("当前已选分类：“"+n._s(n.selectItem.name)+"”,请选择属性：")]),n._v(" "),a("div",{staticStyle:{display:"inline-block",margin:"20px 0"}},[a("el-input",{staticStyle:{width:"100px",margin:"0 10px"},attrs:{type:"text",placeholder:"搜索"},on:{change:function(t){return n.down(t)}},model:{value:n.searMes,callback:function(t){n.searMes=t},expression:"searMes"}}),n._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:n.addAttributes}},[n._v("确认添加")])],1),n._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","max-width":"1000px","margin-bottom":"20px"},attrs:{data:n.tableData3,border:"","tooltip-effect":"dark","min-height":"400px","max-height":"500","highlight-current-row":""},on:{"selection-change":n.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),n._v(" "),a("el-table-column",{attrs:{prop:"Code",label:"编号",width:"65"}}),n._v(" "),a("el-table-column",{attrs:{label:"属性名称","min-width":"120"},scopedSlots:n._u([{key:"default",fn:function(t){return[n._v(n._s(t.row.Name))]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"EnterWay",label:"属性值的录入方式","min-width":"120",align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[1==t.row.EnterWay?a("span",[n._v("文本框")]):n._e(),n._v(" "),2==t.row.EnterWay?a("span",[n._v("下拉框")]):n._e(),n._v(" "),3==t.row.EnterWay?a("span",[n._v("多选")]):n._e()]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"TextValue","min-width":"300",label:"可选值列表"},scopedSlots:n._u([{key:"default",fn:function(t){return[a("span",[n._v(n._s(t.row.TextValue))])]}}])}),n._v(" "),a("el-table-column",{attrs:{type:"index",width:"70",align:"center"}})],1)],1)],1)},staticRenderFns:[]}},320:function(t,e,i){i(1842);var n=i(98)(i(1038),i(2315),"data-v-6512a882",null);t.exports=n.exports}});