webpackJsonp([105],{1263:function(t,e,n){(t.exports=n(215)(!1)).push([t.i,".form_item_mt10[data-v-19d0e9fb]{margin-right:0}",""])},1688:function(t,e,n){var a=n(1263);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(216)("b62fd888",a,!0)},2160:function(t,e){t.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"actingLedger selCommon"},[n("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:e.formInline,"label-width":"80px"}},[n("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"结算日期："}},[n("el-select",{staticStyle:{width:"100px",float:"left"},attrs:{placeholder:"选择年份"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},e._l(e.yearList,function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})}),1),e._v(" "),n("el-select",{staticStyle:{width:"100px",float:"left"},attrs:{placeholder:"选择月份"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(e.monthList,function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),e._v(" "),n("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"转入客户："}},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:""},on:{change:e.change},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[n("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),n("el-option",{attrs:{label:"销售公司",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"消费商",value:"3"}})],1)],1),e._v(" "),1==e.formInline.type?n("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"医院："}},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.formInline.keywords,callback:function(t){e.$set(e.formInline,"keywords",t)},expression:"formInline.keywords"}},e._l(e.HospitalList,function(t){return n("el-option",{key:t.code,attrs:{label:t.supplierName,value:t.code}})}),1)],1):e._e(),e._v(" "),2==e.formInline.type?n("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"销售公司："}},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:""},model:{value:e.formInline.keywords,callback:function(t){e.$set(e.formInline,"keywords",t)},expression:"formInline.keywords"}},e._l(e.branchList,function(t){return n("el-option",{key:t.code,attrs:{label:t.branchName,value:t.code}})}),1)],1):e._e(),e._v(" "),3==e.formInline.type?n("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"关键字："}},[n("el-input",{staticStyle:{width:"200px"},model:{value:e.formInline.keywords,callback:function(t){e.$set(e.formInline,"keywords",t)},expression:"formInline.keywords"}})],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:" "}},[n("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),n("Export",{attrs:{tHeader:e.tHeader,filterVal:e.filterVal,tableData1:e.tableData1,name:e.name}})],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"smt min_table",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:e.tableData,border:"","max-height":"660","show-summary":"","summary-method":e.getSummaries}},[n("el-table-column",{attrs:{prop:"branchName",label:"客户","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.branchName))]),n("br"),e._v(" "),n("span",[e._v("["+e._s(t.row.branchCode)+"]")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"branchGradeName",label:"等级","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"recA",label:"推荐提成","min-width":"120",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.recA?n("span",[e._v("￥"+e._s(t.row.recA.toQFW()))]):n("span",[e._v("￥0")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"consumeOrderAmount",label:"消费提成","min-width":"120",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.consumeA?n("span",[e._v("￥"+e._s(t.row.consumeA.toQFW()))]):n("span",[e._v("￥0")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"debitAmount",label:"补扣款","min-width":"120",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.debitAmount?n("span",[e._v("￥"+e._s(t.row.debitAmount.toQFW()))]):n("span",[e._v("￥0")])]}}])})],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},264:function(t,e,n){n(1688);var a=n(98)(n(960),n(2160),"data-v-19d0e9fb",null);t.exports=a.exports},436:function(t,e,n){n(439);var a=n(98)(n(437),n(440),"data-v-6c47323e",null);t.exports=a.exports},437:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{tHeader:{},filterVal:{},tableData1:{type:Array},name:""},watch:{tableData1:{handler:function(t){this.otData=t},deep:!0}},data:function(){return{otData:[]}},methods:{handleDownload:function(){var n=this;a.e(220).then(function(){var t=a(448).export_json_to_excel,e=[];e=0!=n.otData.length?n.formatJson(n.filterVal,n.otData):n.formatJson(n.filterVal,n.tableData1),t(n.tHeader,e,n.name)}.bind(null,a)).catch(a.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}}},438:function(t,e,n){(t.exports=n(215)(!1)).push([t.i,".exportBtn[data-v-6c47323e]{background:#fff;border:1px solid #d6d4d4;font-size:14px;color:#666;border-radius:4px}",""])},439:function(t,e,n){var a=n(438);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(216)("fdf4f478",a,!0)},440:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("el-button",{staticClass:"exportBtn",attrs:{type:"primary"},on:{click:this.handleDownload}},[this._v("导出报表")])},staticRenderFns:[]}},443:function(t,e,n){"use strict";e.__esModule=!0;var a,r=n(444),o=(a=r)&&a.__esModule?a:{default:a};e.default=function(t,e,n){return e in t?(0,o.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},444:function(t,e,n){t.exports={default:n(445),__esModule:!0}},445:function(t,e,n){n(446);var a=n(2).Object;t.exports=function(t,e,n){return a.defineProperty(t,e,n)}},446:function(t,e,n){var a=n(9);a(a.S+a.F*!n(10),"Object",{defineProperty:n(11).f})},960:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(100),o=r.n(n),a=r(99),s=r.n(a),i=r(443),l=r.n(i),u=r(65),c=(r.n(u),r(436)),m=r.n(c),d=r(64);e.default={data:function(){var t;return{tableLoading:!1,size:10,total:0,currentPage:1,agentList:[],tableData:[],allData:[],HospitalList:[],branchList:[],formInline:(t={Hospital:"",branch:"",date:"",startTime:"",endTime:"",type:""},l()(t,"branch",""),l()(t,"keywords",""),t),year:(new Date).getFullYear(),month:"",yearList:[],monthList:[],sum:{systemPointsTotal:0,pointAmount:0,remainSystemPoints:0,cardCount:0,cardAmount:0,conAmount:0,consumeOrderAmount:0,unConsumeOrderAmount:0,recAmount:0,recomAmount:0,unRecomAmount:0,debitAmount:0}}},computed:{tHeader:function(){return["客户","等级","推荐提成","消费提成","补扣款"]},filterVal:function(){return["branchName","branchGradeName","recA","consumeA","debitAmount"]},tableData1:function(){return this.allData},name:function(){return"消费提成"}},mounted:function(){this.getBaseDate(),this.GetDropDownPermission()},methods:{change:function(){this.formInline.keywords=""},getBaseDate:function(){this.yearList=[(new Date).getFullYear()+1,(new Date).getFullYear(),(new Date).getFullYear()-1,(new Date).getFullYear()-2];for(var t=1;t<13;t++)t<10?this.monthList.push("0"+t):this.monthList.push(t);var e=(new Date).getMonth();9<e?this.month=e:0==e?(this.year=(new Date).getFullYear()-1,this.month=12):this.month="0"+e},GetDropDownPermission:function(){var a=this;return s()(o.a.mark(function t(){var e,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.i(d.d)({typeId:2});case 3:return e=t.sent,a.branchList=e.data,t.next=7,r.i(d.d)({typeId:1});case 7:n=t.sent,a.HospitalList=n.data,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,a,[[0,11]])}))()},handleSizeChange:function(t){this.size=t,this.pageChange()},handleCurrentChange:function(t){this.currentPage=t,this.pageChange()},onSubmit:function(){for(var t in this.currentPage=1,this.sum)this.sum[t]=0;this.GetBranchFinanceSummary()},GetBranchFinanceSummary:function(){var n=this;return s()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.tableLoading=!0,t.next=3,r.i(d._466)({Keywords:n.formInline.keywords,TypeId:n.formInline.type,CommissionDate:n.year+"-"+n.month});case 3:(e=t.sent).status?(e.data.forEach(function(t){for(var e in t)null==t[e]&&(t[e]=0);t.recAmount=t.recomAmount.add(t.unRecomAmount),t.conAmount=t.unConsumeOrderAmount.add(t.consumeOrderAmount)}),n.allData=e.data,n.total=e.count,n.getTotal(),n.pageChange()):n.$message.error("查询失败"),n.tableLoading=!1;case 6:case"end":return t.stop()}},t,n)}))()},getSummaries:function(){return["总合计","",this.sum.recomAmount.toQFW(),this.sum.consumeOrderAmount.toQFW(),this.sum.debitAmount.toQFW()]},pageChange:function(){this.tableData=this.allData.slice((this.currentPage-1)*this.size,this.currentPage*this.size)},getTotal:function(){var e=this;this.allData.forEach(function(t){t.recA=t.unRecomAmount.add(t.recomAmount),t.consumeA=t.unConsumeOrderAmount.add(t.consumeOrderAmount),e.sum.recomAmount=e.sum.recomAmount.add(t.recA),e.sum.consumeOrderAmount=e.sum.consumeOrderAmount.add(t.consumeA),e.sum.debitAmount=e.sum.debitAmount.add(t.debitAmount)})}},components:{Export:m.a}}}});