webpackJsonp([169],{1066:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(66),s=r.n(a),n=r(102),c=r.n(n),i=r(37),l=r.n(i),o=r(100),u=r.n(o),d=r(99),p=r.n(d),m=r(65),h=(r.n(m),r(485)),b=(r.n(h),r(64));r(22);e.default={data:function(){return{date:"",total:0,size:10,currentPage:1,dialogData:[],appDialog:!1,listTitle:"",totalDetail:0,listData:[],dialogList:!1,total1:0,size1:10,currentPage1:1,loading:!1,dialog:!1,title:"",activeName:"first",dialogFormVisible:!1,formInline:{date1:"",date2:"",type:"",keyWords:"",hospital:"",payType:"",grade:""},startDate:"",endDate:"",tableData:[],detData:[],detDataAll:[],placeData:[],hospitalList:[],gradeList:[],sumdata:[]}},mounted:function(){this.GetDropDownPermission()},methods:{getSummaries:function(){return["合计","","",this.sumdata[0].disCountTicketCount,this.sumdata[0].entranceTicketCount,this.sumdata[0].cashTicketCount,this.sumdata[0].remainSystemPoints,this.sumdata[0].remainGoldCoin,this.sumdata[0].balances,this.sumdata[0].remainAmount]},getAppDet:function(a){var n=this;return p()(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.appDialog=!0,t.next=3,r.i(b._137)({mobile:a.phoneNumber});case 3:e=t.sent,n.dialogData=e.data;case 5:case"end":return t.stop()}},t,n)}))()},getListDet:function(n,i,l){var o=this;return p()(u.a.mark(function t(){var e,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.listData=[],o.listTitle=l,o.dialogList=!0,t.next=5,r.i(b._370)({branchCode:n.branchCode,startDate:"",endDate:""});case 5:e=t.sent,a=e.data.filter(function(t){if(t.payType==i)return t}),o.listData=a;case 8:case"end":return t.stop()}},t,o)}))()},handleClick:function(t){0==t.index?this.placeData=this.detDataAll.filter(function(t){if(t.usedTimes!=t.totalTimes)return t}):this.placeData=JSON.parse(l()(this.detDataAll)),this.currentPage1=1,this.getPageData()},GetBranchTicketDetail:function(a){var n=this;return p()(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.i(b._371)(a);case 2:e=t.sent,n.total1=e.count,n.detDataAll=e.data,n.handleClick({index:0});case 6:case"end":return t.stop()}},t,n)}))()},getPageData:function(){this.detData=this.placeData.slice((this.currentPage1-1)*this.size1,this.currentPage1*this.size1)},dateSelect:function(t){0!=t.length?(t=t.formatDates(),this.formInline.date1=t.substring(0,10),this.formInline.date2=t.substring(13)):(this.formInline.date1="",this.formInline.date2="")},GetDropDownPermission:function(){var o=this;return p()(u.a.mark(function t(){var e,a,n,i,l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.all([r.i(b.l)("0006"),r.i(b.d)({typeId:1}),r.i(b._319)()]);case 2:e=t.sent,a=c()(e,3),n=a[0],i=a[1],l=a[2],o.payWayList=n,o.hospitalList=i.data,o.gradeList=l,o.search();case 11:case"end":return t.stop()}},t,o)}))()},GetBranchAccountAll:function(a){var n=this;return p()(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.i(b._372)(a);case 3:e=t.sent,n.sumdata=e.sumdata,n.total=e.count,n.tableData=e.data,n.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,n,[[0,10]])}))()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.loading=!0,this.GetBranchAccountAll({keyWords:this.formInline.keyWords.removeSP(),hospitalCode:this.formInline.hospital,pageIndex:this.currentPage,pageSize:this.size,startDate:this.formInline.date1,endDate:this.formInline.date2,GradeCode:this.formInline.grade})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.size=t,this.search()},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t,this.search()},handleSizeChange1:function(t){console.log("每页 "+t+" 条"),this.size1=t,this.getPageData()},handleCurrentChange1:function(t){console.log("当前页: "+t),this.currentPage1=t,this.getPageData()},getDet:function(e,a,n){var i=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.title=n,i.dialogFormVisible=!0,i.activeName="first",i.placeData=[],i.GetBranchTicketDetail({BranchCode:e.branchCode,TicketsType:a});case 5:case"end":return t.stop()}},t,i)}))()}},components:{}}},1234:function(t,e,a){(t.exports=a(215)(!1)).push([t.i,".dialogRecLi[data-v-0bbb651f]{width:100%;height:40px;line-height:40px;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;background:#c9ecc9}.dialogRecLi.header[data-v-0bbb651f]{background:#dfe6ec}.li_header[data-v-0bbb651f],.li_tb[data-v-0bbb651f]{-webkit-box-flex:1;-ms-flex:1;flex:1}.li_tb[data-v-0bbb651f]{border-bottom:1px solid #f9f9f9}.dialogRecLi.red[data-v-0bbb651f]{background:#ecaeae}",""])},1659:function(t,e,a){var n=a(1234);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(216)("5cb877d4",n,!0)},2131:function(t,e){t.exports={render:function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"rechargeList selCommon"},[n("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:a.formInline}},[n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"注册时间：","label-width":"80px"}},[n("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:a.dateSelect},model:{value:a.date,callback:function(t){a.date=t},expression:"date"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"消费商：","label-width":"80px"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"姓名/编号/卡号/手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.onSubmit(t)}},model:{value:a.formInline.keyWords,callback:function(t){a.$set(a.formInline,"keyWords",t)},expression:"formInline.keyWords"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院：","label-width":"80px"}},[n("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.hospital,callback:function(t){a.$set(a.formInline,"hospital",t)},expression:"formInline.hospital"}},a._l(a.hospitalList,function(t,e){return n("el-option",{key:e,attrs:{label:t.supplierName,value:t.code}})}),1)],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"代理等级：","label-width":"80px"}},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:a.onSubmit},model:{value:a.formInline.grade,callback:function(t){a.$set(a.formInline,"grade",t)},expression:"formInline.grade"}},[n("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),a._l(a.gradeList,function(t){return n("el-option",{key:t.Code,attrs:{label:t.BranchGradeName,value:t.Code}})})],2)],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[n("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")])],1)],1),a._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"min_table smt",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:"","summary-method":a.getSummaries,"show-summary":""}},[n("el-table-column",{attrs:{prop:"branchName",label:"代理商","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(t){return[t.row.branchName?n("span",[a._v(a._s(t.row.branchName)+"["+a._s(t.row.branchCode)+"]")]):a._e()]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"branchGradeName",label:"代理商等级","min-width":"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"hospitalName",label:"医院","min-width":"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"disCountTicketCount",label:"折扣券余额","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.disCountTicketCount?n("span",[a._v("0")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return a.getDet(e.row,1,"折扣券")}}},[a._v(a._s(e.row.disCountTicketCount))])]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"entranceTicketCount",label:"门票余额","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.entranceTicketCount?n("span",[a._v("0")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return a.getDet(e.row,3,"门票")}}},[a._v(a._s(e.row.entranceTicketCount))])]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"cashTicketCount",label:"现金券余额","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.cashTicketCount?n("span",[a._v("0")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return a.getDet(e.row,2,"现金券")}}},[a._v(a._s(e.row.cashTicketCount))])]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"remainSystemPoints",label:"医院积分","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.remainSystemPoints?n("span",[a._v("0")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return a.getListDet(e.row,2,"医院积分流水")}}},[a._v(a._s(e.row.remainSystemPoints))])]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"remainGoldCoin",label:"纹绣积分","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.remainGoldCoin?n("span",[a._v("0")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return a.getListDet(e.row,3,"纹绣积分流水")}}},[a._v(a._s(e.row.remainGoldCoin))])]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"balances",label:"APP积分","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.balances?n("span",[a._v("0")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return a.getAppDet(e.row,2,"APP积分流水")}}},[a._v(a._s(e.row.balances))])]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"remainAmount",label:"余额","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.remainAmount?n("span",[a._v("0")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return a.getListDet(e.row,1,"余额流水")}}},[a._v(a._s(e.row.remainAmount))])]}}])})],1),a._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),n("el-dialog",{attrs:{title:a.title,visible:a.dialogFormVisible,size:""},on:{"update:visible":function(t){a.dialogFormVisible=t}}},[n("div",{staticStyle:{width:"500px"}},[n("el-tabs",{attrs:{type:"card"},on:{"tab-click":a.handleClick},model:{value:a.activeName,callback:function(t){a.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:a.title+"余额",name:"first"}}),a._v(" "),n("el-tab-pane",{attrs:{label:"全部"+a.title,name:"second"}})],1)],1),a._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"min_table smt",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.detData,border:""}},[n("el-table-column",{attrs:{prop:"tickInfoCode",label:"券种编号","min-width":"150"}}),a._v(" "),n("el-table-column",{attrs:{prop:"createOn",label:"登记日期","min-width":"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"createBy",label:"登记人","min-width":"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"tickName",label:"券名称","min-width":"150"}}),a._v(" "),n("el-table-column",{attrs:{prop:"hospitalName",label:"数量","min-width":"80"}}),a._v(" "),n("el-table-column",{attrs:{prop:"totalTimes",label:"总次数","min-width":"90"}}),a._v(" "),n("el-table-column",{attrs:{prop:"usedTimes",label:"已用次数","min-width":"90"}})],1),a._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":a.currentPage1,"page-sizes":[10,20,30,40],"page-size":a.size1,layout:"total, sizes, prev, pager, next, jumper",total:a.total1},on:{"size-change":a.handleSizeChange1,"current-change":a.handleCurrentChange1}})],1)],1),a._v(" "),n("el-dialog",{attrs:{title:a.listTitle,visible:a.dialogList,size:""},on:{"update:visible":function(t){a.dialogList=t}}},[n("div",{staticStyle:{width:"970px"}},[n("el-table",{staticStyle:{width:"950px","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.listData,border:"",height:"350"}},[n("el-table-column",{attrs:{prop:"createOn",label:"充值日期",width:"100"},scopedSlots:a._u([{key:"default",fn:function(t){return[t.row.createOn?n("span",[a._v("  "+a._s(t.row.createOn.substring(0,10)))]):a._e()]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"fromBranchName",label:"来源","min-width":"70"}}),a._v(" "),n("el-table-column",{attrs:{prop:"intoBranchName",label:"转到","min-width":"70"}}),a._v(" "),n("el-table-column",{attrs:{prop:"fromBranchName",label:"类型",width:"70"},scopedSlots:a._u([{key:"default",fn:function(t){return[1==t.row.payType?n("span",[a._v("预付款")]):a._e(),a._v(" "),2==t.row.payType?n("span",[a._v("医院积分")]):a._e(),a._v(" "),3==t.row.payType?n("span",[a._v("纹绣积分")]):a._e()]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"spendAmount",label:"金额",width:"80"}}),a._v(" "),n("el-table-column",{attrs:{prop:"isCommission",label:"提成",width:"60"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:a._s(1==t.row.isCommission?"是":"否")}})]}}])}),a._v(" "),n("el-table-column",{attrs:{prop:"systemPoints",label:"积分","min-width":"80"}}),a._v(" "),n("el-table-column",{attrs:{prop:"amount",label:"预付款",width:"80"}}),a._v(" "),n("el-table-column",{attrs:{prop:"createBy",label:"操作人","min-width":"80"}}),a._v(" "),n("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"120","show-overflow-tooltip":""}})],1),a._v("\n            共计："+a._s(a.totalDetail)+"条数据"),n("br")],1)]),a._v(" "),n("el-dialog",{attrs:{title:"APP积分流水",size:""},model:{value:a.appDialog,callback:function(t){a.appDialog=t},expression:"appDialog"}},[n("div",{staticClass:"dialogRecLi header"},[n("span",{staticClass:"li_header"},[a._v("积分获取时间")]),a._v(" "),n("span",{staticClass:"li_header"},[a._v("金额")]),a._v(" "),n("span",{staticClass:"li_header"},[a._v("积分来源")]),a._v(" "),n("span",{staticClass:"li_header"},[a._v("描述")])]),a._v(" "),n("ul",{staticStyle:{width:"700px","max-height":"600px",overflow:"auto"}},a._l(a.dialogData,function(t,e){return n("li",{key:e,staticClass:"dialogRecLi",class:{red:5==t.sourceType||4==t.sourceType}},[n("span",{staticClass:"li_tb"},[a._v(a._s(t.createOn))]),a._v(" "),n("span",{staticClass:"li_tb"},[a._v(a._s(5==t.sourceType||4==t.sourceType?"-":"")+a._s(t.quantity))]),a._v(" "),n("span",{staticClass:"li_tb"},[a._v(a._s(t.friendMobile))]),a._v(" "),n("span",{staticClass:"li_tb"},[a._v(a._s(t.description))])])}),0)])],1)},staticRenderFns:[]}},346:function(t,e,a){a(1659);var n=a(98)(a(1066),a(2131),"data-v-0bbb651f",null);t.exports=n.exports},485:function(t,e,a){var n=a(487);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(216)("c305eb94",n,!0)},487:function(t,e,a){(t.exports=a(215)(!1)).push([t.i,".el-autocomplete-suggestion li{line-height:20px;padding:10px;border-bottom:1px solid #eef1f6}.el-autocomplete-suggestion li .select_namered{color:red}.el-autocomplete-suggestion li .select_nameblack{color:#000}.reportManage .el-form-item__error{color:#ff4949;font-size:12px;padding-top:4px;position:static!important;top:100%;left:0}.el-upload--picture-card,.el-upload-list--picture-card .el-upload-list__item{width:100px!important;height:100px!important}.el-upload--picture-card{background-color:#fbfdff;border:1px dashed #c0ccda;border-radius:6px;box-sizing:border-box;cursor:pointer;line-height:100px;vertical-align:top}.addRP .el-table__fixed-right{bottom:0!important}.el-upload-list .el-progress{width:100px!important}.el-upload-list .el-progress-circle{width:100px!important;height:100px!important}",""])}});