webpackJsonp([44],{1078:function(e,t,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(37),n=p.n(a),r=p(66),d=p.n(r),o=p(102),f=p.n(o),l=p(100),h=p.n(l),i=p(99),s=p.n(i),b=p(64),c=p(22),m=p(567),u=p.n(m);t.default={props:{baseData:{type:Object}},data:function(){return{saveLoading:!1,editMes:{},payWayList:[],hosForm:{},supplyList:[],show:!1,accountList:[],IdentityType:"",bonusData:[],form:{type:"",PayTypeName:"",PayType:"",RealAmount:0,Memo:"",ReceiveAccount:"",sxf:0,payDate:new Date},dialogFormVisible:!1,dialogTableVisible1:!1,payTable:[],ReferrerCode:"",integral:0,ticketsList:[],packageAll:[],packageVal:[],gradeList:[],tableData:[],ruleForm:{order:!1,formNum:"",Hospital:"",identityType:"",payAmount:"",grade:"",BranchName:"",Sex:"",Code:"",BranchGradeName:"",PhoneNumber:"",Pledge:""},packageList:[],rules:{Hospital:[{required:!0,message:"请选择",trigger:"change"}],identityType:[{required:!0,message:"请选择",trigger:"change"}],grade:[{required:!0,message:"请选择",trigger:"change"}]},upgradeMes:{ReferrerCode:""},referChange:!1,newrefer:""}},computed:{total:function(){var t=0;return this.payTable&&0<this.payTable.length?this.payTable.forEach(function(e){t+=Number(e.RealAmount)}):t=0,t}},watch:{baseData:{handler:function(){this.copyWorth(this.baseData)},deep:!0},"ruleForm.grade":{handler:function(e){var t=this,a="";0<e.length&&(a=e.split("|")[0]);var r="";this.gradeList.forEach(function(e){e.Code==a&&(r=e.OrderNum,"终结"==e.GradeProperty?t.show=!0:t.show=!1)}),this.packGradeSelect(r),this.getBranchGradeFee({MemberCode:this.ruleForm.Code,MemberGradeCode:a,BranchCode:this.ReferrerCode})},deep:!0},packageVal:{handler:function(e){this.getTickSplit(e)},deep:!0}},mounted:function(){this.getBranchGradeAll()},filters:{filterFunB:function(e){var t=0;return e&&0<e.length?e.forEach(function(e){t+=Number(e.Bonus)}):t=0,t}},methods:{AddBranchUpgradeApply:function(a){var r=this;return s()(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.i(b._390)(a);case 2:(t=e.sent).status?(r.$message({message:"申请成功",type:"success"}),r.$emit("upClose",close)):r.$message.error("升级失败"+t.errorMessage);case 4:case"end":return e.stop()}},e,r)}))()},paySelect:function(){this.form.PayTypeName=this.form.type.name,this.form.PayType=this.form.type.value},getBranchGradeFee:function(a){var r=this;return s()(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a)return e.next=4,p.i(b._391)(a);e.next=9;break;case 4:t=e.sent,r.ruleForm.payAmount=t.price,r.ruleForm.Pledge=t.pledge,e.next=9;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,r,[[0,11]])}))()},upgradeBranch:function(a){var r=this;return s()(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.saveLoading=!0,e.next=4,p.i(b._392)(a);case 4:(t=e.sent).success?(r.$message({message:"升级成功",type:"success"}),r.$emit("upClose",close)):r.$message.error("升级失败"+t.error),r.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.$message.error("升级失败");case 13:case"end":return e.stop()}},e,r,[[0,9]])}))()},getBranchGradeAll:function(){var u=this;return s()(h.a.mark(function e(){var t,a,r,o,n,l,i,s,c,m;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={startdate:"",enddate:"",suppliername:"",suptypecode:"",phonenumber:"",pageindex:1,pagesize:999},e.next=4,d.a.all([p.i(b._319)(),p.i(b.x)(t),p.i(b.l)("0019"),p.i(b.l)("0006"),p.i(b._354)(),p.i(b._353)(),p.i(b._393)({code:u.baseData.Code})]);case 4:return a=e.sent,r=f()(a,7),o=r[0],n=r[1],l=r[2],i=r[3],s=r[4],c=r[5],m=r[6],e.next=15,o;case 15:u.gradeList=e.sent,u.accountList=l,i.forEach(function(e){Number(e.DataCode)<7&&u.payWayList.push({name:e.DataName,value:e.DataCode})}),u.supplyList=n,u.packageAll=s,u.ticketsList=c,u.copyWorth(u.baseData),u.referChange=m.data[0].code!=u.baseData.ReferrerCode,u.newrefer=m.data[0].code==u.baseData.ReferrerCode?"":m.data[0].branchName,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0);case 29:case"end":return e.stop()}},e,u,[[0,26]])}))()},packGradeSelect:function(t){var a=[];this.gradeList.forEach(function(e){e.OrderNum>=t&&a.push(e.OrderNum)}),a=this.removeDup(a)},removeDup:function(e){var t=[],a=e.length;e.sort();for(var r=0;r<a;r++)e[r]!=e[r+1]?t.push(e[r]):a-1<=r&&t.push(e[r+1]);this.packageSelect(t,this.packageAll)},packageSelect:function(e,t){var a=this;this.packageList=[],this.packageVal=[];for(var r=0;r<e.length;r++)for(var o=0;o<t.length;o++)e[r]==t[o].OrderNum&&(this.packageList[r]||this.packageList.push([]),this.packageList[this.packageList.length-1].push(t[o]));this.packageList.forEach(function(e){a.packageVal.push({code:""})})},getTickSplit:function(e){for(var t=[],a=0;a<e.length;a++)for(var r=0;r<this.ticketsList.length;r++)0!=e[a].code.length&&e[a].code==this.ticketsList[r].ConPacCode&&(this.ticketsList[r].TickCode="",t.push(this.ticketsList[r]));this.tableData=this.removeDu(t),this.integral=this.recharge()},removeDu:function(e){for(var t=[],a=JSON.parse(n()(e)),r=0;r<e.length-1;r++)for(var o=r+1;o<e.length;o++)if(e[r].TickInfoCode==e[o].TickInfoCode){a[o].TicNum+=a[r].TicNum,a[r].dul=!0;break}return a.forEach(function(e){e.dul||t.push(e)}),t},recharge:function(){var a=this,r=0;return this.packageVal.forEach(function(e){for(var t=0;t<a.packageAll.length;t++)if(e.code==a.packageAll[t].ConPacCode){r+=Number(a.packageAll[t].JifenRecharge);break}}),r},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;a.payTable.forEach(function(e){e.BranchCode=a.baseData.Code});var t={formNO:a.ruleForm.formNum,branchCode:a.baseData.Code,branchName:a.baseData.BranchName,identityType:a.ruleForm.identityType,branchOrderPayList:n()(a.payTable),createBy:p.i(c.b)("userName"),createUserId:p.i(c.b)("userId"),branchGradeCode:a.baseData.BranchGradeCode,branchGradeName:a.ruleForm.BranchGradeName,targetBranchGradeCode:a.ruleForm.grade.split("|")[0],targetBranchGradeName:a.ruleForm.grade.split("|")[1],referrerCode:a.baseData.ReferrerCode,referrerName:a.baseData.ReferrerName,currentAmount:a.ruleForm.payAmount,payAmount:a.total};a.show&&(t.hospitalCode=a.ruleForm.Hospital.split("|")[0],t.hospitalName=a.ruleForm.Hospital.split("|")[1]),a.AddBranchUpgradeApply(t)})},packageTurn:function(e){var t=[];return e.forEach(function(e){t.push({ConPacCode:e.ConPacCode,createUserId:p.i(c.b)("userId"),createBy:p.i(c.b)("userName"),TickInfoCode:e.TickInfoCode,TicketCode:e.TicketCode,TicketsType:e.TicketsType,ProjCodes:e.ProjCodes,UseCount:e.UseCount,TicNum:e.TicNum,ProjCodesNames:e.ProjCodesNames})}),t},resetForm:function(){this.$emit("upClose",close),this.ruleForm.grade=""},copyWorth:function(e){this.ReferrerCode=e.ReferrerCode,this.ruleForm.Code=e.Code,this.ruleForm.BranchName=e.BranchName,this.ruleForm.BranchGradeCode=e.BranchGradeCode,this.ruleForm.BranchGradeName=this.getGradeName(e.BranchGradeCode),this.ruleForm.PhoneNumber=e.PhoneNumber,this.ruleForm.Sex=1==e.Sex?"男":"女",this.IdentityType=e.IdentityType},getGradeName:function(t){var a="",r=[],o="";return this.gradeList.forEach(function(e){e.Code==t&&(a=e.BranchGradeName,o=e.OrderNum)}),this.gradeList.forEach(function(e){e.OrderNum<o&&0!=e.OrderNum&&r.push(e)}),this.gradeList=r,a},conPackSplit:function(e){var t=[];return 0==e.length?"":(e.forEach(function(e){t.push(e.code)}),t.join(",")+","+this.baseData.ConPackage)},add:function(){this.dialogTableVisible1=!0,this.form={type:"",PayTypeName:"",PayType:"",RealAmount:0,Memo:"",ReceiveAccount:"",sxf:0,payDate:new Date}},paySure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.payTable.push({PayType:t.form.PayType,PayTypeName:t.form.PayTypeName,Memo:t.form.Memo,RealAmount:t.form.RealAmount,ReceiveAccount:t.form.ReceiveAccount,ProcFee:t.form.sxf,payDate:t.form.payDate?t.form.payDate.formatDate("yyyy-MM-dd"):""}),t.dialogTableVisible1=!1,t.$refs.form.resetFields()})},payCancel:function(){this.dialogTableVisible1=!1,this.$refs.form.resetFields()},deleteRow:function(e,t){t.splice(e,1)},payOpe:function(e){e.PayType&&this.payTable.push(JSON.parse(n()(e))),this.dialogTableVisible1=!1}},components:{payInfo:u.a}}},1083:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(66),c=s.n(a),r=s(102),m=s.n(r),o=s(100),u=s.n(o),n=s(99),p=s.n(n),l=s(65),i=(s.n(l),s(436)),d=s.n(i),f=s(2072),h=s.n(f),b=s(517),_=s.n(b),v=s(22),y=s(64);t.default={data:function(){return{ExportLoading:!1,typeCode:s.i(v.d)("typeCode"),hospitalList:"",IdentityType:"",options:[],loading:!1,referList:[],baseData:"",bankList:[],eduList:[],industryList:[],origionList:[],gradeList:[],currentPage:1,detailCode:"",dialogFormVisible:[!1,!1,!1,!1,!1,!1],form:{name:"",region:""},formLabelWidth:"90px",total:0,size:10,date:"",formInline:{date1:"",date2:"",grade:"",referrerName:"",branchName:"",region:"",IsEnable:"0",hospital:"",IsPayOff:"",cardNO:"",topBranch:""},tableData:[],openCode:"",topBranchList:[],allData:[]}},computed:{tHeader:function(){return["编号","消费商","注册日期","推荐人","医院","联系电话","消费商卡号","来源渠道","代理等级","缴纳会费","已缴会费","是否结清","状态"]},filterVal:function(){return["Code","BranchName","RegistDate","ReferrerName","HospitalName","PhoneNumber","CardNO","SourcWayeCode","BranchGradeName","PayAmount","RealPayAmount","IsPayOff","IsEnable"]},tableData1:function(){var a=this;return this.allData.forEach(function(e,t){e.RegistDate?e.RegistDate=e.RegistDate.substring(0,10):e.RegistDate="",e.IsPayOff=e.IsPayOff?"已结清":"未结清",e.IsEnable=a.getStatus(e.IsEnable)}),this.allData},name:function(){return"代理"}},mounted:function(){this.getBranchGradeAll()},methods:{getStatus:function(e){switch(e){case 0:return"未启用";case 1:return"已启用";case 2:return"已退会"}},exportTbale:function(){this.ExportLoading=!0,this.getBranchByConditions({referrerName:this.formInline.referrerName.removeSP(),branchName:this.formInline.branchName.removeSP(),branchGradeCode:this.formInline.grade,sourcWayeCode:this.formInline.region,startDate:this.formInline.date1,endDate:this.formInline.date2,pageIndex:this.currentPage,pageSize:this.total,IsEnable:this.formInline.IsEnable,hospitalCode:this.formInline.hospital,IsPayOff:this.formInline.IsPayOff,cardNO:this.formInline.cardNO,TopBranch:this.formInline.topBranch},"export")},EnableBranch:function(a){var r=this;return p()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.i(y._389)(a);case 3:(t=e.sent).success?(r.$message({message:"启用成功",type:"success"}),r.getTableDate()):r.$message.error("启用失败"+t.errorMessage),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),r.$message.error("启用失败");case 11:case"end":return e.stop()}},e,r,[[0,7]])}))()},getBranchGradeAll:function(){var i=this;return p()(u.a.mark(function e(){var t,a,r,o,n,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.all([s.i(y.d)({typeId:"2"}),s.i(y.d)({typeId:1}),s.i(y._319)(),s.i(y._62)()]);case 3:t=e.sent,a=m()(t,4),r=a[0],o=a[1],n=a[2],l=a[3],i.topBranchList=r.data,i.hospitalList=o.data,i.formInline.hospital=i.hospitalList[0].code,i.gradeList=n,i.baseMesSplit(l),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}},e,i,[[0,16]])}))()},getBranchByConditions:function(a,r){var o=this;return p()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.i(y.y)(a);case 3:t=e.sent,o.loading=!1,t.forEach(function(e){0==e.ComplateRange||e.ComplateRange?e.ComplateRange=e.ComplateRange.mul(100):e.ComplateRange=0}),r?(o.ExportLoading=!1,o.allData=t,setTimeout(function(){o.$refs.exportTable.handleDownload()},10)):(o.tableData=t,o.tableData.push(),0!=t.length&&(o.total=t[0].RecordCount)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,o,[[0,9]])}))()},dateSelect:function(e){e.length?(e=e.formatDates(),this.formInline.date1=e.substring(0,10),this.formInline.date2=e.substring(13)):(this.formInline.date1="",this.formInline.date2="")},onSubmit:function(){console.log("submit!"),this.currentPage=1,this.getTableDate(1)},handleSizeChange:function(e){this.size=e,this.getTableDate()},handleCurrentChange:function(e){this.currentPage=e,this.getTableDate()},upClose:function(){this.dialogOpe(0,!1,1)},dialogOpe:function(e,t,a){this.dialogFormVisible[e]=t,this.dialogFormVisible.push(),a&&this.getTableDate()},upgradeApply:function(e,t){this.dialogOpe(0,!0),this.baseData=t[e],this.baseData.from="0"},DetailMes:function(e,t){this.detailCode=t[e].Code,this.dialogOpe(2,!0)},open:function(o,n){var l=this;return p()(u.a.mark(function e(){var t,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.openCode=n[o].Code,e.next=3,s.i(y._51)({branchcode:n[o].Code});case 3:t=e.sent,a="",1==t.Branch.IdentityType?"新策略":"老策略",0<t.CPOList.length||0<t.Branch.BranchPoints||(a="该代理未选择套餐!"),l.IdentityType=n[o].Identit,r=l.$createElement,l.$msgbox({title:"提示",message:r("p",null,[r("div",{style:"color:red"},a),r("span",null,"是否启用? ")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(e,t,a){"confirm"===e&&(t.confirmButtonLoading=!0,t.confirmButtonText="执行中...",l.openSure(),t.confirmButtonLoading=!1),a()}}).then(function(e){});case 10:case"end":return e.stop()}},e,l)}))()},openSure:function(){this.EnableBranch({branchcode:this.openCode})},baseMesSplit:function(e){var t=this;e.forEach(function(e){"0001"==e.BusinessCode&&t.eduList.push(e),"0002"==e.BusinessCode&&t.industryList.push(e),"0003"==e.BusinessCode&&t.origionList.push(e),"0004"==e.BusinessCode&&t.bankList.push(e)})},getTableDate:function(){this.loading=!0,this.getBranchByConditions({referrerName:this.formInline.referrerName.removeSP(),branchName:this.formInline.branchName.removeSP(),branchGradeCode:this.formInline.grade,sourcWayeCode:this.formInline.region,startDate:this.formInline.date1,endDate:this.formInline.date2,pageIndex:this.currentPage,pageSize:this.size,IsEnable:this.formInline.IsEnable,hospitalCode:this.formInline.hospital,IsPayOff:this.formInline.IsPayOff,cardNO:this.formInline.cardNO,TopBranch:this.formInline.topBranch})}},components:{Export:d.a,upGrade:h.a,agentDetail:_.a}}},1267:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".clear[data-v-1b795402]{clear:both}.pic[data-v-1b795402]{width:60px;height:60px;border-radius:60px;background:url("+a(510)+") no-repeat 50%;background-size:100%;overflow:hidden;margin-right:10px}.mes[data-v-1b795402]{margin-left:20px;line-height:26px}",""])},1288:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1692:function(e,t,a){var r=a(1267);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("b0b561e0",r,!0)},1713:function(e,t,a){var r=a(1288);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("f420210c",r,!0)},2072:function(e,t,a){a(1692);var r=a(98)(a(1078),a(2164),"data-v-1b795402",null);e.exports=r.exports},2164:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"upGrade"},[r("div",{staticClass:"clear"},[a._m(0),a._v(" "),r("div",{staticClass:"mes left"},[r("span",[a._v(a._s(a.ruleForm.BranchName)+" "+a._s(a.ruleForm.Sex))]),r("br"),a._v(" "),r("span",[a._v("代理编号："+a._s(a.ruleForm.Code))]),a._v("  \n            "),r("span",[a._v("代理等级："+a._s(a.ruleForm.BranchGradeName)+"  手机号码："+a._s(a.ruleForm.PhoneNumber))]),r("br"),a._v(" "),r("span",[a._v("推荐人："+a._s(a.baseData.ReferrerName))])])]),a._v(" "),r("el-col",{staticStyle:{"line-height":"36px","font-size":"16px","font-weight":"bold"},attrs:{span:24}},[a._v("填写升级信息")]),a._v(" "),r("div",{staticClass:"clear",staticStyle:{"margin-top":"20px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:a.ruleForm,rules:a.rules,inline:!0,"label-width":"110px"}},[r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticClass:"form_item form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"升级等级：",prop:"grade"}},[r("el-select",{staticClass:"form_select_2",attrs:{placeholder:"请选择等级"},model:{value:a.ruleForm.grade,callback:function(e){a.$set(a.ruleForm,"grade",e)},expression:"ruleForm.grade"}},a._l(a.gradeList,function(e){return r("el-option",{key:e.Code,attrs:{label:e.BranchGradeName,value:e.Code+"|"+e.BranchGradeName}})}),1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"推荐提成策略：",prop:"identityType"}},[r("el-select",{staticClass:"form_select_2",attrs:{placeholder:"请选择"},model:{value:a.ruleForm.identityType,callback:function(e){a.$set(a.ruleForm,"identityType",e)},expression:"ruleForm.identityType"}},[r("el-option",{attrs:{label:"新策略",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"老策略",value:"2"}})],1)],1),a._v(" "),a.show?r("el-form-item",{staticClass:"form_item form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"医院：",prop:"Hospital"}},[r("el-select",{staticClass:"form_ipt",model:{value:a.ruleForm.Hospital,callback:function(e){a.$set(a.ruleForm,"Hospital",e)},expression:"ruleForm.Hospital"}},a._l(a.supplyList,function(e,t){return r("el-option",{key:t,attrs:{label:e.SupplierName,value:e.Code+"|"+e.SupplierName}})}),1)],1):a._e(),a._v(" "),r("br"),a._v(" "),r("el-form-item",{staticClass:"form_item form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"补交：",required:""}},[r("el-input-number",{staticClass:"form_ipt",attrs:{min:0,controls:!1},model:{value:a.ruleForm.payAmount,callback:function(e){a.$set(a.ruleForm,"payAmount",e)},expression:"ruleForm.payAmount"}})],1),a._v(" "),r("br"),a._v(" "),r("el-form-item",{staticClass:"form_item form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"消费订单："}},[r("el-checkbox",{model:{value:a.ruleForm.order,callback:function(e){a.$set(a.ruleForm,"order",e)},expression:"ruleForm.order"}})],1),a._v(" "),a.ruleForm.order?r("el-form-item",{staticClass:"form_item form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"订单编号：",prop:"formNum"}},[r("el-input",{staticClass:"form_ipt",model:{value:a.ruleForm.formNum,callback:function(e){a.$set(a.ruleForm,"formNum",e)},expression:"ruleForm.formNum"}})],1):a._e(),a._v(" "),a.referChange?r("el-form-item",{staticClass:"form_item form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"升级后推荐人："}},[r("span",[a._v(a._s(a.newrefer))])]):a._e()],1),a._v(" "),r("el-form-item",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{label:"","label-width":"70px"}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("支付信息")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{label:" ","label-width":"30px"}},[r("el-table",{ref:"singleTable",staticStyle:{width:"870px"},attrs:{data:a.payTable,border:""}},[r("el-table-column",{attrs:{prop:"PayTypeName","min-width":"100",label:"支付方式"}}),a._v(" "),r("el-table-column",{attrs:{prop:"receiveBranchName","min-width":"100",label:"销售公司"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ReceiveAccount",label:"收款账户","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ProcFee",label:"手续费","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Memo",label:"备注","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"RealAmount",label:"实际金额","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                                "+a._s(e.row.RealAmount.toQFW())+"\n                            ")]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"PayDate",label:"支付日期","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"",label:"操作","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.deleteRow(t.$index,a.payTable)}}},[a._v("删除")])]}}])})],1),a._v("\n                    总额：￥"+a._s(a.total)),r("br"),a._v(" "),r("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"success"},on:{click:a.add}},[a._v("添加支付信息")])],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",staticStyle:{width:"100%","text-align":"center","margin-top":"20px"}},[r("el-button",{attrs:{type:"primary",loading:a.saveLoading},on:{click:function(e){return a.submitForm("ruleForm")}}},[a._v("保存")]),a._v(" "),r("el-button",{on:{click:function(e){return a.resetForm("ruleForm")}}},[a._v("取消")])],1)],1)],1),a._v(" "),r("el-dialog",{attrs:{title:"添加支付信息",visible:a.dialogTableVisible1,modal:!1,size:""},on:{"update:visible":function(e){a.dialogTableVisible1=e}}},[r("payInfo",{staticStyle:{width:"380px"},attrs:{editMes:a.editMes,dialogTableVisible1:a.dialogTableVisible1,isHos:!0},on:{payOpe:a.payOpe}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pic left"},[t("img",{attrs:{src:"",alt:""}})])}]}},2185:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"selCommon AgentManage"},[r("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:a.formInline,"label-width":"90px"}},[r("el-form-item",{staticStyle:{"margin-bottom":"10px","font-size":"12px !important"},attrs:{label:"注册日期："}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:a.dateSelect},model:{value:a.date,callback:function(e){a.date=e},expression:"date"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"推荐人："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.referrerName,callback:function(e){a.$set(a.formInline,"referrerName",e)},expression:"formInline.referrerName"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"代理人："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.branchName,callback:function(e){a.$set(a.formInline,"branchName",e)},expression:"formInline.branchName"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"代理等级："}},[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:a.onSubmit},model:{value:a.formInline.grade,callback:function(e){a.$set(a.formInline,"grade",e)},expression:"formInline.grade"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),a._l(a.gradeList,function(e){return r("el-option",{key:e.Code,attrs:{label:e.BranchGradeName,value:e.Code}})})],2)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"来源渠道："}},[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:a.onSubmit},model:{value:a.formInline.region,callback:function(e){a.$set(a.formInline,"region",e)},expression:"formInline.region"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),a._l(a.origionList,function(e){return r("el-option",{key:e.DataName,attrs:{label:e.DataName,value:e.DataName}})})],2)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"状态："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.IsEnable,callback:function(e){a.$set(a.formInline,"IsEnable",e)},expression:"formInline.IsEnable"}},[r("el-option",{attrs:{label:"全部",value:"-1"}}),a._v(" "),r("el-option",{attrs:{label:"未启用",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"启用",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"退会",value:"2"}})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.hospital,callback:function(e){a.$set(a.formInline,"hospital",e)},expression:"formInline.hospital"}},a._l(a.hospitalList,function(e,t){return r("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"是否结清："}},[r("el-select",{staticStyle:{width:"200px"},on:{change:a.onSubmit},model:{value:a.formInline.IsPayOff,callback:function(e){a.$set(a.formInline,"IsPayOff",e)},expression:"formInline.IsPayOff"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"已结清",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"未结清",value:"0"}})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"销售公司："}},[r("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:a.formInline.topBranch,callback:function(e){a.$set(a.formInline,"topBranch",e)},expression:"formInline.topBranch"}},a._l(a.topBranchList,function(e,t){return r("el-option",{key:t,attrs:{label:e.branchName,value:e.code}})}),1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"消费商卡号："}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.cardNO,callback:function(e){a.$set(a.formInline,"cardNO",e)},expression:"formInline.cardNO"}})],1),r("br"),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[r("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),r("Export",{ref:"exportTable",staticStyle:{display:"none"},attrs:{tHeader:a.tHeader,filterVal:a.filterVal,tableData1:a.tableData1,name:a.name}})],1)],1),a._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"min_table smt",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:"","max-height":"560"}},[r("el-table-column",{attrs:{prop:"Code",label:"代理编号","min-width":"110"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("div",{staticClass:"table_btn",attrs:{type:"text"},on:{click:function(e){return a.DetailMes(t.$index,a.tableData)}}},[a._v(a._s(t.row.BranchName)),r("br"),a._v(a._s(t.row.Code))])]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"RegistDate",label:"注册日期",width:"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.RegistDate?r("span",[a._v("\n                     "+a._s(e.row.RegistDate.substring(0,10))+"\n                ")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"ReferrerName",label:"推荐人","min-width":"130"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.ReferrerName?r("span",[a._v(a._s(e.row.ReferrerName))]):a._e(),r("br"),a._v(" "),e.row.ReferrerCode?r("span",[a._v("["+a._s(e.row.ReferrerCode)+"]")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"BranchName",label:"策略-进度","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("div",{staticStyle:{float:"left"}},[2==e.row.IdentityType?r("span",[a._v("老策略")]):a._e(),a._v(" "),1==e.row.IdentityType?r("span",[a._v("新策略")]):a._e()]),a._v("\n                 \n                "),1==e.row.IdentityType&&e.row.ComplateRange<100?r("el-progress",{attrs:{type:"circle",percentage:e.row.ComplateRange,"stroke-width":1,width:40}}):a._e(),a._v(" "),1==e.row.IdentityType&&100==e.row.ComplateRange?r("el-progress",{attrs:{type:"circle",percentage:100,"stroke-width":1,width:40,status:"success"}}):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"HospitalName",label:"医院","min-width":"130"}}),a._v(" "),r("el-table-column",{attrs:{prop:"PhoneNumber",label:"联系电话","min-width":"115"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.PhoneNumber?r("span",[a._v(a._s(e.row.PhoneNumber.substring(0,3)+"****"+e.row.PhoneNumber.substring(7)))]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"CardNO",label:"消费商卡号","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"SourcWayeCode",label:"来源渠道",width:"90"}}),a._v(" "),r("el-table-column",{attrs:{prop:"BranchGradeName",label:"代理等级","min-width":"130"}}),a._v(" "),r("el-table-column",{attrs:{prop:"PayAmount",label:"缴纳会费","min-width":"80"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.PayAmount||0==e.row.PayAmount?r("span",[a._v(a._s(e.row.PayAmount.toQFW()))]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"RealPayAmount",label:"已缴纳会费","min-width":"80"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.RealPayAmount||0==e.row.RealPayAmount?r("span",[a._v(a._s(e.row.RealPayAmount.toQFW()))]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"Pledge",label:"缴纳押金","min-width":"80"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.Pledge||0==e.row.Pledge?r("span",[a._v(a._s(e.row.Pledge.toQFW()))]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"IsPayOff",label:"是否结清",width:"75"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.IsPayOff?r("el-tag",{attrs:{type:"warning"}},[a._v("未结清")]):a._e(),a._v(" "),1==e.row.IsPayOff?r("el-tag",{attrs:{type:"success"}},[a._v("已结清")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"IsEnable",label:"状态",width:"70"},scopedSlots:a._u([{key:"default",fn:function(e){return[0==e.row.IsEnable?r("el-tag",{attrs:{type:"warning"}},[a._v("未启用")]):a._e(),a._v(" "),1==e.row.IsEnable?r("el-tag",{attrs:{type:"success"}},[a._v("启用")]):a._e(),a._v(" "),2==e.row.IsEnable?r("el-tag",{attrs:{type:"danger"}},[a._v("退会")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"grade",label:"操作",width:"140"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"small",disabled:1!=t.row.IsEnable||0==t.row.IsPayOff||"G100001"==t.row.BranchGradeCode},on:{click:function(e){return a.upgradeApply(t.$index,a.tableData)}}},[a._v("升级申请")]),a._v(" "),"01"!=a.typeCode&&"03"!=a.typeCode||1!=t.row.IdentityType?a._e():r("el-button",{attrs:{type:"primary",size:"small",disabled:0!=t.row.IsEnable||t.row.ComplateRange<50},on:{click:function(e){return a.open(t.$index,a.tableData)}}},[a._v("启用")]),a._v(" "),"01"!=a.typeCode&&"03"!=a.typeCode||2!=t.row.IdentityType?a._e():r("el-button",{attrs:{type:"primary",size:"small",disabled:0!=t.row.IsEnable||0==t.row.IsPayOff},on:{click:function(e){return a.open(t.$index,a.tableData)}}},[a._v("启用")])]}}])})],1),a._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),r("el-dialog",{attrs:{title:"升级申请",visible:a.dialogFormVisible[0],size:"","close-on-click-modal":!1,top:"5%"},on:{"update:visible":function(e){return a.$set(a.dialogFormVisible,0,e)}}},[a.dialogFormVisible[0]?r("div",[r("upGrade",{ref:"upgrade",staticStyle:{width:"920px"},attrs:{baseData:a.baseData},on:{upClose:a.upClose}})],1):a._e()]),a._v(" "),r("el-dialog",{attrs:{title:"代理详情",visible:a.dialogFormVisible[2],size:"",top:"5%"},on:{"update:visible":function(e){return a.$set(a.dialogFormVisible,2,e)}}},[a.dialogFormVisible[2]?r("div",[r("agentDetail",{ref:"detail",staticStyle:{width:"920px"},attrs:{detailCode:a.detailCode}})],1):a._e()])],1)},staticRenderFns:[]}},355:function(e,t,a){a(1713);var r=a(98)(a(1083),a(2185),"data-v-2454abc6",null);e.exports=r.exports},436:function(e,t,a){a(439);var r=a(98)(a(437),a(440),"data-v-6c47323e",null);e.exports=r.exports},437:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{tHeader:{},filterVal:{},tableData1:{type:Array},name:""},watch:{tableData1:{handler:function(e){this.otData=e},deep:!0}},data:function(){return{otData:[]}},methods:{handleDownload:function(){var a=this;r.e(220).then(function(){var e=r(448).export_json_to_excel,t=[];t=0!=a.otData.length?a.formatJson(a.filterVal,a.otData):a.formatJson(a.filterVal,a.tableData1),e(a.tHeader,t,a.name)}.bind(null,r)).catch(r.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})}}}},438:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".exportBtn[data-v-6c47323e]{background:#fff;border:1px solid #d6d4d4;font-size:14px;color:#666;border-radius:4px}",""])},439:function(e,t,a){var r=a(438);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("fdf4f478",r,!0)},440:function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{staticClass:"exportBtn",attrs:{type:"primary"},on:{click:this.handleDownload}},[this._v("导出报表")])},staticRenderFns:[]}},443:function(e,t,a){"use strict";t.__esModule=!0;var r,o=a(444),n=(r=o)&&r.__esModule?r:{default:r};t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},444:function(e,t,a){e.exports={default:a(445),__esModule:!0}},445:function(e,t,a){a(446);var r=a(2).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},446:function(e,t,a){var r=a(9);r(r.S+r.F*!a(10),"Object",{defineProperty:a(11).f})},510:function(e,t,a){e.exports=a.p+"static/img/person.f548a9b.jpg"},513:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(100),c=s.n(a),r=s(66),m=s.n(r),o=s(102),u=s.n(o),n=s(99),l=s.n(n),i=s(443),p=s.n(i),d=s(101),f=s(64);t.default={props:{detailCode:""},data:function(){var e;return e={dialogImg:!1,baseImgPath:d.b,fileList:[],allMes:{},integral:0,payTable:[],ticketsList:[],packageAll:[],packageVal:[],gradeList:[],tableData:[]},p()(e,"allMes",""),p()(e,"ruleForm",{grade:"",BranchName:"",Sex:"",Code:"",BranchGradeName:"",PhoneNumber:"",OldReferrerName:"",ReferrerName:""}),p()(e,"createBy",""),p()(e,"ServiceInfo",{}),e},watch:{detailCode:{handler:function(){this.getBranchGradeAll()},deep:!0},"ruleForm.grade":{handler:function(t){this.gradeList.forEach(function(e){e.Code==t&&e.OrderNum})},deep:!0}},mounted:function(){this.getBranchGradeAll()},methods:{imgShow:function(e){this.$emit("photoShow",e)},uploadImg:function(){this.dialogImg=!0},getBranchGradeAll:function(){var i=this;return l()(c.a.mark(function e(){var t,a,r,o,n,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.all([s.i(f._319)(),s.i(f._354)(),s.i(f._353)(),s.i(f._51)({branchcode:i.detailCode})]);case 3:t=e.sent,a=u()(t,4),r=a[0],o=a[1],n=a[2],l=a[3],i.gradeList=r,i.packageAll=o,i.ticketsList=n,i.getBranchByCode(l),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}},e,i,[[0,15]])}))()},getBranchByCode:function(e){this.fileList=e.CommonPhotoList,this.allMes=e,this.ServiceInfo=e.ServiceInfo?e.ServiceInfo:{},this.copyWorth(e.Branch),this.tableData=e.CPOList,this.payTable=e.BranchOrderPayList.filter(function(e){if(1==e.ItemType||4==e.ItemType)return e})},copyWorth:function(e){for(var t in e)e[t]&&"null"!=e[t]&&null!=e[t]&&"undefined"!=e[t]||(e[t]="");this.allMes=e,this.ruleForm.Sex=this.getSex(e.Sex),this.ruleForm.Code=e.Code,this.ruleForm.BranchName=e.BranchName,this.ruleForm.BranchGradeName=this.getGradeName(e.BranchGradeCode),this.ruleForm.PhoneNumber=e.PhoneNumber,this.ruleForm.SourcWayeCode=e.SourcWayeCode,this.ruleForm.RegistDate=e.RegistDate.substring(0,10),this.ruleForm.ReferrerName=e.ReferrerName,this.ruleForm.OpenBankName=e.OpenBankName,this.ruleForm.OpenBankCode=e.OpenBankCode,this.ruleForm.Income=e.Income,this.ruleForm.IDCard=e.IDCard,this.ruleForm.Email=e.Email,this.ruleForm.BankCardId=e.BankCardId,this.ruleForm.Birthday=e.Birthday,this.ruleForm.BankCardHolder=e.BankCardHolder,this.ruleForm.Address=e.Province+e.City+e.Area+e.Address.split(",").join(""),this.ruleForm.hospital=e.HospitalName,this.ruleForm.OldReferrerName=e.OldReferrerName?e.OldReferrerName:"",this.packageVal=this.packNamTurn(e.ConPackage),this.createBy=e.CreateBy},getSex:function(e){return e?1==e?"男":"女":""},getGradeName:function(t){var a="",r=[],o="";return this.gradeList.forEach(function(e){e.Code==t&&(a=e.BranchGradeName,o=e.OrderNum)}),this.gradeList.forEach(function(e){e.OrderNum<o&&r.push(e)}),this.gradeList=r,a},packNamTurn:function(e){for(var t=e.split(","),a=[],r=0;r<t.length;r++)for(var o=0;o<this.packageAll.length;o++)t[r]==this.packageAll[o].ConPacCode&&(a.push(this.packageAll[o].ConPacName),this.integral+=this.packageAll[o].JifenRecharge);return a}},components:{}}},514:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".clear[data-v-33b7c139]{clear:both}.pic[data-v-33b7c139]{width:60px;height:60px;border-radius:30px;overflow:hidden;background:url("+a(510)+") 50%;background-size:100%}.form_item_half[data-v-33b7c139]{width:48%;margin-bottom:0}.upGrade[data-v-33b7c139]{height:750px;overflow-x:hidden;overflow-y:auto}.mes[data-v-33b7c139]{margin-left:20px;line-height:26px}.imgList[data-v-33b7c139]{width:100px;height:100px;border:1px dashed #c0ccda;display:inline-block;border-radius:6px;margin-right:5px;position:relative}.layer[data-v-33b7c139]{position:absolute;top:0;left:0;z-index:2;width:100%;height:100px;background-color:rgba(0,0,0,.3);text-align:center;line-height:100px;opacity:0;color:#fff;border:none}.imgShow[data-v-33b7c139]{width:100px;height:100px}.imgList:hover .layer[data-v-33b7c139]{opacity:1}.view[data-v-33b7c139]{cursor:pointer}",""])},515:function(e,t,a){var r=a(514);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("06166ec1",r,!0)},517:function(e,t,a){a(515);var r=a(98)(a(513),a(519),"data-v-33b7c139",null);e.exports=r.exports},519:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"upGrade"},[r("div",{staticClass:"clear"},[a._m(0),a._v(" "),r("div",{staticClass:"mes left"},[r("span",{},[a._v(a._s(a.ruleForm.BranchName)+"  "+a._s(a.ruleForm.Sex))]),r("br"),a._v(" "),r("span",[a._v("代理编号："+a._s(a.ruleForm.Code))]),a._v("   \n            "),r("span",[a._v("代理等级："+a._s(a.ruleForm.BranchGradeName)+"  手机号码："+a._s(a.ruleForm.PhoneNumber))]),a._v("  \n            "),r("span",[a._v("创建人："+a._s(a.createBy))]),a._v("   \n        ")])]),a._v(" "),r("div",{staticClass:"clear",staticStyle:{"margin-top":"20px"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:a.ruleForm,inline:!0,"label-width":"110px"}},[r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:""}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("代理详情")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2"},attrs:{span:24}},[r("el-form-item",{staticClass:"form_item_half",attrs:{label:"注册时间："}},[r("span",[a._v(a._s(a.ruleForm.RegistDate))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"邮箱："}},[r("span",[a._v(a._s(a.ruleForm.Email))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"地区："}},[r("span",[a._v(a._s(a.ruleForm.Address))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"来源渠道："}},[r("span",[a._v(a._s(a.ruleForm.SourcWayeCode))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"身份证号："}},[r("span",[a._v(a._s(a.ruleForm.IDCard))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"卡号："}},[r("span",[a._v(a._s(a.allMes.CardNO))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"生日："}},[r("span",[a._v(a._s(a.ruleForm.Birthday))])]),a._v(" "),0<a.ruleForm.ReferrerName.length?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"推荐人："}},[r("span",[a._v(a._s(a.ruleForm.ReferrerName))])]):a._e(),a._v(" "),0<a.ruleForm.OldReferrerName.length?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"前推荐人："}},[r("span",[a._v(a._s(a.ruleForm.OldReferrerName))])]):a._e(),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"服务商："}},[a.ServiceInfo.ServiceInfoName?r("span",[a._v(a._s(a.ServiceInfo.ServiceInfoName)+"（"+a._s(a.ServiceInfo.PhoneNumber)+"）")]):a._e()]):a._e(),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"医院："}},[r("span",[a._v(a._s(a.ruleForm.hospital))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"代理类型："}},[1==a.allMes.BranchType?r("span",[a._v("个人")]):a._e(),a._v(" "),2==a.allMes.BranchType?r("span",[a._v("店铺")]):a._e()]),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"店铺："}},[0<a.allMes.ShopName.length?r("span",[a._v(a._s(a.allMes.ShopName))]):a._e(),a._v(" "),r("span",[a._v(a._s(a.allMes.ShopArea)+"m²")])]):a._e(),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"凭证："}},[r("el-button",{attrs:{size:"small"},on:{click:a.uploadImg}},[a._v("查看图片")])],1):a._e(),a._v(" "),2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"专家日提成：",prop:""}},[0==a.allMes.IsExpert?r("span",[a._v("无")]):a._e(),a._v(" "),1==a.allMes.IsExpert?r("span",[a._v("有")]):a._e()]):a._e(),a._v(" "),1==a.allMes.IsExpert&&2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"生效时间："}},[a.allMes.ShopEffectiveDate?r("span",[a._v(a._s(a.allMes.ShopEffectiveDate.substring(0,10)))]):a._e()]):a._e(),a._v(" "),1==a.allMes.IsExpert&&2==a.allMes.BranchType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"专家日提成比例："}},[a.allMes.ExpertRate?r("span",[a._v(a._s(a.allMes.ExpertRate.mul(100))+"%")]):a._e()]):a._e(),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"策略："}},[1==a.allMes.IdentityType?r("span",[a._v("新策略")]):a._e(),a._v(" "),2==a.allMes.IdentityType?r("span",[a._v("老策略")]):a._e()]),a._v(" "),1==a.allMes.IdentityType?r("el-form-item",{staticClass:"form_item_half",attrs:{label:"订单号："}},[1==a.allMes.IdentityType?r("span",[a._v(a._s(a.allMes.FormNO))]):a._e()]):a._e()],1),a._v(" "),r("el-form-item",{staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{label:""}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("组合信息")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"套餐内容："}},[r("el-row",a._l(a.packageVal,function(e,t){return r("span",{key:t,staticStyle:{"margin-right":"20px"}},[a._v(a._s(e))])}),0)],1),a._v(" "),r("el-form-item",{staticStyle:{width:"100%","margin-bottom":"0px"},attrs:{label:"卡券："}},[r("el-table",{ref:"singleTable",staticStyle:{width:"750px"},attrs:{data:a.tableData,border:"","highlight-current-row":""}},[r("el-table-column",{attrs:{type:"index",width:"60",label:"序号"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ConPacName",label:"套餐名称","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"TickInfoCode",label:"券种编号","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"TickName",label:"券名称","min-width":"120"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Price",label:"面值","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"EndDate",label:"有效期","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(e){return[""!=e.row.PrdOfVal&&null!=e.row.PrdOfVal?r("span",[a._v(" "+a._s("售后"+e.row.PrdOfVal+"天"))]):r("div",[r("p",[a._v("开始："+a._s(e.row.StartDate&&e.row.StartDate.substr(0,10))+" ")]),a._v(" "),r("p",[a._v("结束："+a._s(e.row.EndDate&&e.row.EndDate.substr(0,10))+" ")])])]}}])})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item",attrs:{label:"积分："}},[r("span",[a._v(a._s(a.integral))])])],1),a._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0px",width:"100%"},attrs:{label:""}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("银行信息")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticClass:"form_item_half",attrs:{label:"银行："}},[r("span",[a._v(a._s(a.ruleForm.OpenBankCode))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"开户支行："}},[r("span",[a._v(a._s(a.ruleForm.OpenBankName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"银行卡号："}},[r("span",[a._v(a._s(a.ruleForm.BankCardId))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_half",attrs:{label:"开户人："}},[r("span",[a._v(a._s(a.ruleForm.BankCardHolder))])])],1),a._v(" "),r("el-form-item",{staticStyle:{width:"100%",margin:"0"},attrs:{label:"","label-width":"70px"}},[r("span",{staticStyle:{"font-weight":"bold","font-size":"16px"}},[a._v("支付信息")])]),a._v(" "),r("el-col",{staticStyle:{background:"#F2F2F2","padding-top":"10px"},attrs:{span:24}},[r("el-form-item",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{label:" ","label-width":"50px"}},[r("el-table",{ref:"singleTable",staticStyle:{width:"800px"},attrs:{data:a.payTable,border:""}},[r("el-table-column",{attrs:{prop:"PayTypeName","min-width":"100",label:"支付方式"}}),a._v(" "),r("el-table-column",{attrs:{prop:"PayDate",label:"支付日期","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.PayDate?r("span",[a._v("\n                                    "+a._s(e.row.PayDate.substring(0,10))+" "+a._s(e.row.PayDate.substring(11,19))+"\n                                ")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"ReceiveAccount",label:"收款账户","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ProcFee",label:"手续费","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ItemDetail",label:"来源","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Memo",label:"备注","min-width":"100","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"RealAmount",label:"实际金额","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n                                "+a._s(e.row.RealAmount.toQFW())+"\n                            ")]}}])})],1)],1)],1)],1)],1),a._v(" "),r("el-dialog",{attrs:{title:"凭证图片",visible:a.dialogImg,modal:!1,size:""},on:{"update:visible":function(e){a.dialogImg=e}}},[r("div",{staticStyle:{width:"650px"}},a._l(a.fileList,function(t){return r("div",{key:t.Id,staticClass:"imgList"},[r("img",{staticClass:"imgShow",attrs:{src:a.baseImgPath+t.ImgUrl,alt:""}}),a._v(" "),r("div",{staticClass:"layer"},[r("i",{staticClass:"el-icon-view view",on:{click:function(e){return a.imgShow(a.baseImgPath+t.ImgUrl)}}})])])}),0)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pic left"},[t("img",{attrs:{src:"",alt:""}})])}]}},567:function(e,t,a){a(606);var r=a(98)(a(580),a(625),"data-v-7432d7aa",null);e.exports=r.exports},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),l=n.n(a),r=n(99),i=n.n(r),s=(n(22),n(64));t.default={props:{isHos:"",dialogTableVisible1:Boolean,editMes:{},code:""},data:function(){return{debounce:1e3,payWayList:[],accountList:[],hosAccount:[],payDate:"",ruleForm:{PayDate:"",type:"",PayTypeName:"",PayType:"",Memo:"",RealAmount:0,ReceiveAccount:"",ProcFee:0,topBranch:"",ReceiveBranchCode:"",ReceiveBranchName:""},isEdit:!0,topBranchList:[],RemainAmount:0,rules:{topBranch:[{required:!0,message:"请选择",trigger:"change"}],RealAmount:[{required:!0,type:"number",message:"请填写实付金额",trigger:"blur"}],ReceiveAccount:[{required:!0,message:"请填写收款账户",trigger:"blur"}]}}},watch:{dialogTableVisible1:{handler:function(){this.init("ruleForm")},deep:!0},"ruleForm.type":{handler:function(){1==this.isHos&&(this.accountList=this.hosAccount)},deep:!0},editMes:{handler:function(e){e.PayDate?(this.initData(this.editMes),this.isEdit=!0):this.isEdit=!1},deep:!0}},mounted:function(){this.payDate=new Date,this.ruleForm.payDate=new Date,this.getPayWay(),this.editMes.PayDate?(this.initData(this.editMes),this.isEdit=!0):this.isEdit=!1},methods:{initData:function(e){this.payDate=e.PayDate?new Date(e.PayDate.substring(0,4),e.PayDate.substring(5,7)-1,e.PayDate.substring(8,10),e.PayDate.substring(11,13),e.PayDate.substring(14,16),e.PayDate.substring(17,19)):"",this.ruleForm.type=e.PayTypeName+"|"+e.PayType,this.ruleForm.RealAmount=e.RealAmount,this.ruleForm.ReceiveAccount=e.ReceiveAccount,this.ruleForm.topBranch=e.ReceiveBranchName+"|"+e.ReceiveBranchCode,this.ruleForm.ProcFee=e.ProcFee,this.ruleForm.Memo=e.Memo},dateChange:function(e){this.ruleForm.payDate=e},GetBaseBranchAccount:function(a){var r=this;return i()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(s.k)(a);case 2:t=e.sent,r.accountList=t.data;case 4:case"end":return e.stop()}},e,r)}))()},GetHospitalAccountByCode:function(a){var r=this;return i()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.i(s._31)({hospitalCode:a});case 2:t=e.sent,r.hosAccount=t.data,r.accountList=t.data;case 5:case"end":return e.stop()}},e,r)}))()},paySelect:function(){this.ruleForm.PayTypeName=this.ruleForm.type.split("|")[0],this.ruleForm.PayType=this.ruleForm.type.split("|")[1]},selBranch:function(){0<this.ruleForm.topBranch.length?(this.ruleForm.ReceiveBranchCode=this.ruleForm.topBranch.split("|")[1],this.ruleForm.ReceiveBranchName=this.ruleForm.topBranch.split("|")[0],this.isHos?this.GetHospitalAccountByCode(this.ruleForm.ReceiveBranchCode):this.GetBaseBranchAccount({keywords:""})):(this.ruleForm.ReceiveBranchCode="",this.ruleForm.ReceiveBranchName="")},getPayWay:function(){var o=this;return i()(l.a.mark(function e(){var t,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.code)return e.next=3,n.i(s._32)({branchcode:o.code});e.next=5;break;case 3:t=e.sent,o.RemainAmount=t.RemainAmount;case 5:return e.next=7,n.i(s.d)({typeId:o.isHos?"1":"2"});case 7:return a=e.sent,o.topBranchList=a.data,""==a.data[0].code&&o.topBranchList.splice(0,1),e.next=12,n.i(s.l)("0006");case 12:(r=e.sent).constructor==Array&&r.forEach(function(e){"008"!=e.DataCode&&"009"!=e.DataCode&&"010"!=e.DataCode&&"011"!=e.DataCode&&o.payWayList.push({name:e.DataName,value:e.DataCode})});case 14:case"end":return e.stop()}},e,o)}))()},submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){e&&(t.payDate.formatDate("yyyy-MM-dd")==(new Date).formatDate("yyyy-MM-dd")?a.ruleForm.PayDate=(new Date).formatDate("yyyy-MM-dd hh:mm:ss"):a.ruleForm.PayDate=t.payDate.formatDate("yyyy-MM-dd hh:mm:ss"),a.isEdit&&a.payDate.formatDate("yyyy-MM-dd")==a.editMes.PayDate.substring(0,10)&&(a.ruleForm.PayDate=a.editMes.PayDate),a.$emit("payOpe",a.ruleForm,a.isEdit))})},init:function(e){this.$refs[e].resetFields(),this.ruleForm.RealAmount=0,this.ruleForm.ProcFee=0,this.ruleForm.Memo="",this.ruleForm.type="",this.accountList=[],this.payDate=new Date},resetForm:function(e){this.init(e),this.$emit("payOpe",!1)}}}},592:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".form_footer[data-v-7432d7aa]{text-align:center}.form_item_ipt153[data-v-7432d7aa]{width:153px}.form_item_wt255[data-v-7432d7aa]{width:253px}",""])},606:function(e,t,a){var r=a(592);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("714243a9",r,!0)},625:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,inline:!0,"label-width":"110px"}},[a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"支付方式：",prop:"PayType"}},[a("el-select",{staticStyle:{width:"200px"},on:{change:t.paySelect},model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},t._l(t.payWayList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name+"|"+e.value}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"实际支付金额：",prop:"RealAmount"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{debounce:t.debounce,controls:!1},model:{value:t.ruleForm.RealAmount,callback:function(e){t.$set(t.ruleForm,"RealAmount",e)},expression:"ruleForm.RealAmount"}})],1),t._v(" "),"018"==t.ruleForm.PayType?a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"预付款余额："}},[a("span",[t._v(t._s(t.RemainAmount))])]):t._e(),t._v(" "),a("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"手续费："}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{debounce:t.debounce,controls:!1},model:{value:t.ruleForm.ProcFee,callback:function(e){t.$set(t.ruleForm,"ProcFee",e)},expression:"ruleForm.ProcFee"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"收款时间："}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.payDate,callback:function(e){t.payDate=e},expression:"payDate"}})],1),t._v(" "),t.isHos?t._e():a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"销售公司：",prop:"topBranch"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:t.selBranch},model:{value:t.ruleForm.topBranch,callback:function(e){t.$set(t.ruleForm,"topBranch",e)},expression:"ruleForm.topBranch"}},t._l(t.topBranchList,function(e,t){return a("el-option",{key:t,attrs:{label:e.branchName,value:e.branchName+"|"+e.code}})}),1)],1),t._v(" "),t.isHos?a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院：",prop:"topBranch"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:t.selBranch},model:{value:t.ruleForm.topBranch,callback:function(e){t.$set(t.ruleForm,"topBranch",e)},expression:"ruleForm.topBranch"}},t._l(t.topBranchList,function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.supplierName+"|"+e.code}})}),1)],1):t._e(),t._v(" "),"001"!=t.ruleForm.PayType&&"018"!=t.ruleForm.PayType?a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"收款账户：",prop:"ReceiveAccount"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.ruleForm.ReceiveAccount,callback:function(e){t.$set(t.ruleForm,"ReceiveAccount",e)},expression:"ruleForm.ReceiveAccount"}},t._l(t.accountList,function(e,t){return a("el-option",{key:t,attrs:{label:e.shortName,value:e.shortName}})}),1)],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"备注："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea"},model:{value:t.ruleForm.Memo,callback:function(e){t.$set(t.ruleForm,"Memo",e)},expression:"ruleForm.Memo"}})],1)],1),t._v(" "),a("div",{staticClass:"form_footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("取消")])],1)],1)},staticRenderFns:[]}}});