webpackJsonp([189],{1130:function(e,t,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=m(103),f=m.n(s),n=m(100),d=m.n(n),a=m(99),i=m.n(a),o=(m(101),m(65)),r=(m.n(o),m(22)),p=m(64);m(1).default.component("my-item-nursePro",{functional:!0,render:function(e,t){var s=t.props.item;return e("div",t.data,[e("p",{attrs:{class:"select_name",title:s.Name}},["名称："+s.GoodsAlias]),e("p",{attrs:{class:"select_code",title:s.Name}},["编号："+s.GoodsCode]),e("p",{attrs:{class:"select_code",title:s.Name}},["医院："+s.SupplierName]),e("p",{attrs:{class:"select_code",title:s.Name}},["价格区间："+s.priceRange])])},props:{item:{type:Object,required:!0}}}),t.default={data:function(){return{saveLoading:!1,dialogFormVisible:!1,project:"",title:"",opeIndex:0,currentPage:1,total:0,pageSize:10,keywords:"",catelogList:[],formInline:{type:"1",name:"",code:"",amount:"",fClass:"",sClass:"",tClass:""},time:0,fClassList:[],sClassList:[],tClassList:[],tableData:[],projectList:[]}},computed:{},watch:{"formInline.type":{handler:function(){1==this.time?(this.formInline.name="",this.formInline.code="",this.formInline.amount="",this.formInline.fClass="",this.formInline.sClass="",this.formInline.tClass="",this.sClassList=[],this.tClassList=[]):this.time},deep:!0}},mounted:function(){this.getCatelog()},methods:{fChange:function(){this.formInline.sClass="",this.setdata(this.formInline.fClass.name,this.formInline.fClass.catalogPath),this.sClassList=this.parentCode(this.formInline.fClass.value)},sChange:function(){this.formInline.tClass="",this.setdata(this.formInline.sClass.name,this.formInline.sClass.catalogPath),this.tClassList=this.parentCode(this.formInline.sClass.value)},tChange:function(){this.setdata(this.formInline.tClass.name,this.formInline.tClass.catalogPath)},setdata:function(e,t){this.$set(this.formInline,"name",e),this.$set(this.formInline,"code",t)},getCatelog:function(){var s=this;return i()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.i(p._207)({code:100});case 3:t=e.sent,s.catelogList=t.data,s.fClassList=s.parentCode(""),s.search(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,s,[[0,9]])}))()},parentCode:function(e){for(var t=[],s=0;s<this.catelogList.length;s++)this.catelogList[s].parentCode==e&&t.push({name:this.catelogList[s].name,value:this.catelogList[s].code,catalogPath:this.catelogList[s].catalogPath});return t},sure:function(){var e={typeId:this.formInline.type,name:this.formInline.name,code:this.formInline.code,commissionPrice:this.formInline.amount},t=m.i(r.b)("userName"),s=m.i(r.b)("userId");0==this.opeIndex?(e.createUserId=s,e.createBy=t,this.AddNurseSet(e)):(e.modifiedUserId=s,e.modifiedBy=t,e.id=this.formInline.id,this.UpdateNurseSet(e))},cancel:function(){this.dialogFormVisible=!1},add:function(e){this.time,this.title=e,this.opeIndex=0,this.dialogFormVisible=!0,this.formInline={type:"1",name:"",code:"",amount:"",fClass:"",sClass:"",tClass:""},this.project=""},edit:function(e,t){this.opeIndex=1,this.dialogFormVisible=!0,this.initData(t[e])},initData:function(e){var t=this;this.formInline.type=e.typeId+"",this.time,this.formInline.name=e.name,this.formInline.code=e.code,this.$set(this.formInline,"amount",e.commissionPrice),this.formInline.id=e.id;var s=this;if(1!=e.typeId&&3!=e.typeId||(this.project=e.name),2==e.typeId){var n=e.code.replace(/^\|+|\|+$/g,"").split("|");n[0]&&this.fClassList.forEach(function(e){if(n[0]==e.value)return t.formInline.fClass=e,t.$set(t.formInline,"fClass",e),void t.fChange()}),setTimeout(function(){n[1]&&s.sClassList.forEach(function(e){if(n[1]==e.value)return s.formInline.sClass=e,s.$set(t.formInline,"sClass",e),void t.sChange()})},100),setTimeout(function(){n[2]&&s.tClassList.forEach(function(e){if(n[2]==e.value)return s.$set(t.formInline,"tClass",e),void t.tChange()})},100)}e.typeId},del:function(e,t){var s=this;this.$confirm("此操作将永久删除该配置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.DeleteNurseSet({id:t[e].id})}).catch(function(){})},onSubmit:function(){this.currentPage=1,this.search()},AddNurseSet:function(t){var s=this;return i()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.saveLoading=!0,e.next=3,m.i(p._306)(t);case 3:e.sent.status?(s.$message({message:"添加成功",type:"success"}),s.dialogFormVisible=!1,s.search()):s.$message.error("添加失败"),s.saveLoading=!1;case 6:case"end":return e.stop()}},e,s)}))()},UpdateNurseSet:function(t){var s=this;return i()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.saveLoading=!0,e.next=3,m.i(p._307)(t);case 3:e.sent.status?(s.$message({message:"编辑成功",type:"success"}),s.dialogFormVisible=!1,s.search()):s.$message.error("编辑失败"),s.saveLoading=!1;case 6:case"end":return e.stop()}},e,s)}))()},DeleteNurseSet:function(t){var s=this;return i()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.i(p._308)(t);case 2:e.sent.status?(s.$message({message:"删除成功",type:"success"}),s.search()):s.$message.error("删除失败");case 4:case"end":return e.stop()}},e,s)}))()},GetNurseSet:function(s){var n=this;return i()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.i(p._309)(s);case 2:t=e.sent,n.total=t.count,n.tableData=t.data;case 5:case"end":return e.stop()}},e,n)}))()},numCheck:function(){var e=this;setTimeout(function(){e.formInline.amount=(e.formInline.amount.match(/\d+(\.\d{0,2})?/)||[""])[0]},50)},selectPro:function(e){this.formInline.name=e.GoodsAlias,this.formInline.code=e.code},queryPro:function(e,t){this.projectList=[],""!==e&&null!=e&&this.getProject(e);var s=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(s.projectList)},1e3)},getProject:function(c){var u=this;return i()(d.a.mark(function e(){var t,s,n,a,i,o,r,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,"1"==u.formInline.type)return e.next=4,m.i(p._21)({keywords:c.removeSP(),ConsumeTypeId:11});e.next=7;break;case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,m.i(p._30)({keywords:c.removeSP(),isMall:0});case 9:t=e.sent;case 10:if(s=[],!(t instanceof Array&&0<t.length)){e.next=31;break}for(a=!(n=!0),i=void 0,e.prev=15,o=f()(t);!(n=(r=o.next()).done);n=!0)l=r.value,s.push({value:"("+l.GoodsEntity.Code+")"+l.GoodsEntity.GoodsAlias,code:l.GoodsEntity.Code,GoodsCode:l.GoodsEntity.GoodsCode,Name:l.GoodsEntity.Name,GoodsAlias:l.GoodsEntity.GoodsAlias,ServiceMan:l.GoodsEntity.ServiceMan,ServiceManName:l.GoodsEntity.ServiceManName,price:l.GoodsEntity.PriceSale,priceRange:l.PriceRange,FarePercent:l.GoodsEntity.FarePercent,SupplierCode:l.GoodsEntity.SupplierCode,SupplierName:l.GoodsEntity.SupplierName,GUList:l.GUList});e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),a=!0,i=e.t0;case 23:e.prev=23,e.prev=24,!n&&o.return&&o.return();case 26:if(e.prev=26,a)throw i;e.next=29;break;case 29:return e.finish(26);case 30:return e.finish(23);case 31:u.projectList=s;case 32:case"end":return e.stop()}},e,u,[[15,19,23,31],[24,,26,30]])}))()},pageIndexChange:function(){this.search()},pageSizeChange:function(e){this.pageSize=e,this.search()},search:function(){this.GetNurseSet({Keywords:this.keywords.removeSP(),PageSize:this.pageSize,PageIndex:this.currentPage})}},components:{}}},1480:function(e,t,s){(e.exports=s(215)(!1)).push([e.i,".form_footer[data-v-a47d0262]{text-align:center}",""])},1905:function(e,t,s){var n=s(1480);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);s(216)("168b78ed",n,!0)},2380:function(e,t){e.exports={render:function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("div",{staticClass:"tag selCommon"},[n("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,"label-width":"80px"}},[n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"关键字："}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.onSubmit(e)}},model:{value:s.keywords,callback:function(e){s.keywords=e},expression:"keywords"}})],1),s._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[n("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:s.onSubmit}},[s._v("查询")]),s._v(" "),n("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:function(e){return s.add("添加")}}},[s._v("添加新设置")])],1)],1),s._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:s.tableData,border:""}},[n("el-table-column",{attrs:{prop:"typeId",label:"类型","min-width":"180"},scopedSlots:s._u([{key:"default",fn:function(e){return[1==e.row.typeId?n("span",[s._v("药品")]):s._e(),s._v(" "),2==e.row.typeId?n("span",[s._v("分类")]):s._e(),s._v(" "),3==e.row.typeId?n("span",[s._v("项目")]):s._e()]}}])}),s._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"180"}}),s._v(" "),n("el-table-column",{attrs:{prop:"commissionPrice",label:"提成","min-width":"180"}}),s._v(" "),n("el-table-column",{attrs:{prop:"address",label:"操作",width:"200"},scopedSlots:s._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return s.edit(t.$index,s.tableData)}}},[s._v("编辑")]),s._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(e){return s.del(t.$index,s.tableData)}}},[s._v("删除")])]}}])})],1),s._v(" "),n("div",{staticClass:"block",staticStyle:{"margin-bottom":"10px"}},[n("el-pagination",{attrs:{total:s.total,"current-page":s.currentPage,"page-size":s.pageSize,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":s.pageSizeChange,"current-change":s.pageIndexChange,"update:currentPage":function(e){s.currentPage=e},"update:current-page":function(e){s.currentPage=e}}})],1),s._v(" "),n("el-dialog",{attrs:{title:s.title,visible:s.dialogFormVisible,size:""},on:{"update:visible":function(e){s.dialogFormVisible=e}}},[n("el-form",{staticClass:"demo-form-inline",staticStyle:{width:"600px"},attrs:{model:s.formInline,"label-width":"80px"}},[n("el-form-item",{staticClass:"form_item__mt10",attrs:{label:"类型："}},[n("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:s.formInline.type,callback:function(e){s.$set(s.formInline,"type",e)},expression:"formInline.type"}},[s._v("药品")]),s._v(" "),n("el-radio",{staticClass:"radio",attrs:{label:"2"},model:{value:s.formInline.type,callback:function(e){s.$set(s.formInline,"type",e)},expression:"formInline.type"}},[s._v("分类")]),s._v(" "),n("el-radio",{staticClass:"radio",attrs:{label:"3"},model:{value:s.formInline.type,callback:function(e){s.$set(s.formInline,"type",e)},expression:"formInline.type"}},[s._v("项目")])],1),s._v(" "),2!=s.formInline.type?n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"名称："}},[n("el-autocomplete",{staticStyle:{width:"220px",float:"left","margin-right":"5px"},attrs:{"fetch-suggestions":s.queryPro,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:s.selectPro},scopedSlots:s._u([{key:"default",fn:function(e){var t=e.item;return[n("my-item-nursePro",{attrs:{item:t}})]}}],null,!1,2543219907),model:{value:s.project,callback:function(e){s.project=e},expression:"project"}})],1):n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"名称："}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:s.fChange},model:{value:s.formInline.fClass,callback:function(e){s.$set(s.formInline,"fClass",e)},expression:"formInline.fClass"}},s._l(s.fClassList,function(e){return n("el-option",{key:e.code,attrs:{label:e.name,value:e}})}),1),s._v(" "),n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:s.sChange},model:{value:s.formInline.sClass,callback:function(e){s.$set(s.formInline,"sClass",e)},expression:"formInline.sClass"}},s._l(s.sClassList,function(e){return n("el-option",{key:e.code,attrs:{label:e.name,value:e}})}),1),s._v(" "),n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:s.tChange},model:{value:s.formInline.tClass,callback:function(e){s.$set(s.formInline,"tClass",e)},expression:"formInline.tClass"}},s._l(s.tClassList,function(e){return n("el-option",{key:e.code,attrs:{label:e.name,value:e}})}),1)],1),s._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"提成："}},[n("el-input",{staticClass:"form_item_ipt220",on:{change:s.numCheck},model:{value:s.formInline.amount,callback:function(e){s.$set(s.formInline,"amount",e)},expression:"formInline.amount"}},[n("template",{slot:"prepend"},[s._v("￥")])],2)],1)],1),s._v(" "),n("div",{staticClass:"form_footer"},[n("el-button",{attrs:{type:"primary",loading:s.saveLoading},on:{click:s.sure}},[s._v("确 定")]),s._v(" "),n("el-button",{on:{click:s.cancel}},[s._v("取 消")])],1)],1)],1)},staticRenderFns:[]}},386:function(e,t,s){s(1905);var n=s(98)(s(1130),s(2380),"data-v-a47d0262",null);e.exports=n.exports}});