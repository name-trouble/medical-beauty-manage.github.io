webpackJsonp([106],{1147:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(37),l=i.n(n),a=i(100),c=i.n(a),r=i(99),o=i.n(r),d=i(64),s=i(528),u=i(2097),p=i.n(u),f=i(22),h=i(524);i.n(h);t.default={data:function(){return{loading:!1,SelectData:[],filterWord:"",sourceData:[],treeData:[],parentIds:[],defaultProps:{children:"children",label:"FullName"},openNodes:[0],defaultSelect:[],selectNodes:[],btnLoad:!1,userId:""}},components:{SmallUser:p.a},props:{data:Object},mounted:function(){this.GetMenu()},watch:{filterWord:function(e){this.$refs.menuTree.filter(e)}},methods:{GetMenu:function(){var t=this;return o()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,i.i(d._244)();case 3:t.sourceData=e.sent,t.treeData=i.i(s.a)(t.sourceData,"Id","ParentId",t.defaultProps.children),t.loading=!1;case 6:case"end":return e.stop()}},e,t)}))()},userClick:function(n){var r=this;return o()(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.userId=n,e.next=3,i.i(d._245)(n);case 3:t=e.sent,a=[],t instanceof Array&&0<t.length&&t.forEach(function(e){a.push(e.Id)}),r.sourceData.forEach(function(n){a.forEach(function(e,t){n.ParentId==e&&a.splice(t,1)})}),r.$refs.menuTree.setCheckedKeys(a);case 10:case"end":return e.stop()}},e,r)}))()},filterNode:function(e,t){return!e||-1!==t.FullName.indexOf(e)},renderContent:function(e,t){var n=t.node;t.data,t.store;return e("span",{class:"node_level"+n.level},[e("i",{class:"icon iconfont icon-"+n.data.ImageUrl}),e("span",{class:"node_word"},[n.label," "])])},getCheckedKeys:function(){thsi.selectNodes=this.$refs.menuTree.getCheckedKeys()},search:function(){},getParentId:function(e,t){var n="";this.sourceData.forEach(function(e){e.Id==t&&(n=e.ParentId)}),0!=n&&""!=n&&"undefined"!=n&&(-1!=this.parentIds.indexOf(n)&&-1!=e.indexOf(n)||this.parentIds.push(n),this.getParentId(e,n))},addMenu:function(){var s=this;return o()(c.a.mark(function e(){var t,n,a,r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""==s.userId)return s.$message({message:"请选择用户！",type:"info"}),e.abrupt("return");e.next=3;break;case 3:return s.btnLoad=!0,t=[],s.parentIds=[],n=s.$refs.menuTree.getCheckedKeys(),a=s.$refs.menuTree.getCheckedNodes(),r=s,0==n.length?t.push({ResourceCategory:"BaseUser",ResourceId:s.userId,Enabled:"1",TargetId:"",createUserId:i.i(f.b)("userId"),createBy:i.i(f.b)("userName")}):(a.forEach(function(e){-1==n.indexOf(e.ParentId)&&r.getParentId(n,e.Id)}),n.concat(s.parentIds).forEach(function(e){t.push({ResourceCategory:"BaseUser",ResourceId:s.userId,Enabled:"1",TargetId:e,createUserId:i.i(f.b)("userId"),createBy:i.i(f.b)("userName")})})),e.next=12,i.i(d._246)(l()(t));case 12:o=e.sent,setTimeout(function(){r.sendMsg(o),r.btnLoad=!1},800);case 14:case"end":return e.stop()}},e,s)}))()},sendMsg:function(e){"number"==typeof e&&0<e?this.$message({message:"保存成功！",type:"success"}):this.$message({message:"保存失败！",type:"error"})}}}},1158:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(100),r=a.n(n),o=a(99),s=a.n(o),i=a(64),l=a(524);a.n(l);t.default={props:{userClick:Function},data:function(){return{loading:!1,userInfo:{},filterWord:"",Realname:"",tableData:[],selectData:[],dataCount:0,currentPage:1,pageSize:10}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var n=this;return s()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={pageIndex:n.currentPage,pageSize:n.pageSize,keywords:n.filterWord.removeSP(),HospitalCode:"",BranchCode:"",typecode:""},n.loading=!0,e.next=4,a.i(i._136)(t);case 4:n.tableData=e.sent,n.loading=!1,n.dataCount=parseInt(n.tableData[0].RecordCount);case 7:case"end":return e.stop()}},e,n)}))()},selectChange:function(e){alert(1),this.selectData=e},rowClick:function(e){this.Realname=e.Realname,this.userClick&&this.userClick(e.Id)},pageIndexChange:function(){this.getUserInfo()},pageSizeChange:function(e){this.pageSize=e,this.getUserInfo()},init:function(){this.getUserInfo(),this.currentPage=1}}}},1258:function(e,t,n){(e.exports=n(215)(!1)).push([e.i,".select .el-input[data-v-154ab718]{position:static;width:60px;float:none}.select .el-input[data-v-154ab718],.select .el-input__inner[data-v-154ab718]{width:auto}.select .el-select[data-v-154ab718]{padding-right:0;float:none}.block[data-v-154ab718]{float:right;margin-right:30px;padding-right:0!important}.tbRow[data-v-154ab718]{cursor:pointer}",""])},1308:function(e,t,n){(e.exports=n(215)(!1)).push([e.i,".x-box[data-v-2c05fe20]{border:1px solid #d1dbe5;height:798px;width:100%;overflow:auto;padding-left:10px}.el-tree[data-v-2c05fe20]{cursor:default;background:#fff;border:none}p[data-v-2c05fe20]{font-size:18px;font-weight:600;text-align:center;color:#99805e;margin-bottom:5px}.el-input[data-v-2c05fe20]{width:100%;margin:-1px -1px 0}.user_box[data-v-2c05fe20]{border:1px solid #d1dbe5;height:800px;overflow:auto}.el-input[data-v-2c05fe20]{position:static;width:160px;float:none}.searchDiv[data-v-2c05fe20]{margin:10px 0}",""])},1683:function(e,t,n){var a=n(1258);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(216)("08fe7746",a,!0)},1733:function(e,t,n){var a=n(1308);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(216)("a32a9dce",a,!0)},2097:function(e,t,n){n(1683);var a=n(98)(n(1158),n(2155),"data-v-154ab718",null);e.exports=a.exports},2155:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"select",attrs:{id:"userinfo_select"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"用户名/真实名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.init(e)}},model:{value:t.filterWord,callback:function(e){t.filterWord=e},expression:"filterWord"}}),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",icon:"search"},on:{click:t.init}},[t._v("搜索")]),t._v(" "),n("span",{staticStyle:{"margin-left":"20px"}},[t._v("已选中：")]),t._v(" "),n("el-tag",{directives:[{name:"show",rawName:"v-show",value:""!=t.Realname,expression:"Realname!=''"}],staticStyle:{"font-size":"14px"},attrs:{type:"success"}},[t._v(t._s(t.Realname))])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","margin-top":"10px","margin-bottom":"10px"},attrs:{data:t.tableData,border:"","row-key":"id","highlight-current-row":""},on:{"selection-change":t.selectChange,"row-click":t.rowClick}},[n("el-table-column",{attrs:{prop:"Code",label:"编号",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"UserName",label:"用户名","min-width":"80"}}),t._v(" "),n("el-table-column",{attrs:{prop:"UserName",label:"机构名称","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["01"==e.row.TypeCode?n("span",[t._v("平台")]):n("span",[t._v("\n                   "+t._s(e.row.HospitalName)+"\n                   ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"UserName",label:"代理商","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.BranchName)),n("br"),t._v("\n              "+t._s(e.row.BranchCode)+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"Realname",label:"真实姓名","min-width":"100"}})],1),t._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{total:t.dataCount,"current-page":t.currentPage,"page-size":t.pageSize,"row-class-name":"tbRow","page-sizes":[10,20,50,100,500],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.pageSizeChange,"current-change":t.pageIndexChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)},staticRenderFns:[]}},2205:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"system-role"},[n("el-row",{staticStyle:{width:"100"},attrs:{gutter:24}},[n("el-col",{staticClass:"user_box",attrs:{span:11}},[n("p",[t._v("用户")]),t._v(" "),n("small-user",{attrs:{"user-click":t.userClick}})],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"x-box"},[n("p",[t._v("菜单")]),t._v(" "),n("div",{staticClass:"searchDiv"},[n("el-input",{attrs:{size:"small"},model:{value:t.filterWord,callback:function(e){t.filterWord=e},expression:"filterWord"}}),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",icon:"search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",loading:t.btnLoad},on:{click:t.addMenu}},[n("i",{staticClass:"icon iconfont icon-baocun",staticStyle:{"font-size":"12px"}}),t._v("保存")])],1),t._v(" "),n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"menuTree",attrs:{data:t.treeData,props:t.defaultProps,indent:20,"filter-node-method":t.filterNode,"show-checkbox":"","default-checked-keys":t.defaultSelect,"default-expand-all":!1,"node-key":"Id","render-content":t.renderContent,"default-expanded-keys":t.openNodes,"current-node-key":0,"highlight-current":!0,"expand-on-click-node":!0}})],1)])],1)],1)},staticRenderFns:[]}},401:function(e,t,n){n(1733);var a=n(98)(n(1147),n(2205),"data-v-2c05fe20",null);e.exports=a.exports},524:function(e,t,n){var a=n(532);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(216)("6bb834a8",a,!0)},528:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=n(37);n.n(a);function r(e,t){if(document.all)window.style=e,document.createStyleSheet("javascript:style");else{var n=document.createElement("style");n.type="text/css",n.innerHTML=e,document.getElementById(t).appendChild(n)}}function o(e,t,n,a){var r,o;if(!t||""==t||!e)return[];if(e instanceof Array){var s=[],i={};for(r=0,o=e.length;r<o;r++)i[e[r][t]]=e[r];for(r=0,o=e.length;r<o;r++)i[e[r][n]]&&e[r][t]!=e[r][n]?(i[e[r][n]][a]||(i[e[r][n]][a]=[]),i[e[r][n]][a].push(e[r])):s.push(e[r]);return s}return e}},532:function(e,t,n){(e.exports=n(215)(!1)).push([e.i,".system-role .el-tree-node__content{line-height:35px;height:35px;cursor:pointer}.system-role .el-tree-node.is-current>.el-tree-node__content{color:#9d6b4a}.system-role .el-tree-node.is-current>.el-tree-node__content .node_btn{display:block!important}.system-role .node_level1>.node_word,.system-role .node_level2>.node_word{font-size:14px}.system-role .node_level3>.node_word{font-size:13px}.system-role .icon.iconfont{padding:0 3px;font-size:17px}.system-role .el-tree-node__content:hover{background:#deeffa}.system-role .el-tree .el-input__inner{color:#252525!important}.system-role .el-tag{margin:0 5px}.system-role .el-table__row{cursor:pointer}.system-role .el-dialog__body{padding:10px 20px}.system-role .dilog_body{width:80%;padding:10px 15px}.system-role .el-dialog__header{text-align:center;padding:10px 20px 0}",""])}});