webpackJsonp([177],{1409:function(e,n,t){(e.exports=t(215)(!1)).push([e.i,".form_item_wt400[data-v-5e474047]{width:400px}.form_ipt_200[data-v-5e474047]{width:260px}",""])},1834:function(e,n,t){var i=t(1409);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t(216)("98ad64a2",i,!0)},2307:function(e,n){e.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:" debitNote"},[t("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,rules:n.rules,model:n.formInline,"label-width":"100px"}},[t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"日期：",prop:"date"}},[t("el-date-picker",{staticStyle:{width:"260px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:n.dateForm},model:{value:n.formInline.date,callback:function(e){n.$set(n.formInline,"date",e)},expression:"formInline.date"}})],1),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"消费商：",prop:"value"}},[t("el-select",{staticStyle:{width:"260px"},attrs:{filterable:"",remote:"",placeholder:"请输入关键词","remote-method":n.remoteMethod,loading:n.loading},model:{value:n.formInline.value,callback:function(e){n.$set(n.formInline,"value",e)},expression:"formInline.value"}},n._l(n.options,function(e){return t("el-option",{key:e.Id,attrs:{label:e.name,value:e}})}),1)],1),t("br"),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"类型：",prop:"type"}},[t("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:n.formInline.type,callback:function(e){n.$set(n.formInline,"type",e)},expression:"formInline.type"}},[n._v("补款")]),n._v(" "),t("el-radio",{staticClass:"radio",attrs:{label:"-1"},model:{value:n.formInline.type,callback:function(e){n.$set(n.formInline,"type",e)},expression:"formInline.type"}},[n._v("扣款")])],1),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"关联单据：",prop:""}},[t("el-input",{staticClass:"form_ipt_200",model:{value:n.formInline.fxCode,callback:function(e){n.$set(n.formInline,"fxCode",e)},expression:"formInline.fxCode"}})],1),t("br"),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"原因：",prop:"reason"}},[t("el-select",{staticClass:"form_ipt_200",model:{value:n.formInline.reason,callback:function(e){n.$set(n.formInline,"reason",e)},expression:"formInline.reason"}},n._l(n.reasonList,function(e,n){return t("el-option",{key:n,attrs:{label:e,value:e}})}),1)],1),t("br"),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"金额",prop:"debitAmount"}},[t("el-input-number",{staticClass:"form_ipt_200",staticStyle:{float:"none"},attrs:{controls:!1,debounce:n.debounce},model:{value:n.formInline.debitAmount,callback:function(e){n.$set(n.formInline,"debitAmount",e)},expression:"formInline.debitAmount"}})],1),t("br"),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10",staticStyle:{width:"100%"},attrs:{label:"图片",prop:""}},[t("el-upload",{attrs:{action:n.action,"list-type":"picture-card","on-preview":n.handlePictureCardPreview,accept:n.acceptImage,"before-upload":n.before,"file-list":n.fileList,"on-change":n.change,"on-remove":n.handleRemove,multiple:!0,"on-success":n.handleSuccess}},[t("i",{staticClass:"el-icon-plus"})]),n._v(" "),t("el-dialog",{attrs:{size:"tiny"},model:{value:n.dialogVisible,callback:function(e){n.dialogVisible=e},expression:"dialogVisible"}},[t("img",{attrs:{width:"100%",src:n.dialogImageUrl,alt:""}})])],1),t("br"),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"备注",prop:""}},[t("el-input",{staticClass:"form_ipt_200",attrs:{type:"textarea"},model:{value:n.formInline.memo,callback:function(e){n.$set(n.formInline,"memo",e)},expression:"formInline.memo"}})],1),t("br"),n._v(" "),t("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:" ",prop:""}},[t("el-button",{attrs:{type:"primary",disabled:n.show,loading:n.saveLoading},on:{click:function(e){return n.save("formInline")}}},[n._v("保存")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){return n.reset("formInline")}}},[n._v("重置")])],1)],1)],1)},staticRenderFns:[]}},275:function(e,n,t){t(1834);var i=t(98)(t(973),t(2307),"data-v-5e474047",null);e.exports=i.exports},441:function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return i}),t.d(n,"d",function(){return a}),t.d(n,"e",function(){return r}),t.d(n,"c",function(){return o});var i="image/gif,image/jpeg,image/jpg,image/png,image/svg",l="/Image/UploadImg",r="9",a=[{name:"中国",value:"01"},{name:"中国台湾",value:"02"},{name:"韩国",value:"03"},{name:"美国",value:"04"}],o=[{name:"网页",linkType:"0",linkUrl:""},{name:"热门",linkType:"1",linkUrl:"0"},{name:"直播",linkType:"1",linkUrl:"1"},{name:"视频",linkType:"1",linkUrl:"2"},{name:"问答",linkType:"1",linkUrl:"4"},{name:"精选案例",linkType:"2",linkUrl:"0"},{name:"最新案例",linkType:"2",linkUrl:"1"},{name:"附近案例",linkType:"2",linkUrl:"2"},{name:"医院详情",linkType:"3",linkUrl:""},{name:"医生详情",linkType:"4",linkUrl:""},{name:"项目详情",linkType:"5",linkUrl:""},{name:"商品详情",linkType:"6",linkUrl:""},{name:"案例详情",linkType:"7",linkUrl:""},{name:"卡券详情",linkType:"8",linkUrl:""},{name:"活动详情",linkType:"9",linkUrl:""},{name:"问答详情",linkType:"10",linkUrl:""},{name:"视频详情",linkType:"11",linkUrl:""},{name:"直播详情",linkType:"12",linkUrl:""},{name:"医美百科",linkType:"13",linkUrl:""},{name:"金牌设计",linkType:"14",linkUrl:""},{name:"抽奖中心",linkType:"15",linkUrl:""},{name:"红包专区",linkType:"16",linkUrl:""},{name:"html扩展页面",linkType:"17",linkUrl:""},{name:"医院列表",linkType:"18",linkUrl:""},{name:"项目列表",linkType:"19",linkUrl:""},{name:"卡券列表",linkType:"20",linkUrl:""},{name:"医生列表",linkType:"21",linkUrl:""},{name:"活动列表",linkType:"22",linkUrl:""},{name:"商家列表",linkType:"23",linkUrl:""},{name:"商家商品列表",linkType:"24",linkUrl:""},{name:"商家详情",linkType:"25",linkUrl:""},{name:"商家商品详情",linkType:"26",linkUrl:""},{name:"我的-订单",linkType:"27",linkUrl:"0"},{name:"我的-邀请好友",linkType:"27",linkUrl:"1"},{name:"我的-我的消息",linkType:"27",linkUrl:"2"},{name:"我的-我的收藏",linkType:"27",linkUrl:"3"},{name:"我的-身份认证",linkType:"27",linkUrl:"4"},{name:"我的-我的财富",linkType:"27",linkUrl:"5"},{name:"我的-关于我们",linkType:"27",linkUrl:"6"},{name:"我的-联系我们",linkType:"27",linkUrl:"7"},{name:"我的-信息咨询",linkType:"27",linkUrl:"8"},{name:"医院中心",linkType:"28",linkUrl:"0"},{name:"销售公司",linkType:"28",linkUrl:"1"},{name:"消费商",linkType:"28",linkUrl:"2"},{name:"商家中心",linkType:"28",linkUrl:"3"}]},973:function(e,n,l){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=l(100),r=l.n(t),i=l(99),a=l.n(i),o=l(64),s=l(65),m=(l.n(s),l(73)),c=(l.n(m),l(22)),p=l(101),f=l(441);n.default={data:function(){return{saveLoading:!1,debounce:1e3,show:!1,options:[],addReason:["5000业绩补款","专家日提成","公司奖励","其他"],debitList:["5000业绩扣款","消费订单退款","客户退会","招商会注册","恶意竞争","其他"],reasonList:[],loading:!1,action:"",dialogImageUrl:"",dialogVisible:!1,fileList:[],hospitalList:[],branchTopList:[],acceptImage:"",formInline:{hospital:"",value:"",type:"",reason:"",fxCode:"",memo:"",debitAmount:"",date:"",date1:""},rules:{value:[{type:"object",required:!0,message:"请选择消费商",trigger:"blur"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],type:[{required:!0,message:"请选择",trigger:"change"}],reason:[{required:!0,message:"请选择",trigger:"change"}],debitAmount:[{required:!0,type:"number",message:"请选择",trigger:"blur"}]}}},watch:{"formInline.type":{handler:function(e){this.reasonList=1==e?this.addReason:this.debitList,this.formInline.reason=""}}},mounted:function(){this.acceptImage=f.b,this.formInline.date=new Date,this.action=p.b+"/api/Image/UploadImg?op=prooforder"},methods:{GetBranchByKeywords:function(t){var i=this;return a()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.i(o._60)(t);case 3:(n=e.sent).forEach(function(e){e.name=e.BranchName+"("+e.PhoneNumber+")",e.value=e.Code}),i.options=n,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,i,[[0,8]])}))()},AddDebitOrder:function(n){var t=this;return a()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.saveLoading=!0,e.next=4,l.i(o._449)(n);case 4:e.sent.success?(t.$message({message:"添加成功",type:"success"}),t.show=!1,t.reset("formInline")):(t.$message.error("添加失败"),t.show=!1),t.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.$message.error("添加失败");case 13:case"end":return e.stop()}},e,t,[[0,9]])}))()},dateForm:function(e){this.formInline.date1=e},handleRemove:function(e,n){console.log(e,n),this.fileList=n,e.response&&this.DelImg(e.response)},DelImg:function(t){var i=this;return a()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.i(o._73)({filepath:t});case 2:(n=e.sent).status||i.$message({message:"原图片删除失败！"+n.errorMessage,type:"warning"});case 4:case"end":return e.stop()}},e,i)}))()},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},change:function(e,n){this.fileList=n},before:function(){if(5<this.fileList.length)return!1},handleSuccess:function(e,n,t){this.fileList=t},save:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return!1;n.show=!0,n.AddDebitOrder({branchCode:n.formInline.value.Code,branchName:n.formInline.value.BranchName,debitReason:n.formInline.reason,fxCode:n.formInline.fxCode,debitAmount:n.formInline.debitAmount,HospitalId:n.formInline.value.HospitalCode,HospitalName:n.formInline.value.HospitalName,imageUrl1:n.getPic(1),imageUrl2:n.getPic(2),imageUrl3:n.getPic(3),imageUrl4:n.getPic(4),imageUrl5:n.getPic(5),createUserId:l.i(c.b)("userId"),createBy:l.i(c.b)("userName"),DebitDate:n.formInline.date1,memo:n.formInline.memo,IsPositive:n.formInline.type})})},reset:function(e){this.$refs[e].resetFields(),this.fileList=[]},remoteMethod:function(e){var n=this;""!==e?(this.loading=!0,setTimeout(function(){n.loading=!1,n.GetBranchByKeywords({keyWords:e.removeSP()})},200)):this.options=[]},getPic:function(e){return this.fileList[e-1]?this.fileList[e-1].response:""}},components:{}}}});