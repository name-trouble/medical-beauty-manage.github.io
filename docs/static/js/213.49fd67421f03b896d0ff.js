webpackJsonp([213],{1514:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},1939:function(e,t,a){var n=a(1514);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(216)("df485d58",n,!0)},2414:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tag selCommon"},[a("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,"label-width":"80px"}},[a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"结算日期："}},[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"医院："}},[a("el-select",{staticStyle:{width:"200px"},on:{change:t.onSubmit},model:{value:t.hospitalCode,callback:function(e){t.hospitalCode=e},expression:"hospitalCode"}},t._l(t.hospitalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"关键字："}},[a("el-input",{attrs:{placeholder:"客户/店家"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"min_table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableData,border:"","max-height":"560","show-summary":"","summary-method":t.getSummaries}},[a("el-table-column",{attrs:{prop:"customerName",label:"结算日期",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.modifiedOn?a("span",[t._v(t._s(e.row.modifiedOn.substring(0,10)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderDate",label:"订单日期",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.orderDate?a("span",[t._v(t._s(e.row.orderDate.substring(0,10)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"execDate",label:"执行日期",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.execDate?a("span",[t._v(t._s(e.row.execDate.substring(0,10)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"fxCode",label:"单号","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"customerName",label:"客户","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"refrenceBranchName",label:"店家","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"项目明细","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"比例","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.expertRate?a("span",[t._v(t._s(e.row.expertRate)+"%")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"realAmount",label:"提成金额","min-width":"80",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.realAmount||0==e.row.realAmount?a("span",[t._v(t._s(e.row.realAmount.toQFW()))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"mon",label:"可提成金额","min-width":"80",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.mon||0==e.row.mon?a("span",[t._v(t._s(e.row.mon.toQFW()))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"customerName",label:"状态","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.isFinished?a("el-tag",{attrs:{type:"success"}},[t._v("已结算")]):t._e(),t._v(" "),0==e.row.isFinished?a("el-tag",{attrs:{type:"danger"}},[t._v("未结算")]):t._e()]}}])})],1)],1)},staticRenderFns:[]}},253:function(e,t,a){a(1939);var n=a(98)(a(949),a(2414),"data-v-dbb8d674",null);e.exports=n.exports},949:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(100),r=o.n(a),n=o(99),s=o.n(n),i=o(65),l=(o.n(i),o(22),o(64));t.default={data:function(){return{loading:!1,hospitalCode:"",date:new Date,project:"",title:"",opeIndex:0,currentPage:1,total:0,pageSize:10,keywords:"",formInline:{hospital:"",hospitalCode:"",hospitalName:"",date:"",startDate:"",endDate:"",IsFinished:"0"},tableData:[],projectList:[],hospitalList:[]}},mounted:function(){this.GetDropDownPermission()},methods:{dateChange:function(e){e?(e=e.formatDates(),this.formInline.startDate=e.substring(0,10),this.formInline.endDate=e.substring(13)):(this.formInline.startDate="",this.formInline.endDate="")},getSummaries:function(e){var t=e.columns,n=e.data,o=[];return t.forEach(function(t,e){if(0!==e){var a=n.map(function(e){return Number(e[t.property])});a.every(function(e){return isNaN(e)})?o[e]="":(o[e]=a.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e.add(t)},0),o[e]=o[e].toQFW())}else o[e]="合计"}),o[5]="",o},hosSelect:function(){0<this.formInline.hospital.length?(this.formInline.hospitalCode=this.formInline.hospital.split("|")[0],this.formInline.hospitalName=this.formInline.hospital.split("|")[1]):(this.formInline.hospitalCode="",this.formInline.hospitalName="")},GetDropDownPermission:function(){var a=this;return s()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.i(l.d)({typeId:1});case 2:t=e.sent,a.hospitalList=t.data,a.hospitalCode=t.data[0].code;case 5:case"end":return e.stop()}},e,a)}))()},onSubmit:function(){this.currentPage=1,this.search()},GetExpertReport:function(a){var n=this;return s()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.i(l._275)(a);case 2:t=e.sent,n.loading=!1,t.status?t.data.forEach(function(e){e.mon=e.expertRate.mul(e.realAmount),e.expertRate=e.expertRate.mul(100)}):n.$message({type:"error",message:"获取数据失败!"+t.errorMessage}),n.tableData=t.data;case 6:case"end":return e.stop()}},e,n)}))()},pageIndexChange:function(){this.search()},pageSizeChange:function(e){this.pageSize=e,this.search()},search:function(){this.loading=!0,this.GetExpertReport({startDate:this.formInline.startDate,endDate:this.formInline.endDate,HospitalCode:this.hospitalCode,Keywords:this.keywords.removeSP(),IsFinished:1})}},components:{}}}});