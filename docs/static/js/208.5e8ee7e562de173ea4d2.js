webpackJsonp([208],{1377:function(e,t,n){(e.exports=n(215)(!1)).push([e.i,"",""])},1802:function(e,t,n){var a=n(1377);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(216)("03f0ba5c",a,!0)},2275:function(e,t){e.exports={render:function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",{staticClass:"debitList selCommon"},[a("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:n.formInline,"label-width":"80px"}},[a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"单据时间："}},[a("el-date-picker",{staticClass:"wt200",attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:n.dateForm1},model:{value:n.formInline.date1,callback:function(e){n.$set(n.formInline,"date1",e)},expression:"formInline.date1"}})],1),n._v(" "),a("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"单据编号："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"enter",13,e.key,"Enter")?null:n.onSubmit(e)}},model:{value:n.formInline.num,callback:function(e){n.$set(n.formInline,"num",e)},expression:"formInline.num"}})],1),n._v(" "),a("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"消费商："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"enter",13,e.key,"Enter")?null:n.onSubmit(e)}},model:{value:n.formInline.name,callback:function(e){n.$set(n.formInline,"name",e)},expression:"formInline.name"}})],1),n._v(" "),a("el-form-item",{staticClass:"form_item_mt10 form_item_wt400",attrs:{label:"类型："}},[a("el-select",{on:{change:n.onSubmit},model:{value:n.formInline.type,callback:function(e){n.$set(n.formInline,"type",e)},expression:"formInline.type"}},[a("el-option",{attrs:{label:"全部",value:""}}),n._v(" "),a("el-option",{attrs:{label:"补款",value:"1"}}),n._v(" "),a("el-option",{attrs:{label:"扣款",value:"-1"}})],1)],1),n._v(" "),a("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:""},on:{change:n.onSubmit},model:{value:n.formInline.status,callback:function(e){n.$set(n.formInline,"status",e)},expression:"formInline.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),n._v(" "),a("el-option",{attrs:{label:"待结算",value:"0"}}),n._v(" "),a("el-option",{attrs:{label:"已完成",value:"1"}})],1)],1),n._v(" "),a("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:" "}},[a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:n.onSubmit}},[n._v("查询")])],1)],1),n._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"multipleTable",staticClass:"min_table smt",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:n.tableData,border:""}},[a("el-table-column",{attrs:{prop:"DebitNO",label:"单据编号","min-width":"100"}}),n._v(" "),a("el-table-column",{attrs:{prop:"DebitDate",label:"单据日期",width:"120"},scopedSlots:n._u([{key:"default",fn:function(e){return[e.row.DebitDate?a("span",[n._v(n._s(e.row.DebitDate.substring(0,10)))]):n._e()]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"BranchName",label:"补扣款对象","min-width":"100"}}),n._v(" "),a("el-table-column",{attrs:{prop:"FromName",label:"来源","min-width":"100"}}),n._v(" "),a("el-table-column",{attrs:{prop:"FxCode",label:"关联单据","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return n.view(t.$index,n.tableData,3)}}},[n._v(n._s(t.row.FxCode))])]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"DebitReason",label:"原因","min-width":"80"}}),n._v(" "),a("el-table-column",{attrs:{prop:"DebitAmount",label:"金额","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(e){return[e.row.DebitAmount?a("span",[n._v("￥"+n._s(e.row.DebitAmount.toQFW()))]):a("span",[n._v("￥0")])]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"Memo",label:"备注","min-width":"150","show-overflow-tooltip":""}}),n._v(" "),a("el-table-column",{attrs:{prop:"CreateBy",label:"提交人","min-width":"80"}}),n._v(" "),a("el-table-column",{attrs:{prop:"IsFinished",label:"状态","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(e){return[0==e.row.IsFinished?a("el-tag",{attrs:{type:"danger"}},[n._v("待结算")]):n._e(),n._v(" "),1==e.row.IsFinished?a("el-tag",{attrs:{type:"success"}},[n._v("已完成")]):n._e()]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"IsPositive",label:"补扣","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(e){return[1==e.row.IsPositive?a("el-tag",{attrs:{type:"success"}},[n._v("补款")]):n._e(),n._v(" "),"-1"==e.row.IsPositive?a("el-tag",{attrs:{type:"danger"}},[n._v("扣款")]):n._e()]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"sawCount",label:"操作","min-width":"80"},scopedSlots:n._u([{key:"default",fn:function(t){return[0==t.row.IsFinished?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return n.deleteRow(t.$index,n.tableData)}}},[n._v("删除")]):n._e()]}}])})],1),n._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":n.currentPage,"page-sizes":[10,20,30,40],"page-size":n.size,layout:"total, sizes, prev, pager, next, jumper",total:n.total},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},274:function(e,t,n){n(1802);var a=n(98)(n(972),n(2275),"data-v-503e0af3",null);e.exports=a.exports},972:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(100),i=r.n(n),a=r(99),s=r.n(a),o=r(65),l=(r.n(o),r(64));t.default={computed:{},data:function(){return{loading:!1,dialogFormVisible:!1,total:0,size:10,currentPage:1,formInline:{reason:"",date1:"",startTime:"",endTime:"",num:"",name:"",type:"",status:""},tableData:[],form:{}}},mounted:function(){this.onSubmit()},methods:{UpdateDebitOrder:function(t){var n=this;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.i(l._446)(t);case 3:e.sent.success?n.$message({message:"修改成功",type:"success"}):n.$message.error("修改失败"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,n,[[0,7]])}))()},DeleteDebitById:function(t){var n=this;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.i(l._447)(t);case 3:e.sent.success?(n.$message({message:"删除成功",type:"success"}),n.search()):n.$message.error("删除失败"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,n,[[0,7]])}))()},GetDebitOrder:function(n){var a=this;return s()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.loading=!0,e.next=4,r.i(l._448)(n);case 4:t=e.sent,a.loading=!1,t.status?(a.total=t.count,a.tableData=t.data):a.$message.error("获取数据失败"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,a,[[0,9]])}))()},dateForm1:function(e){e?(e=e.formatDates(),this.formInline.startTime=e.substring(0,10),this.formInline.endTime=e.substring(13)):(this.formInline.startTime="",this.formInline.endTime=""),this.onSubmit()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.GetDebitOrder({debitNO:this.formInline.num,branchName:this.formInline.name,startDate:this.formInline.startTime,endDate:this.formInline.endTime,pageIndex:this.currentPage,pageSize:this.size,IsPositive:this.formInline.type})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.$set(this.size,this.currentIndex,e),this.search()},handleCurrentChange:function(e){console.log("当前页: "+e),this.$set(this.currentPage,this.currentIndex,e),this.search()},deleteRow:function(e,t){var n=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.DeleteDebitById({id:t[e].Id})}).catch(function(){})},edit:function(){this.dialogFormVisible=!0}},components:{}}}});