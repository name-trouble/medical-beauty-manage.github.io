webpackJsonp([155],{1051:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(100),s=o.n(a),r=o(99),i=o.n(r),n=o(37),l=o.n(n),p=o(65),m=(o.n(p),o(436)),c=o.n(m),u=o(64),f=o(22);e.default={data:function(){return{dialogVisible:!1,date1:"",currentIndex:0,formInline:{startTime:"",endTime:"",keywords:"",status:"",extFee:"",memo:"",payType:""},tableData:[],currentPage:1,size:10,total:0,allData:[],sumdata:{applyAmount:0,extFee:0,recevieAmount:0},approveData:{}}},computed:{tHeader:function(){return["申请日期","申请人","手机号","持卡人","申请提现金额","手续费","实发金额","提现方式","银行","开户行","卡号"]},filterVal:function(){return["createOn","realName","mobile","bankCardHolder","applyAmount","extFee","recevieAmount","payType","bankName","bankDetailName","cardId"]},tableData1:function(){var a=this,t=JSON.parse(l()(this.allData));return t.forEach(function(t){for(var e in t)null==t[e]&&(t[e]="");t.status=a.getStatus(t.applyStatus),1==t.payType?t.payType="支付宝":2==t.payType?t.payType="银行卡":3==t.payType&&(t.payType="微信")}),t},name:function(){return"提现审核"}},mounted:function(){},methods:{grant:function(t){var e=this;this.$confirm("是否确定该体现申请已发放?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.i(u._540)({id:t.id}).then(function(t){t.status?(e.$message({message:"操作成功",type:"success"}),e.search()):e.$message.error("操作失败!"+t.errorMessage)})})},ReverseApproveCashApply:function(a){var r=this;this.$prompt("备注","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var e=t.value;o.i(u._541)({id:a.id,applyStatus:3,extFee:a.extFee,modifiedBy:o.i(f.b)("userName"),memo:e||""}).then(function(t){t.status?(r.$message({message:"操作成功",type:"success"}),r.search()):r.$message.error("操作失败!"+t.errorMessage)})})},getSummaries:function(){return["总合计：","","",this.sumdata.applyAmount,this.sumdata.extFee,this.sumdata.recevieAmount]},reject:function(a,r){var n=this;this.$prompt("请输入原因","拒绝提现",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var e=t.value;n.approveStatus({id:a.id,applyStatus:r,memo:e||"",modifiedUserId:o.i(f.b)("userId"),modifiedBy:o.i(f.b)("userName")})})},approve:function(t){this.formInline.memo="",this.formInline.extFee=Number(t.applyAmount.mul(.1)),this.dialogVisible=!0,this.approveData=JSON.parse(l()(t)),this.approveData.recevieAmount=Number(this.formInline.extFee.red(t.applyAmount))},extFeeChange:function(t){this.approveData.recevieAmount=Number(t.red(this.approveData.applyAmount))},sure:function(){this.approveStatus({id:this.approveData.id,applyStatus:2,extFee:this.formInline.extFee,memo:this.formInline.memo,modifiedUserId:o.i(f.b)("userId"),modifiedBy:o.i(f.b)("userName")})},approveStatus:function(a){var r=this;return i()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.i(u._538)(a);case 2:(e=t.sent).status?(r.$message({message:"操作成功",type:"success"}),r.search(),r.dialogVisible=!1):r.$message.error("操作失败!"+e.errorMessage);case 4:case"end":return t.stop()}},t,r)}))()},getStatus:function(t){switch(t){case 1:return"未审核";case 2:return"已审核";case 3:return"拒绝";case 4:return"已发放"}},exportData:function(){this.CashApplyList({pageIndex:1,pageSize:this.total,Keyword:this.formInline.keywords,applyStatus:this.formInline.status,startDate:this.formInline.startTime,endDate:this.formInline.endTime,payType:this.formInline.payType},1)},submit:function(){this.pageIndex=1,this.search()},CashApplyList:function(a,r){var n=this;return i()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.i(u._542)(a);case 3:e=t.sent,r?(n.allData=e.data,setTimeout(function(){n.$refs.exportCom.handleDownload()},100)):(n.total=e.count,n.tableData=e.data,n.sumdata=e.sumdata[0]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,n,[[0,7]])}))()},dateForm1:function(t){t?(t=t.formatDates(),this.formInline.startTime=t.substring(0,10),this.formInline.endTime=t.substring(13)):(this.formInline.startTime="",this.formInline.endTime=""),this.onSubmit()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.CashApplyList({pageIndex:this.currentPage,pageSize:this.size,applyStatus:this.formInline.status,keywords:this.formInline.keywords,startDate:this.formInline.startTime,endDate:this.formInline.endTime,payType:this.formInline.payType})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.size=t,this.search()},handleCurrentChange:function(t){console.log("当前页: "+t),this.currentPage=t,this.search()}},components:{Export:c.a}}},1341:function(t,e,a){(t.exports=a(215)(!1)).push([t.i,"",""])},1766:function(t,e,a){var r=a(1341);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(216)("4b37e06c",r,!0)},2238:function(t,e){t.exports={render:function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"selCommon projectOrder"},[r("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:a.formInline,"label-width":"80px"}},[r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"申请时间："}},[r("el-date-picker",{staticClass:"form_item_ipt220",attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:a.dateForm1},model:{value:a.date1,callback:function(t){a.date1=t},expression:"date1"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"关键字："}},[r("el-input",{staticClass:"form_item_ipt220",attrs:{placeholder:"APP昵称/手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.onSubmit(t)}},model:{value:a.formInline.keywords,callback:function(t){a.$set(a.formInline,"keywords",t)},expression:"formInline.keywords"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"状态："}},[r("el-select",{staticClass:"form_item_ipt220",on:{change:a.onSubmit},model:{value:a.formInline.status,callback:function(t){a.$set(a.formInline,"status",t)},expression:"formInline.status"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"未审核",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"已审核",value:"2"}}),a._v(" "),r("el-option",{attrs:{label:"拒绝",value:"3"}}),a._v(" "),r("el-option",{attrs:{label:"已发放",value:"4"}})],1)],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:"支付类型："}},[r("el-select",{staticClass:"form_item_ipt220",on:{change:a.onSubmit},model:{value:a.formInline.payType,callback:function(t){a.$set(a.formInline,"payType",t)},expression:"formInline.payType"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"支付宝",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"银行卡",value:"2"}}),a._v(" "),r("el-option",{attrs:{label:"微信",value:"3"}})],1)],1),r("br"),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:" "}},[r("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),r("Export",{ref:"exportCom",staticStyle:{display:"none"},attrs:{tHeader:a.tHeader,filterVal:a.filterVal,tableData1:a.tableData1,name:a.name}}),a._v(" "),r("el-button",{staticClass:"searchBtn",on:{click:a.exportData}},[a._v("导出报表")])],1)],1),a._v(" "),r("el-table",{staticClass:"min_table",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:"","summary-method":a.getSummaries,"show-summary":""}},[r("el-table-column",{attrs:{prop:"createOn",label:"申请日期","min-width":"110","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"realName",label:"申请人","min-width":"80","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"90"}}),a._v(" "),r("el-table-column",{attrs:{prop:"applyAmount",label:"申请提现金额","min-width":"90"}}),a._v(" "),r("el-table-column",{attrs:{prop:"extFee",label:"手续费","min-width":"90"}}),a._v(" "),r("el-table-column",{attrs:{prop:"recevieAmount",label:"到账金额","min-width":"90"}}),a._v(" "),r("el-table-column",{attrs:{prop:"bankCardHolder",label:"持卡人","min-width":"90","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"cardId",label:"提现方式","min-width":"80"},scopedSlots:a._u([{key:"default",fn:function(t){return[1==t.row.payType?r("div",{staticStyle:{color:"#13ce66"}},[a._v("支付宝")]):a._e(),a._v(" "),2==t.row.payType?r("div",[a._v("银行卡")]):a._e(),a._v(" "),3==t.row.payType?r("div",{staticStyle:{color:"#13ce66"}},[a._v("微信")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"cardId",label:"申请账户","min-width":"200"},scopedSlots:a._u([{key:"default",fn:function(t){return[1==t.row.payType?r("div",[r("span",[a._v("支付宝账户："+a._s(t.row.cardId))])]):a._e(),a._v(" "),2==t.row.payType?r("div",[r("span",[a._v("银行："+a._s(t.row.bankName))]),r("br"),a._v(" "),r("span",[a._v("开户行："+a._s(t.row.bankDetailName))]),r("br"),a._v(" "),r("span",[a._v("卡号："+a._s(t.row.cardId))])]):a._e(),a._v(" "),3==t.row.payType?r("div",[r("span",[a._v("微信账户："+a._s(t.row.cardId))])]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"80",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[1==t.row.applyStatus?r("el-tag",{attrs:{type:"gray"}},[a._v("未审核")]):a._e(),a._v(" "),2==t.row.applyStatus?r("el-tag",{attrs:{type:"warining"}},[a._v("已审核")]):a._e(),a._v(" "),3==t.row.applyStatus?r("el-tag",{attrs:{type:"danger"}},[a._v("拒绝")]):a._e(),a._v(" "),4==t.row.applyStatus?r("el-tag",{attrs:{type:"success"}},[a._v("已发放")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"modifiedOn",label:"审核时间","min-width":"120","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"confirmPayDate",label:"发放时间","min-width":"120",align:"center","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"alipayBizNo",label:"流水号","min-width":"120","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"100","show-overflow-tooltip":""}}),a._v(" "),r("el-table-column",{attrs:{prop:"grade",label:"操作","min-width":"250",align:"center"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",disabled:1!=e.row.applyStatus,size:"small"},on:{click:function(t){return a.approve(e.row,2)}}},[a._v("审核")]),a._v(" "),r("el-button",{attrs:{type:"danger",disabled:1!=e.row.applyStatus,size:"small"},on:{click:function(t){return a.reject(e.row,3)}}},[a._v("拒绝")]),a._v(" "),r("el-button",{attrs:{type:"success",disabled:2!=e.row.applyStatus,size:"small"},on:{click:function(t){return a.grant(e.row)}}},[a._v("发放")]),a._v(" "),r("el-button",{attrs:{type:"danger",disabled:2!=e.row.applyStatus,size:"small"},on:{click:function(t){return a.ReverseApproveCashApply(e.row)}}},[a._v("发放失败")])]}}])})],1),a._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),r("el-dialog",{attrs:{size:"",visible:a.dialogVisible,title:"审核",top:"20%"},on:{"update:visible":function(t){a.dialogVisible=t}}},[r("el-form",{staticStyle:{width:"350px"},attrs:{model:a.formInline,"label-width":"80px"}},[r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"提现金额："}},[r("span",[a._v(a._s(a.approveData.applyAmount))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"手续费："}},[r("el-input-number",{staticClass:"form_item_ipt220",attrs:{controls:!1},on:{change:a.extFeeChange},model:{value:a.formInline.extFee,callback:function(t){a.$set(a.formInline,"extFee",t)},expression:"formInline.extFee"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"实发金额："}},[r("span",[a._v(a._s(a.approveData.recevieAmount))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"提现方式："}},[1==a.approveData.payType?r("div",[a._v("支付宝")]):a._e(),a._v(" "),2==a.approveData.payType?r("div",[a._v("银行卡")]):a._e(),a._v(" "),3==a.approveData.payType?r("div",[a._v("微信")]):a._e()]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"银行："}},[r("span",[a._v(a._s(a.approveData.bankName)+" ("+a._s(a.approveData.bankDetailName)+")")])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"卡号："}},[r("span",[a._v(a._s(a.approveData.cardId))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"备注："}},[r("el-input",{staticClass:"form_item_ipt220",attrs:{type:"textarea",rows:4},model:{value:a.formInline.memo,callback:function(t){a.$set(a.formInline,"memo",t)},expression:"formInline.memo"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",staticStyle:{"text-align":"center"},attrs:{label:"","label-width":"0px"}},[r("el-button",{attrs:{type:"primary"},on:{click:a.sure}},[a._v("确定")]),a._v(" "),r("el-button",{on:{click:function(t){a.dialogVisible=!1}}},[a._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]}},332:function(t,e,a){a(1766);var r=a(98)(a(1051),a(2238),"data-v-3cade9b4",null);t.exports=r.exports},436:function(t,e,a){a(439);var r=a(98)(a(437),a(440),"data-v-6c47323e",null);t.exports=r.exports},437:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{tHeader:{},filterVal:{},tableData1:{type:Array},name:""},watch:{tableData1:{handler:function(t){this.otData=t},deep:!0}},data:function(){return{otData:[]}},methods:{handleDownload:function(){var a=this;r.e(220).then(function(){var t=r(448).export_json_to_excel,e=[];e=0!=a.otData.length?a.formatJson(a.filterVal,a.otData):a.formatJson(a.filterVal,a.tableData1),t(a.tHeader,e,a.name)}.bind(null,r)).catch(r.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}}},438:function(t,e,a){(t.exports=a(215)(!1)).push([t.i,".exportBtn[data-v-6c47323e]{background:#fff;border:1px solid #d6d4d4;font-size:14px;color:#666;border-radius:4px}",""])},439:function(t,e,a){var r=a(438);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(216)("fdf4f478",r,!0)},440:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("el-button",{staticClass:"exportBtn",attrs:{type:"primary"},on:{click:this.handleDownload}},[this._v("导出报表")])},staticRenderFns:[]}}});