webpackJsonp([172],{1136:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(37),n=l.n(a),r=l(100),i=l.n(r),s=l(99),o=l.n(s),c=l(101),m=l(441),p=l(65),u=(l.n(p),l(22),l(64)),d=c.a+m.a+"?op=card";t.default={data:function(){return{saveLoading:!1,loading:!1,title:"",tag:!1,total:0,size:10,currentPage:1,formInline:{keywords:"",typeCode:""},form:{typeCode:"",tagName:"",sortCode:1},tableData:[],imageUrl:"",baseImgUrl:"",uploadUrl:d,acceptImage:m.b}},computed:{},mounted:function(){this.onSubmit()},methods:{DelImg:function(a){var n=this;return o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.i(u._73)({filepath:a});case 2:(t=e.sent).status||n.$message({message:"原图片删除失败！"+t.errorMessage,type:"warning"});case 4:case"end":return e.stop()}},e,n)}))()},handleAvatarSuccess:function(e,t){""!=this.baseImgUrl&&this.DelImg(this.baseImgUrl),this.baseImgUrl=e,this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t=e.size/1024/1024<1;return t||this.$message.error("上传头像图片大小不能超过 1MB!"),t},AddTags:function(t){var a=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.saveLoading=!0,e.next=4,l.i(u._106)(t);case 4:e.sent.success?(a.$message({message:"添加成功",type:"success"}),a.search(),a.tag=!1):a.$message.error("添加失败"),a.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),a.$message.error("添加失败");case 13:case"end":return e.stop()}},e,a,[[0,9]])}))()},DeleteTagsById:function(t){var a=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.i(u._107)(t);case 3:e.sent.success?(a.$message({message:"删除成功",type:"success"}),a.search()):a.$message.error("删除失败"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a.$message.error("删除失败");case 11:case"end":return e.stop()}},e,a,[[0,7]])}))()},GetTagByPage:function(a){var n=this;return o()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.loading=!0,e.next=4,l.i(u._5)(a);case 4:t=e.sent,n.tableData=n.dealData(t.data),n.total=t.count,n.loading=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,n,[[0,10]])}))()},UpdateTags:function(t){var a=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.saveLoading=!0,e.next=4,l.i(u._108)(t);case 4:e.sent.success?(a.$message({message:"编辑成功",type:"success"}),a.search(),a.tag=!1):a.$message.error("编辑失败"),a.saveLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),a.$message.error("编辑失败");case 13:case"end":return e.stop()}},e,a,[[0,9]])}))()},onSubmit:function(){this.currentPage=1,this.search()},search:function(){this.GetTagByPage({TypeCode:this.formInline.typeCode,pageIndex:this.currentPage,pageSize:this.size,keywords:this.formInline.keywords.removeSP()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.size=e,this.search()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.search()},sure:function(){this.form.imgUrl=this.baseImgUrl,"编辑"==this.title?this.UpdateTags(this.form):(this.form.isEnable=1,this.AddTags(this.form))},cancel:function(){this.tag=!1},addTag:function(e,t,a){this.imageUrl="",this.baseImgUrl="",this.reset(),this.tag=!0,this.title=e,a&&(this.form=JSON.parse(n()(a[t])),this.imageUrl=this.form.imgUrl?c.b+this.form.imgUrl:"",this.baseImgUrl=this.form.imgUrl?this.form.imgUrl:"")},deleteRow:function(e,t){var a=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.DeleteTagsById({id:t[e].id})}).catch(function(){})},dealData:function(e){var t=this;return e.forEach(function(e){e.typeName=t.getName(e.typeCode)}),e},getName:function(e){switch(Number(e)){case 1:return"店铺";case 2:return"医美项目";case 3:return"积分商城";case 4:return"商家商品";case 5:return"人物";case 6:return"客户类型";case 7:return"代理类型"}},reset:function(){this.form={typeCode:"",tagName:""}}},components:{}}},1463:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".avatar-uploader .el-upload[data-v-81473180]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload[data-v-81473180]:hover{border-color:#20a0ff}.avatar-uploader-icon[data-v-81473180]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar[data-v-81473180]{width:178px;height:178px;display:block}",""])},1888:function(e,t,a){var n=a(1463);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(216)("1aa312d4",n,!0)},2363:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"tag selCommon"},[n("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:a.formInline,"label-width":"80px"}},[n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"关键字："}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"标签内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.onSubmit(e)}},model:{value:a.formInline.keywords,callback:function(e){a.$set(a.formInline,"keywords",e)},expression:"formInline.keywords"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"类型："}},[n("el-select",{on:{change:a.onSubmit},model:{value:a.formInline.typeCode,callback:function(e){a.$set(a.formInline,"typeCode",e)},expression:"formInline.typeCode"}},[n("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),n("el-option",{attrs:{label:"店铺",value:"1"}}),a._v(" "),n("el-option",{attrs:{label:"医美项目",value:"2"}}),a._v(" "),n("el-option",{attrs:{label:"积分商城",value:"3"}}),a._v(" "),n("el-option",{attrs:{label:"商家商品",value:"4"}}),a._v(" "),n("el-option",{attrs:{label:"人物",value:"5"}}),a._v(" "),n("el-option",{attrs:{label:"客户类型",value:"6"}}),a._v(" "),n("el-option",{attrs:{label:"代理类型",value:"7"}})],1)],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:" "}},[n("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("查询")]),a._v(" "),n("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:function(e){return a.addTag("添加")}}},[a._v("添加新标签")])],1)],1),a._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"smt min_table",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:"","max-height":"560"}},[n("el-table-column",{attrs:{prop:"code",label:"编号","min-width":"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"sortCode",label:"排序","min-width":"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"typeName",label:"类型","min-width":"120"}}),a._v(" "),n("el-table-column",{attrs:{prop:"tagName",label:"标签内容","min-width":"150"}}),a._v(" "),n("el-table-column",{attrs:{prop:"status",label:"操作",width:"150"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.addTag("编辑",t.$index,a.tableData)}}},[a._v("编辑")]),a._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.deleteRow(t.$index,a.tableData)}}},[a._v("删除")])]}}])})],1),a._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),n("el-dialog",{attrs:{title:a.title,visible:a.tag,size:""},on:{"update:visible":function(e){a.tag=e}}},[n("el-form",{staticStyle:{width:"400px"},attrs:{model:a.form,"label-width":"80px"}},[n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"标签类型："}},[n("el-select",{staticStyle:{width:"250px"},model:{value:a.form.typeCode,callback:function(e){a.$set(a.form,"typeCode",e)},expression:"form.typeCode"}},[n("el-option",{attrs:{label:"店铺",value:"1"}}),a._v(" "),n("el-option",{attrs:{label:"医美项目",value:"2"}}),a._v(" "),n("el-option",{attrs:{label:"积分商城",value:"3"}}),a._v(" "),n("el-option",{attrs:{label:"商家商品",value:"4"}}),a._v(" "),n("el-option",{attrs:{label:"人物",value:"5"}}),a._v(" "),n("el-option",{attrs:{label:"客户类型",value:"6"}}),a._v(" "),n("el-option",{attrs:{label:"代理类型",value:"7"}})],1)],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"内容："}},[n("el-input",{staticStyle:{width:"250px"},model:{value:a.form.tagName,callback:function(e){a.$set(a.form,"tagName",e)},expression:"form.tagName"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"排序："}},[n("el-input",{staticStyle:{width:"250px"},model:{value:a.form.sortCode,callback:function(e){a.$set(a.form,"sortCode",e)},expression:"form.sortCode"}})],1),a._v(" "),n("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"图片："}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:a.uploadUrl,acceptImage:a.acceptImage,"show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload}},[a.imageUrl?n("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a._v(" "),n("div",{staticClass:"footer_ope"},[n("el-button",{attrs:{type:"primary",loading:a.saveLoading},on:{click:a.sure}},[a._v("确定")]),a._v(" "),n("el-button",{on:{click:a.cancel}},[a._v("取消")])],1)],1)],1)},staticRenderFns:[]}},392:function(e,t,a){a(1888);var n=a(98)(a(1136),a(2363),"data-v-81473180",null);e.exports=n.exports},441:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return n}),a.d(t,"d",function(){return i}),a.d(t,"e",function(){return r}),a.d(t,"c",function(){return s});var n="image/gif,image/jpeg,image/jpg,image/png,image/svg",l="/Image/UploadImg",r="9",i=[{name:"中国",value:"01"},{name:"中国台湾",value:"02"},{name:"韩国",value:"03"},{name:"美国",value:"04"}],s=[{name:"网页",linkType:"0",linkUrl:""},{name:"热门",linkType:"1",linkUrl:"0"},{name:"直播",linkType:"1",linkUrl:"1"},{name:"视频",linkType:"1",linkUrl:"2"},{name:"问答",linkType:"1",linkUrl:"4"},{name:"精选案例",linkType:"2",linkUrl:"0"},{name:"最新案例",linkType:"2",linkUrl:"1"},{name:"附近案例",linkType:"2",linkUrl:"2"},{name:"医院详情",linkType:"3",linkUrl:""},{name:"医生详情",linkType:"4",linkUrl:""},{name:"项目详情",linkType:"5",linkUrl:""},{name:"商品详情",linkType:"6",linkUrl:""},{name:"案例详情",linkType:"7",linkUrl:""},{name:"卡券详情",linkType:"8",linkUrl:""},{name:"活动详情",linkType:"9",linkUrl:""},{name:"问答详情",linkType:"10",linkUrl:""},{name:"视频详情",linkType:"11",linkUrl:""},{name:"直播详情",linkType:"12",linkUrl:""},{name:"医美百科",linkType:"13",linkUrl:""},{name:"金牌设计",linkType:"14",linkUrl:""},{name:"抽奖中心",linkType:"15",linkUrl:""},{name:"红包专区",linkType:"16",linkUrl:""},{name:"html扩展页面",linkType:"17",linkUrl:""},{name:"医院列表",linkType:"18",linkUrl:""},{name:"项目列表",linkType:"19",linkUrl:""},{name:"卡券列表",linkType:"20",linkUrl:""},{name:"医生列表",linkType:"21",linkUrl:""},{name:"活动列表",linkType:"22",linkUrl:""},{name:"商家列表",linkType:"23",linkUrl:""},{name:"商家商品列表",linkType:"24",linkUrl:""},{name:"商家详情",linkType:"25",linkUrl:""},{name:"商家商品详情",linkType:"26",linkUrl:""},{name:"我的-订单",linkType:"27",linkUrl:"0"},{name:"我的-邀请好友",linkType:"27",linkUrl:"1"},{name:"我的-我的消息",linkType:"27",linkUrl:"2"},{name:"我的-我的收藏",linkType:"27",linkUrl:"3"},{name:"我的-身份认证",linkType:"27",linkUrl:"4"},{name:"我的-我的财富",linkType:"27",linkUrl:"5"},{name:"我的-关于我们",linkType:"27",linkUrl:"6"},{name:"我的-联系我们",linkType:"27",linkUrl:"7"},{name:"我的-信息咨询",linkType:"27",linkUrl:"8"},{name:"医院中心",linkType:"28",linkUrl:"0"},{name:"销售公司",linkType:"28",linkUrl:"1"},{name:"消费商",linkType:"28",linkUrl:"2"},{name:"商家中心",linkType:"28",linkUrl:"3"}]}});