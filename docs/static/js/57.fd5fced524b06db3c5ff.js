webpackJsonp([57],{1432:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".block[data-v-6cdd1c8a]{float:right}",""])},1857:function(e,t,a){var r=a(1432);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("42eb8427",r,!0)},2330:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"selCommon"},[r("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:a.formInline,"label-width":"80px"}},[r("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"关键字："}},[r("el-input",{staticClass:"wt200",attrs:{type:"daterange",placeholder:"录单人/单据编号"},model:{value:a.formInline.keyWords,callback:function(e){a.$set(a.formInline,"keyWords",e)},expression:"formInline.keyWords"}})],1),a._v(" "),r("el-form-item",{staticClass:"form_item_mt10 form_item_wh280",attrs:{label:""}},[r("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:a.submit}},[a._v("查询")]),a._v(" "),r("Export",{ref:"port",attrs:{tHeader:a.tHeader,filterVal:a.filterVal,tableData1:a.reportData,name:a.name}})],1)],1),a._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"smt min_table",staticStyle:{width:"100%","margin-top":"15px","margin-bottom":"10px"},attrs:{data:a.tableData,border:"","max-height":"660"}},[r("el-table-column",{attrs:{prop:"createOn","min-width":"120",label:"日期"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.createOn?r("span",[a._v("\n                    "+a._s(e.row.createOn.substring(0,10))+"\n                ")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"recordName",label:"录单人","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"fxCode","min-width":"120",label:"单据编号"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("span",{staticClass:"table_btn",attrs:{type:"text",size:"small"},on:{click:function(e){return a.read(t.$index)}}},[a._v(a._s(t.row.fxCode))])]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"errorReason",label:"错误原因","min-width":"120"}}),a._v(" "),r("el-table-column",{attrs:{prop:"approverName",label:"审核人","min-width":"120"}}),a._v(" "),r("el-table-column",{attrs:{prop:"approverDate",label:"审核日期","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.approverDate?r("span",[a._v("\n                    "+a._s(e.row.approverDate.substring(0,10))+"\n                ")]):a._e()]}}])})],1),a._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),r("el-dialog",{ref:"pay",attrs:{title:"查看详情",visible:a.ispopRead,top:"5%",size:""},on:{"update:visible":function(e){a.ispopRead=e},close:function(e){a.ispopRead=!1}}},[a.ispopRead?r("pop-read",{staticStyle:{width:"950px"},attrs:{data:a.selectData}}):a._e()],1)],1)},staticRenderFns:[]}},290:function(e,t,a){a(1857);var r=a(98)(a(996),a(2330),"data-v-6cdd1c8a",null);e.exports=r.exports},436:function(e,t,a){a(439);var r=a(98)(a(437),a(440),"data-v-6c47323e",null);e.exports=r.exports},437:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{tHeader:{},filterVal:{},tableData1:{type:Array},name:""},watch:{tableData1:{handler:function(e){this.otData=e},deep:!0}},data:function(){return{otData:[]}},methods:{handleDownload:function(){var a=this;r.e(220).then(function(){var e=r(448).export_json_to_excel,t=[];t=0!=a.otData.length?a.formatJson(a.filterVal,a.otData):a.formatJson(a.filterVal,a.tableData1),e(a.tHeader,t,a.name)}.bind(null,r)).catch(r.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})}}}},438:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".exportBtn[data-v-6c47323e]{background:#fff;border:1px solid #d6d4d4;font-size:14px;color:#666;border-radius:4px}",""])},439:function(e,t,a){var r=a(438);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("fdf4f478",r,!0)},440:function(e,t){e.exports={render:function(){var e=this.$createElement;return(this._self._c||e)("el-button",{staticClass:"exportBtn",attrs:{type:"primary"},on:{click:this.handleDownload}},[this._v("导出报表")])},staticRenderFns:[]}},449:function(e,t,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=I(100),D=I.n(a),r=I(103),k=I.n(r),n=I(66),S=I.n(n),o=I(102),N=I.n(o),s=I(99),i=I.n(s),T=I(101),O=I(64),l=I(22);t.default={props:{data:Object},data:function(){return{fileList:[],formData:{MedicalTypeId:"",OrderDate:"",formNO:"",customerId:"",customerName:"",refrenceBranchCode:"",refrenceBranchName:"",projectId:"",projectName:"",goodsUnitId:"",goodsUnitName:"",OrderAmount:0,hospitalId:"",hospitalName:"",serviceManId:"",serviceManName:"",designer:"",designerName:"",designerAssist:"",designerAssistName:"",doctorAssist:"",doctorAssistName:"",price:"",course:"",serviceFare:"",Memo:"",RealAmount:"",ConsumeTypeId:"",ConsumeTypeName:"",RefrenceHospitalName:""},baseImgPath:T.b,attachList:[],payInfoList:[],commandList:[],errorList:[],refundList:[],backList:[],MedicalTypeList:[],typeList:[],imgList:[],dialogImg:"",photoDialog:!1,serTypeCode:I.i(l.b)("serTypeCode")}},created:function(){var e="";e=this.data.FxCode?this.data.FxCode:this.data.fxCode,this.getDetail(e)},computed:{Retainage:function(){var t=this.formData.OrderAmount;return 0<this.payInfoList.length&&this.payInfoList.forEach(function(e){t=Number(e.RealAmount).red(Number(t))}),t}},filters:{filterTypeId:function(e){switch(e){case 2:return"医院积分";case 3:return"纹绣积分";case 4:return"皮肤科积分"}}},methods:{viewPhoto:function(e){this.dialogImg=e,this.photoDialog=!0},getDetail:function(g){var w=this;return i()(D.a.mark(function e(){var t,a,r,n,o,s,i,l,c,m,p,d,f,u,v,_,h,b,y,x,C;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.all([I.i(O._152)({fxCode:g}),I.i(O._62)(),I.i(O._153)(g),I.i(O._154)({fxcode:g}),I.i(O._155)({fxcode:g})]);case 2:if(t=e.sent,a=N()(t,5),r=a[0],n=a[1],o=a[2],s=a[3],i=a[4],w.errorList=r.data,l=[],n.forEach(function(e){"0017"==e.BusinessCode&&w.typeList.push(e),"0022"==e.BusinessCode&&w.MedicalTypeList.push(e),"0006"==e.BusinessCode&&l.push(e)}),i.status&&(w.backList=i.data),s.status&&(w.refundList=s.data.orderCashOutList),w.initAll(o.ProofOrder),(c=["ImgUrl1","ImgUrl2","ImgUrl3","ImgUrl4","ImgUrl5"]).forEach(function(e,t){o.ProofOrder[c[t]]&&w.imgList.push(T.b+o.ProofOrder[c[t]])}),console.log(w.imgList),w.commandList=o.OrderCommandList,o.ProofOrderExtList&&0<o.ProofOrderExtList.length&&(w.attachList=o.ProofOrderExtList),!(o.ProofOrderPayList&&0<o.ProofOrderPayList.length)){e.next=65;break}p=!(m=!0),d=void 0,e.prev=24,f=k()(o.ProofOrderPayList);case 26:if(m=(u=f.next()).done){e.next=50;break}for(v=u.value,h=!(_=!0),b=void 0,e.prev=31,y=k()(l);!(_=(x=y.next()).done);_=!0)C=x.value,v.PayType===C.DataCode&&(v.PayTypeName=C.DataName);e.next=39;break;case 35:e.prev=35,e.t0=e.catch(31),h=!0,b=e.t0;case 39:e.prev=39,e.prev=40,!_&&y.return&&y.return();case 42:if(e.prev=42,h)throw b;e.next=45;break;case 45:return e.finish(42);case 46:return e.finish(39);case 47:m=!0,e.next=26;break;case 50:e.next=56;break;case 52:e.prev=52,e.t1=e.catch(24),p=!0,d=e.t1;case 56:e.prev=56,e.prev=57,!m&&f.return&&f.return();case 59:if(e.prev=59,p)throw d;e.next=62;break;case 62:return e.finish(59);case 63:return e.finish(56);case 64:w.payInfoList=o.ProofOrderPayList;case 65:case"end":return e.stop()}},e,w,[[24,52,56,64],[31,35,39,47],[40,,42,46],[57,,59,63]])}))()},getName:function(e,t){var a=!0,r=!1,n=void 0;try{for(var o,s=k()(t);!(a=(o=s.next()).done);a=!0){var i=o.value;if(i.DataCode==e)return i.DataName}}catch(e){r=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw n}}},initAll:function(e){var t=e;this.formData={projectType:t.ProjectType,OrderDate:t.OrderDate,fxCode:t.FxCode,Id:t.Id,ConsumeTypeId:t.ConsumeTypeId,ConsumeTypeName:this.getName(t.ConsumeTypeId,this.typeList),MedicalTypeName:this.getName(t.MedicalTypeId,this.MedicalTypeList),formNO:t.FormNO,customerId:t.CustomerId,customerName:t.CustomerName,refrenceBranchCode:t.RefrenceBranchCode?t.RefrenceBranchCode:"",refrenceBranchName:t.RefrenceBranchName?t.RefrenceBranchName:"",RefrenceBranchTags:t.RefrenceBranchTags?t.RefrenceBranchTags:"",projectId:t.ProjectId,projectName:t.ProjectName,hospitalId:t.HospitalId,hospitalName:t.HospitalName,serviceManId:t.ServiceManId,serviceManName:t.ServiceManName,designer:t.Designer||"",OrderAmount:t.OrderAmount,designerName:t.DesignerName||"",designerAssist:t.DesignerAssist||"",designerAssistName:t.DesignerAssistName||"",doctorAssist:t.DoctorAssist||"",doctorAssistName:t.DoctorAssistName||"",price:t.Price,course:t.Course,goodsUnitId:t.GoodsUnitId+"",goodsUnitName:t.GoodsUnitName,serviceFare:t.ServiceFare+"",Memo:t.Memo||"",RealAmount:t.RealAmount,MarketConsultantName:t.MarketConsultantName,MarketConsultantCode:t.MarketConsultantCode,RealPrice:t.RealPrice,RefrenceHospitalName:"",orderType:t.OrderType};for(var a=1;a<=5;a++)if(t["ImgUrl"+a]&&""!==t["ImgUrl"+a]){var r={name:"ImgUrl"+a,url:T.b+t["ImgUrl"+a]};this.fileList.push(r)}this.GetBranchByCode(t.RefrenceBranchCode)},GetBranchByCode:function(a){var r=this;return i()(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.i(O._51)({branchcode:a});case 2:t=e.sent,r.formData.RefrenceHospitalName=t.Branch.HospitalName?t.Branch.HospitalName:"";case 4:case"end":return e.stop()}},e,r)}))()}}}},450:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".flex-box[data-v-22b52a7a]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;margin-bottom:5px;background:#f9f9f9}.flex-box .flex-item[data-v-22b52a7a]{-webkit-box-flex:0;-ms-flex:0 50%;flex:0 50%;margin-top:10px}.foot-div[data-v-22b52a7a]{background:#f9f9f9}.reportManage[data-v-22b52a7a]{font-size:12px;position:relative;margin:0;padding:0;overflow:auto}",""])},451:function(e,t,a){var r=a(450);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("203f4032",r,!0)},452:function(e,t,a){a(451);var r=a(98)(a(449),a(453),"data-v-22b52a7a",null);e.exports=r.exports},453:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"reportManage"},[r("div",[r("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[a._v("项目信息")]),a._v(" "),r("div",{staticClass:"flex-box"},[r("div",{staticClass:"flex-item"},[r("el-form",{ref:"formAdd1",attrs:{"label-position":"right","label-width":"120px",model:a.formData}},[r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"订单日期："}},[r("span",[a._v(a._s(a.formData.OrderDate.substring(0,10))+" ")])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"类型："}},[r("span",[a._v(a._s(a.formData.ConsumeTypeName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"客户："}},[r("span",[a._v(a._s(a.formData.customerName)+"["+a._s(a.formData.customerId)+"]")])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"项目："}},[r("span",[a._v(a._s(a.formData.projectName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"项目类型："}},[0==a.formData.projectType?r("span",[a._v("年卡/疗程")]):a._e(),a._v(" "),1==a.formData.projectType?r("span",[a._v("单次")]):a._e()]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"疗程：",prop:"refrenceBranchCode"}},[r("span",[a._v(a._s(a.formData.course))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"医院：",prop:"hospitalName"}},[r("span",[a._v(a._s(a.formData.hospitalName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"咨询师："}},[r("span",[a._v(a._s(a.formData.MarketConsultantName))]),a._v(" "),a.formData.MarketConsultantCode?r("span",[a._v("["+a._s(a.formData.MarketConsultantCode)+"]")]):a._e()]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"设计师：",prop:"refrenceBranchCode"}},[r("span",[a._v(a._s(a.formData.designerName))])]),a._v(" "),"001"!=a.serTypeCode&&"003"!=a.serTypeCode?r("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"实际价格：",prop:"refrenceBranchCode"}},[r("span",[a._v(a._s(a.formData.RealPrice))])]):a._e()],1)],1),a._v(" "),r("div",{staticClass:"flex-item"},[r("el-form",{ref:"formAdd2",attrs:{"label-position":"right","label-width":"120px",model:a.formData}},[r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"订单编号"}},[r("span",[a._v(a._s(a.formData.fxCode))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"支付类型："}},[r("span",[a._v(a._s(a.formData.MedicalTypeName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"纸质单号：",prop:"formNO"}},[r("span",[a._v(a._s(a.formData.formNO))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"推荐人：",prop:"refrenceBranchCode"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:""!==a.formData.refrenceBranchCode,expression:"formData.refrenceBranchCode!==''"}]},[a._v(a._s(a.formData.refrenceBranchName+"["+a.formData.refrenceBranchCode+"]")+"\n                            "),a.formData.RefrenceBranchTags?r("span",[a._v("("+a._s(a.formData.RefrenceBranchTags)+")")]):a._e()]),a._v(" "),r("div",[a._v("医院："+a._s(a.formData.RefrenceHospitalName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"规格："}},[r("span",[a._v(a._s(a.formData.goodsUnitName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"项目价格：",prop:"price"}},[r("span",{directives:[{name:"show",rawName:"v-show",value:""!=a.formData.price,expression:"formData.price!=''"}]},[r("span",{staticStyle:{"font-size":"15px",color:"black"}},[a._v("￥")]),a._v(a._s(a.formData.price))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"专家费：",prop:"serviceFare"}},[r("span",{directives:[{name:"show",rawName:"v-show",value:""!=a.formData.serviceFare,expression:"formData.serviceFare!=''"}]},[a._v(a._s(a.formData.serviceFare)+"元")])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"医生助理：",prop:"doctorAssist"}},[r("span",[a._v(a._s(a.formData.doctorAssistName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"设计师助理：",prop:"designerAssist"}},[r("span",[a._v(a._s(a.formData.designerAssistName))])]),a._v(" "),r("el-form-item",{staticClass:"form_item_mt0",attrs:{label:"订单来源：",prop:"designerAssist"}},[r("span",{domProps:{textContent:a._s(1==a.formData.orderType?"app订单":"线下订单")}})])],1)],1)])]),a._v(" "),"001"!=a.serTypeCode&&"003"!=a.serTypeCode?r("div",{staticClass:"flex-box",staticStyle:{"margin-top":"-30px"}},[r("div",{staticClass:"flex-item",staticStyle:{margin:"20px 0px 0 30px","padding-left":"30px",flex:"0 100%"}},[r("el-table",{attrs:{data:a.attachList,border:"","min-width":"500"}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ProofDesc",label:"附加项名称","min-width":"60"}}),a._v(" "),r("el-table-column",{attrs:{prop:"TypeName",label:"费用类型","min-width":"60"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Amount",label:"单价","min-width":"60"}},[a._v("\n                    ￥"+a._s(a.formData.Amount)+"\n                ")]),a._v(" "),r("el-table-column",{attrs:{prop:"Quantity",label:"数量","min-width":"60"}}),a._v(" "),r("el-table-column",{attrs:{prop:"Course",label:"总期数","min-width":"65"}}),a._v(" "),r("el-table-column",{attrs:{prop:"CurrentCourse",label:"支付期数","min-width":"65"}}),a._v(" "),r("el-table-column",{attrs:{prop:"SubTotal",label:"总额","min-width":"65"}},[a._v("\n                        ￥"+a._s(a.formData.SubTotal)+"\n                    ")]),a._v(" "),r("el-table-column",{attrs:{prop:"StageAmount",label:"分期总额","min-width":"65"}}),a._v(" "),r("el-table-column",{attrs:{prop:"IsEffective",label:"是否提成"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.IsEffective?r("span",[a._v("是")]):r("span",[a._v("否")])]}}],null,!1,910863426)})],1),a._v(" "),""!=a.formData.OrderAmount?r("p",{staticStyle:{margin:"10px 0"}},[a._v("订单金额: ￥"+a._s(a.formData.OrderAmount)+" ")]):a._e()],1)]):a._e(),a._v(" "),"001"!=a.serTypeCode&&"003"!=a.serTypeCode?r("div",[r("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[a._v("支付信息")]),a._v(" "),r("div",{staticClass:"flex-box"},[r("div",{staticClass:"flex-item",staticStyle:{margin:"10px 0px 0 30px","padding-left":"30px",flex:"0 100%"}},[r("el-table",{attrs:{data:a.payInfoList,border:"","min-width":"500"}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),a._v(" "),r("el-table-column",{attrs:{prop:"PayTypeName",label:"支付方式","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("span",[a._v(a._s(e.row.PayTypeName))]),a._v(" "),"009"==e.row.PayType?r("span",[a._v(a._s(a._f("filterTypeId")(e.row.TypeId)))]):a._e()]}}],null,!1,3806112968)}),a._v(" "),r("el-table-column",{attrs:{prop:"OnlineOrderCode",label:"app订单号","min-width":"80"}}),a._v(" "),r("el-table-column",{attrs:{prop:"PayDate",label:"支付日期","min-width":"110"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.PayDate?r("span",[a._v(a._s(e.row.PayDate.substring(0,10))+" "+a._s(e.row.PayDate.substring(11,19)))]):a._e()]}}],null,!1,435555505)}),a._v(" "),r("el-table-column",{attrs:{prop:"TicketsCode",label:"券号","min-width":"110"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ReceiveAccount",label:"收款账户","min-width":"110"}}),a._v(" "),r("el-table-column",{attrs:{prop:"RealAmount",label:"支付金额","min-width":"120"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.RealAmount?r("span",[a._v("\n                                "+a._s(e.row.RealAmount.toQFW())+"\n                            ")]):a._e()]}}],null,!1,1674943245)}),a._v(" "),r("el-table-column",{attrs:{prop:"Memo",label:"备注","min-width":"120","show-overflow-tooltip":""}})],1),a._v(" "),r("div",{staticStyle:{margin:"5px"}},[a._v("\n                    尾款金额："+a._s(a.Retainage)+"\n                ")])],1)])]):a._e(),a._v(" "),r("div",[r("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[a._v("执行信息")]),a._v(" "),r("div",{staticClass:"flex-box"},[r("div",{staticClass:"flex-item",staticStyle:{margin:"10px 0px 0 30px","padding-left":"30px",flex:"0 100%"}},[r("el-table",{attrs:{data:a.commandList,border:"","min-width":"500"}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),a._v(" "),r("el-table-column",{attrs:{prop:"DoctorName",label:"执行医生","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"NurseName",label:"执行护士","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"DoctorAssistName",label:"医生助理","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ExecDate",label:"执行时间","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.ExecDate?r("span",[a._v("\n                                "+a._s(e.row.ExecDate.substring(0,10))+"\n                            ")]):a._e()]}}])}),a._v(" "),r("el-table-column",{attrs:{prop:"Memo",label:"备注","min-width":"170","show-overflow-tooltip":""}})],1)],1)])]),a._v(" "),"7"==a.formData.ConsumeTypeId?r("div",[r("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[a._v("返款信息")]),a._v(" "),r("div",{staticClass:"flex-box"},[r("div",{staticClass:"flex-item",staticStyle:{margin:"10px 0px 0 30px","padding-left":"30px",flex:"0 100%"}},[r("el-table",{attrs:{data:a.refundList,border:"","min-width":"500"}},[r("el-table-column",{attrs:{type:"createOn",label:"返款时间","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.createOn?r("span",[a._v(a._s(e.row.createOn.substring(0,10)))]):a._e()]}}],null,!1,2995543066)}),a._v(" "),r("el-table-column",{attrs:{prop:"payType",label:"返款方式","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return["001"==e.row.payType?r("span",[a._v("现金")]):a._e(),a._v(" "),"009"==e.row.payType?r("span",[a._v("积分")]):a._e(),a._v(" "),"008"==e.row.payType?r("span",[a._v("卡券")]):a._e(),a._v(" "),"018"==e.row.payType?r("span",[a._v("预付款")]):a._e()]}}],null,!1,1690063530)}),a._v(" "),r("el-table-column",{attrs:{prop:"worthAmount",label:"返款金额","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"pointAmount",label:"返款积分","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"ticketsCode",label:"返款券号","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"createBy",label:"操作人","min-width":"100"}}),a._v(" "),r("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"150","show-overflow-tooltip":""}})],1)],1)])]):a._e(),a._v(" "),"001"!=a.serTypeCode&&"003"!=a.serTypeCode?r("div",[r("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[a._v("退款信息")]),a._v(" "),r("div",{staticClass:"flex-box"},[r("div",{staticClass:"flex-item",staticStyle:{margin:"10px 0px 0 30px","padding-left":"30px",flex:"0 100%"}},[r("el-table",{attrs:{data:a.backList,border:"","min-width":"500"}},[r("el-table-column",{attrs:{type:"createOn",label:"退款时间","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.createOn?r("span",[a._v(a._s(e.row.createOn.substring(0,10)))]):a._e()]}}],null,!1,2995543066)}),a._v(" "),r("el-table-column",{attrs:{prop:"payType",label:"退款方式","min-width":"110"},scopedSlots:a._u([{key:"default",fn:function(e){return["001"==e.row.payType?r("span",[a._v("现金")]):a._e(),a._v(" "),"009"==e.row.payType?r("span",[a._v("积分")]):a._e(),a._v(" "),"008"==e.row.payType?r("span",[a._v("卡券")]):a._e(),a._v(" "),"018"==e.row.payType?r("span",[a._v("预付款")]):a._e()]}}],null,!1,1690063530)}),a._v(" "),r("el-table-column",{attrs:{prop:"ticketsCode",label:"退款券号","min-width":"110"}}),a._v(" "),r("el-table-column",{attrs:{prop:"refundAmount",label:"退款金额","min-width":"120"}}),a._v(" "),r("el-table-column",{attrs:{prop:"createBy",label:"操作人","min-width":"110"}}),a._v(" "),r("el-table-column",{attrs:{prop:"memo",label:"备注","min-width":"200","show-overflow-tooltip":""}})],1)],1)])]):a._e(),a._v(" "),r("div",[r("p",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[a._v("其它信息")]),a._v(" "),r("div",{staticClass:"foot-div"},[r("el-form",{ref:"formAdd3",attrs:{"label-position":"right","label-width":"120px",model:a.formData}},[r("el-form-item",{staticClass:" form_item_mt10",attrs:{label:"错误信息："}},[r("el-table",{attrs:{data:a.errorList,border:"","min-width":"500"}},[r("el-table-column",{attrs:{type:"index",label:"","min-width":"70"}}),a._v(" "),r("el-table-column",{attrs:{prop:"recordName",label:"录单人","min-width":"110"}}),a._v(" "),r("el-table-column",{attrs:{prop:"errorReason",label:"错误原因","min-width":"110"}}),a._v(" "),r("el-table-column",{attrs:{prop:"approverName",label:"审核人","min-width":"110"}}),a._v(" "),r("el-table-column",{attrs:{prop:"approverDate",label:"审核时间","min-width":"110"},scopedSlots:a._u([{key:"default",fn:function(e){return[e.row.approverDate?r("span",[a._v("\n                               "+a._s(e.row.approverDate.substring(0,10))+"\n                             ")]):a._e()]}}])})],1)],1),a._v(" "),r("el-form-item",{attrs:{label:"备注："}},[r("el-input",{attrs:{disabled:!0,type:"textarea",rows:2},model:{value:a.formData.Memo,callback:function(e){a.$set(a.formData,"Memo",e)},expression:"formData.Memo"}})],1),a._v(" "),r("el-form-item",{attrs:{label:"图片"}},a._l(a.fileList,function(t,e){return r("img",{key:e,attrs:{width:"100",height:"",src:t.url},on:{click:function(e){return a.viewPhoto(t.url)}}})}),0)],1)],1)]),a._v(" "),r("el-dialog",{attrs:{title:"查看图片",visible:a.photoDialog,modal:!1,size:"",top:"40%"},on:{"update:visible":function(e){a.photoDialog=e}}},[r("img",{attrs:{src:a.dialogImg,width:"600",alt:""}})])],1)},staticRenderFns:[]}},486:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{date:""},data:function(){return{date1:"",date2:"",pickerOptionsStart:{disabledDate:function(){}},pickerOptionsOver:{disabledDate:function(){}}}},watch:{date:{handler:function(){this.copyWorth()},deep:!0}},mounted:function(){},methods:{copyWorth:function(){0!=this.date.length&&(this.date1=this.date.substring(0,10),this.date2=this.date.substring(13))},getDate:function(e){var t=e.split(" ")[0].split("-");return new Date(t[0],t[1]-1,t[2])},starTimeChang:function(e){var t=void 0;t=e?this.getDate(e):"",this.pickerOptionsOver={disabledDate:function(e){return e.getTime()<t}},this.$emit("getDate",this.date1,this.date2)},endTimeChang:function(e){var t=void 0;t=e?this.getDate(e):"",this.pickerOptionsStart={disabledDate:function(e){return e.getTime()>=t}},this.$emit("getDate",this.date1,this.date2)}},components:{}}},488:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,"",""])},489:function(e,t,a){var r=a(488);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("fbb5ce40",r,!0)},490:function(e,t,a){a(489);var r=a(98)(a(486),a(491),"data-v-266030ab",null);e.exports=r.exports},491:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期","picker-options":t.pickerOptionsStart},on:{change:t.starTimeChang},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}}),t._v(" "),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期","picker-options":t.pickerOptionsOver},on:{change:t.endTimeChang},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)},staticRenderFns:[]}},493:function(e,t,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(66),p=m.n(a),r=m(102),d=m.n(r),n=m(103),i=m.n(n),o=m(100),f=m.n(o),s=m(99),l=m.n(s),c=m(490),u=m.n(c),v=m(436),_=m.n(v),h=m(64),b=m(22);m(1).default.component("my-item-memberItem",{functional:!0,render:function(e,t){var a=t.props.item;return e("div",t.data,[e("p",{attrs:{class:"select_name"+a.Type,title:a.name}},["名字："+a.name]),e("p",{attrs:{class:"select_name"+a.Type,title:a.name}},["编号："+a.code]),e("p",{attrs:{class:"select_name"+a.Type,title:a.name}},["手机号："+a.phone])])},props:{item:{type:Object,required:!0}}}),t.default={props:{addShow:"",searchCondition:{payOff:!0,type:Object,IsPayOff:"",CommandState:"",ApproveState:"",crossHos:""},filterBack:Function,onAdd:Function},created:function(){this.refund=0!=this.searchCondition.refund,this.formInline.ApproveState=this.searchCondition.ApproveState,this.formInline.CommandState=this.searchCondition.CommandState,this.formInline.IsPayOff=this.searchCondition.IsPayOff?this.searchCondition.IsPayOff:"",this.payOff="false"!=this.searchCondition.payOff,this.formInline.label=this.searchCondition.label,this.type=this.searchCondition.type,this.onAdd&&(this.isShowAdd=!0)},mounted:function(){var e=new Date;e.setDate(1),this.date1=[e,new Date],this.getSupplierByPage()},data:function(){return{serviceSup:"",topBranch:[],refund:!0,payOff:!1,date1:"",date2:"",tHeader:"",filterVal:"",tableData1:[],name:"",type:"",isShowAdd:!1,hospitalList:[],refHospitalList:[],consumeList:[],MedicalTypeList:[],formInline:{hospital:"",label:"",startTimeF:"",endTimeF:"",startTimeS:"",endTimeS:"",num:"",bill:"",customer:"",rec:"",projectName:"",IsPayOff:"",CommandState:"",OrderType:"",ApproveState:"",SettState:"",ConsumeTypeId:"",IsReturn:"",IsFeedback:"",MedicalTypeId:"",topBranchList:"",toBranch:"",refHospitalCode:"",serviceId:""},customerList:[],exportLoading:!1}},watch:{serviceSup:{handler:function(e){""==e&&(this.formInline.serviceId="")}}},methods:{searchAllData:function(){this.exportLoading=!0,this.filterBack&&this.filterBack(this.formInline,!1,1)},exportData:function(){this.$refs.exportData.handleDownload(),this.exportLoading=!1},queryCus:function(r,n){var o=this;return l()(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.customerList=[],""!==r&&null!=r)return e.next=4,m.i(h._124)({keywords:r.removeSP()});e.next=6;break;case 4:t=e.sent,o.GetServiceByKeywords(t);case 6:o.formInline.serviceId="",clearTimeout((a=o).timeout),o.timeout=setTimeout(function(){n(a.customerList)},100);case 10:case"end":return e.stop()}},e,o)}))()},GetServiceByKeywords:function(e){if(e.data instanceof Array&&0<e.data.length){var t=!0,a=!1,r=void 0;try{for(var n,o=i()(e.data);!(t=(n=o.next()).done);t=!0){var s=n.value;this.customerList.push({value:s.serviceInfoName,phone:s.phoneNumber,code:s.code,name:s.serviceInfoName,Name:s.serviceInfoName,hospitalCode:s.hospitalCode,hospitalName:s.hospitalName})}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}}this.loading1=!1},selectCus:function(e){this.formInline.serviceId=e.code?e.code:""},getSupplierByPage:function(){var c=this;return l()(f.a.mark(function e(){var t,a,r,n,o,s,i,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.searchCondition.crossHos)return e.next=3,m.i(h.x)({suppliername:"",suptypecode:"",phonenumber:"",startdate:"",enddate:"",pageindex:1,pagesize:1e3});e.next=17;break;case 3:return(t=e.sent).forEach(function(e){for(var t in e)e[t.substring(0,1).toLowerCase()+t.substring(1)]=e[t]}),c.hospitalList=t,c.hospitalList.unshift({supplierName:"全部",code:""}),e.next=9,m.i(h.d)({typeId:"2"});case 9:return a=e.sent,c.topBranchList=a.data,e.next=13,m.i(h.d)({typeId:"1"});case 13:r=e.sent,c.refHospitalList=r.data,e.next=21;break;case 17:return e.next=19,m.i(h.d)({typeId:1});case 19:n=e.sent,c.hospitalList=n.data;case 21:return c.formInline.hospital=m.i(b.b)("hospitalCode")||"",e.next=24,p.a.all([m.i(h.l)("0017"),m.i(h.l)("0022")]);case 24:o=e.sent,s=d()(o,2),i=s[0],l=s[1],i.forEach(function(e){e.DataCode<=7&&c.consumeList.push(e)}),c.MedicalTypeList=l;case 30:case"end":return e.stop()}},e,c)}))()},dateForm1:function(e){e?(e=e.formatDates(),this.formInline.startTimeF=e.substring(0,10),this.formInline.endTimeF=e.substring(13)):(this.formInline.startTimeF="",this.formInline.endTimeF="")},onSubmit:function(e){var t=e?1:0;this.filterBack&&this.filterBack(this.formInline,t)},add:function(){this.onAdd&&this.onAdd()}},components:{dateLink:u.a,Export:_.a}}},494:function(e,t,a){(e.exports=a(215)(!1)).push([e.i,".wt200[data-v-6cdf4c80]{width:200px}",""])},496:function(e,t,a){var r=a(494);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(216)("3cc906ea",r,!0)},497:function(e,t,a){a(496);var r=a(98)(a(493),a(498),"data-v-6cdf4c80",null);e.exports=r.exports},498:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportSearch"},[a("el-form",{staticClass:"demo-form-inline form_search",attrs:{inline:!0,model:t.formInline,"label-width":"80px"}},[a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"订单日期："}},[a("el-date-picker",{staticClass:"wt200",attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:t.dateForm1},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"单据编号："}},[a("el-input",{staticClass:"form_sear_ipt wt200",attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(1)}},model:{value:t.formInline.bill,callback:function(e){t.$set(t.formInline,"bill",e)},expression:"formInline.bill"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"纸质单号："}},[a("el-input",{staticClass:"form_sear_ipt wt200",attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(1)}},model:{value:t.formInline.num,callback:function(e){t.$set(t.formInline,"num",e)},expression:"formInline.num"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"关键字："}},[a("el-input",{staticClass:"form_sear_ipt wt200",attrs:{placeholder:"客户/基金卡号/手机号"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(1)}},model:{value:t.formInline.customer,callback:function(e){t.$set(t.formInline,"customer",e)},expression:"formInline.customer"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"推荐人："}},[a("el-input",{staticClass:"form_sear_ipt wt200",attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(1)}},model:{value:t.formInline.rec,callback:function(e){t.$set(t.formInline,"rec",e)},expression:"formInline.rec"}})],1),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"项目名称："}},[a("el-input",{staticClass:"form_sear_ipt wt200",attrs:{placeholder:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(1)}},model:{value:t.formInline.projectName,callback:function(e){t.$set(t.formInline,"projectName",e)},expression:"formInline.projectName"}})],1),t._v(" "),0==t.type&&t.payOff?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"付款状态："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.IsPayOff,callback:function(e){t.$set(t.formInline,"IsPayOff",e)},expression:"formInline.IsPayOff"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"未付清",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"已付定金",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"已付清",value:"1"}})],1)],1):t._e(),t._v(" "),0==t.type?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"执行状态："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.CommandState,callback:function(e){t.$set(t.formInline,"CommandState",e)},expression:"formInline.CommandState"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"未执行",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"执行中",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"执行完毕",value:"2"}})],1)],1):t._e(),t._v(" "),0==t.type||2==t.type?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"审核状态："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.ApproveState,callback:function(e){t.$set(t.formInline,"ApproveState",e)},expression:"formInline.ApproveState"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"待审核",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"部分审核",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"审核完毕",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"已关闭",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:"退款",value:"6"}})],1)],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"订单来源："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.OrderType,callback:function(e){t.$set(t.formInline,"OrderType",e)},expression:"formInline.OrderType"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"app订单",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"线下订单",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"分期订单",value:"3"}})],1)],1),t._v(" "),t.refund?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"规则类型："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.ConsumeTypeId,callback:function(e){t.$set(t.formInline,"ConsumeTypeId",e)},expression:"formInline.ConsumeTypeId"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.consumeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.DataName,value:e.DataCode}})})],2)],1):t._e(),t._v(" "),t.refund?a("el-form-item",{staticClass:" form_item_mt0",attrs:{label:"支付类型："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.MedicalTypeId,callback:function(e){t.$set(t.formInline,"MedicalTypeId",e)},expression:"formInline.MedicalTypeId"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.MedicalTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.DataName,value:e.DataCode}})})],2)],1):t._e(),t._v(" "),2==t.type?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"返款状态："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.IsReturn,callback:function(e){t.$set(t.formInline,"IsReturn",e)},expression:"formInline.IsReturn"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"未返款",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"已返款",value:"1"}})],1)],1):t._e(),t._v(" "),t.isShowAdd?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"回访状态："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.IsFeedback,callback:function(e){t.$set(t.formInline,"IsFeedback",e)},expression:"formInline.IsFeedback"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"待回访",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"已回访",value:"1"}})],1)],1):t._e(),t._v(" "),t.searchCondition.crossHos?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"销售公司："}},[a("el-select",{staticClass:"wt200",on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.toBranch,callback:function(e){t.$set(t.formInline,"toBranch",e)},expression:"formInline.toBranch"}},t._l(t.topBranchList,function(e,t){return a("el-option",{key:t,attrs:{label:e.branchName,value:e.code}})}),1)],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10",attrs:{label:"执行医院："}},[a("el-select",{staticStyle:{width:"200px"},on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.hospital,callback:function(e){t.$set(t.formInline,"hospital",e)},expression:"formInline.hospital"}},t._l(t.hospitalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1),t._v(" "),t.searchCondition.crossHos?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"推荐医院："}},[a("el-select",{staticStyle:{width:"200px"},on:{change:function(e){return t.onSubmit(1)}},model:{value:t.formInline.refHospitalCode,callback:function(e){t.$set(t.formInline,"refHospitalCode",e)},expression:"formInline.refHospitalCode"}},t._l(t.refHospitalList,function(e,t){return a("el-option",{key:t,attrs:{label:e.supplierName,value:e.code}})}),1)],1):t._e(),t._v(" "),t.searchCondition.service?a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:"服务商："}},[a("el-autocomplete",{staticStyle:{width:"200px"},attrs:{"fetch-suggestions":t.queryCus,placeholder:"请输入内容","trigger-on-focus":!1},on:{select:t.selectCus},scopedSlots:t._u([{key:"default",fn:function(e){var t=e.item;return[a("my-item-memberItem",{attrs:{item:t}})]}}],null,!1,2653962964),model:{value:t.serviceSup,callback:function(e){t.serviceSup=e},expression:"serviceSup"}})],1):t._e(),t._v(" "),a("el-form-item",{staticClass:"form_item_mt10 ",attrs:{label:" "}},[a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:function(e){return t.onSubmit(1)}}},[t._v("查询\n            ")]),t._v(" "),t.isShowAdd?a("el-button",{staticClass:"searchBtn",attrs:{type:"primary"},on:{click:t.add}},[t._v("添加\n            ")]):t._e(),t._v(" "),a("Export",{ref:"exportData",staticStyle:{display:"none"},attrs:{tHeader:t.searchCondition.tHeader,filterVal:t.searchCondition.filterVal,tableData1:t.searchCondition.tableData1,name:t.searchCondition.name}}),t._v(" "),t.searchCondition.isExport?a("el-button",{staticClass:"searchBtn",attrs:{loading:t.exportLoading},on:{click:t.searchAllData}},[t._v("导出报表")]):t._e()],1)],1)],1)},staticRenderFns:[]}},996:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(100),l=i.n(a),r=i(66),c=i.n(r),o=i(102),m=i.n(o),s=i(99),p=i.n(s),d=i(37),f=i.n(d),u=i(65),v=(i.n(u),i(436)),_=i.n(v),h=i(497),b=(i.n(h),i(452)),y=i.n(b),x=i(64);t.default={data:function(){return{loading:!1,cusMes:{},dialogView:!1,size:10,total:0,currentPage:1,allData:[],tableData:[],hospitalList:[],formInline:{startDate:"",endDate:"",hospital:"",keyWords:""},ispopRead:!1,consumeList:[],medicalList:[]}},computed:{tHeader:function(){return["日期","录单人","单据编号","错误原因","审核人","审核日期"]},filterVal:function(){return["createOn","recordName","fxCode","errorReason","approverName","approverDate"]},name:function(){return"错误单"},reportData:function(){return JSON.parse(f()(this.tableData))}},filters:{filFun:function(e){for(var t=n.consumeList.length,a=n.consumeList,r=0;r<t;r++)if(e==a[r].DataCode)return a[r].DataName},filFunM:function(e){for(var t=n.medicalList.length,a=n.medicalList,r=0;r<t;r++)if(e==a[r].DataCode)return a[r].DataName}},mounted:function(){(n=this).getType()},methods:{dateChange:function(e){e?(e=e.formatDates(),this.formInline.startDate=e.substring(0,10),this.formInline.endDate=e.substring(13)):(this.formInline.startDate="",this.formInline.endDate="")},view:function(e,t){this.cusMes=t[e],this.dialogView=!0},getType:function(){var s=this;return p()(l.a.mark(function e(){var t,a,r,n,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.i(x.d)({typeId:1});case 2:return t=e.sent,s.hospitalList=t.data,s.formInline.hospital=s.hospitalList[0].code,e.next=7,c.a.all([i.i(x.l)("0017"),i.i(x.l)("0022")]);case 7:a=e.sent,r=m()(a,2),n=r[0],o=r[1],s.consumeList=n,s.medicalList=o;case 13:case"end":return e.stop()}},e,s)}))()},GetProofOrderErrorAll:function(a){var r=this;return p()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.loading=!0,e.prev=1,e.next=4,i.i(x._506)(a);case 4:(t=e.sent).status?(r.total=t.count,r.allData=t.data,r.pageChange()):r.$message({type:"error",message:"获取数据失败!"+t.errorMessage}),r.loading=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}},e,r,[[1,9]])}))()},dealData:function(){var e=JSON.parse(f()(this.tableData));return e.forEach(function(e){e.OrderType="1"==e.OrderType?"线上":"线下",e.reason="被驳回",10==e.ApproveState?e.IsPayOff="已关闭":6==e.ApproveState?e.IsPayOff="已退款":e.IsPayOff?e.IsPayOff="已结清":e.IsPayOff="未结清"}),e},submit:function(){this.GetProofOrderErrorAll({keywords:this.formInline.keyWords.removeSP()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.size=e,this.pageChange()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.pageChange()},read:function(e){this.selectData=this.tableData[e],this.ispopRead=!0},pageChange:function(){this.tableData=this.allData.slice(this.size*(this.currentPage-1),this.size*this.currentPage)}},components:{PopRead:y.a,Export:_.a}}}});